import{r as y,R as $}from"./index-DYgqlTni.js";var Ee=Object.defineProperty,Se=(t,e,n)=>e in t?Ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z=(t,e,n)=>Se(t,typeof e!="symbol"?e+"":e,n),me={exports:{}},N={};/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var ie;function _e(){if(ie)return N;ie=1;var t=$,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(i,l,d){var u,c={},f=null,h=null;d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(h=l.ref);for(u in l)r.call(l,u)&&!o.hasOwnProperty(u)&&(c[u]=l[u]);if(i&&i.defaultProps)for(u in l=i.defaultProps,l)c[u]===void 0&&(c[u]=l[u]);return{$$typeof:e,type:i,key:f,ref:h,props:c,_owner:a.current}}return N.Fragment=n,N.jsx=s,N.jsxs=s,N}me.exports=_e();var m=me.exports;const ve=class W{constructor(){z(this,"observers",new Map),z(this,"elementToKey",new Map),z(this,"observerCallbacks",new Map)}static getInstance(){return W.instance||(W.instance=new W),W.instance}getConfigKey(e){const{root:n,rootMargin:r="0px",threshold:a=0}=e,o=n?`root-${n.tagName}-${n.className}`:"root-null",s=Array.isArray(a)?a.join(","):String(a);return`${o}|${r}|${s}`}observe(e,n,r={},a=!1){const o=this.getConfigKey(r);if(!this.observers.has(o)){const d=new IntersectionObserver(u=>{u.forEach(c=>{const f=this.observerCallbacks.get(o);f&&f.forEach(h=>{h.element===c.target&&(h.callback(c.isIntersecting),h.unobserveOnVisible&&c.isIntersecting&&this.unobserve(c.target))})})},{root:r.root||null,rootMargin:r.rootMargin||"0px",threshold:r.threshold??0});this.observers.set(o,d),this.observerCallbacks.set(o,new Set)}const s=this.observers.get(o),i=this.observerCallbacks.get(o),l={element:e,callback:n,unobserveOnVisible:a};return i.add(l),this.elementToKey.set(e,o),s.observe(e),()=>this.unobserve(e)}unobserve(e){const n=this.elementToKey.get(e);if(!n)return;const r=this.observers.get(n),a=this.observerCallbacks.get(n);if(r&&a){r.unobserve(e);const o=Array.from(a).find(s=>s.element===e);o&&a.delete(o),this.elementToKey.delete(e),a.size===0&&(r.disconnect(),this.observers.delete(n),this.observerCallbacks.delete(n))}}disconnectAll(){this.observers.forEach(e=>e.disconnect()),this.observers.clear(),this.observerCallbacks.clear(),this.elementToKey.clear()}getObserverCount(){return this.observers.size}getElementCount(){return this.elementToKey.size}getStats(){const e=this.observers.size,n=this.elementToKey.size,r=e>0?n/e:0;return{observerCount:e,elementCount:n,averageElementsPerObserver:Math.round(r*100)/100}}};z(ve,"instance");let Re=ve;const De=Re.getInstance(),Me=(t,e,n,r)=>De.observe(t,e,n,r);function Ie(t,e){const{root:n,rootMargin:r="0px",threshold:a=0,unobserveOnVisible:o=!0}=e||{},[s,i]=y.useState(!1);return y.useEffect(()=>{const l=t.current;if(!l)return;const d=Me(l,u=>{i(u)},{root:n||null,rootMargin:r,threshold:a},o);return()=>{d()}},[t.current,n,r,a,o]),{inView:s}}const $e=y.forwardRef((t,e)=>{const{src:n,alt:r="",root:a,rootMargin:o,threshold:s,unobserveOnVisible:i,loading:l="lazy",onBeforeLoad:d,onLoadStart:u,onLoadSuccess:c,onLoadError:f,onEnterViewport:h,onLeaveViewport:g,children:v,containerStyle:b,containerClassName:L,imageStyle:E,imageClassName:I}=t,P=y.useRef(null),w=y.useRef(null),[S,R]=y.useState({isIdle:!0,isLoading:!1,isLoaded:!1,isError:!1}),[T,j]=y.useState(null),{inView:M}=Ie(P,{root:a,rootMargin:o,threshold:s,unobserveOnVisible:i}),p=y.useRef(!1);y.useEffect(()=>{M&&!p.current?h==null||h():!M&&p.current&&(g==null||g()),p.current=M},[M,h,g]);const k=y.useCallback(async()=>{if(!(S.isLoading||S.isLoaded)){R(x=>({...x,isIdle:!1,isLoading:!0,isError:!1})),u==null||u();try{const x=await Promise.resolve(d==null?void 0:d())||n;j(x)}catch(x){R({isIdle:!1,isLoading:!1,isLoaded:!1,isError:!0}),f==null||f(x instanceof Error?x:new Error(String(x)))}}},[n,d,u,f,S.isLoading,S.isLoaded]);y.useEffect(()=>{M&&k()},[M,k]),y.useImperativeHandle(e,()=>({reload:()=>{R({isIdle:!0,isLoading:!1,isLoaded:!1,isError:!1}),j(null),M&&k()},reset:()=>{R({isIdle:!0,isLoading:!1,isLoaded:!1,isError:!1}),j(null)},getState:()=>S}),[M,k,S]);const _=y.useMemo(()=>({position:"relative",width:"100%",height:"100%",overflow:"hidden",background:S.isError?"#fee":"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",...b}),[b,S.isError]);return m.jsxs("div",{ref:x=>{P.current=x,t.containerRefExternal&&(t.containerRefExternal.current=x)},className:L,style:_,children:[S.isLoading&&m.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2},children:m.jsx("span",{style:{color:"#999",fontSize:12},children:"Loading..."})}),T&&m.jsx("img",{ref:x=>{w.current=x,t.imageRefExternal&&(t.imageRefExternal.current=x)},src:T,alt:r,loading:l,crossOrigin:t.crossOrigin??void 0,onLoad:()=>{R({isIdle:!1,isLoading:!1,isLoaded:!0,isError:!1}),c==null||c(T||void 0)},onError:()=>{const x=new Error("Image load error");R({isIdle:!1,isLoading:!1,isLoaded:!1,isError:!0}),f==null||f(x)},style:{width:"100%",height:"100%",objectFit:"cover",opacity:S.isLoaded?1:0,transition:"opacity 180ms ease",...E},className:I}),v]})});$e.displayName="LazyLoadImageCore";function Pe(){const t=new Map,e=new Map;return{emit:(n,r)=>{const a=t.get(n);if(a)for(const o of a)try{o(r)}catch{}},on:(n,r)=>{let a=t.get(n);return a||(a=new Set,t.set(n,a)),a.add(r),()=>{a==null||a.delete(r)}},getData:n=>e.get(n),setData:(n,r)=>e.set(n,r)}}const je=new Set(["onProgress"]);function Ue(){const t=new Map,e=[];let n=null;const r=16,a=c=>{t.set(c.name,c),c.init&&Promise.resolve(c.init()).catch(f=>{})},o=c=>{const f=t.get(c);f&&(f.destroy&&Promise.resolve(f.destroy()).catch(h=>{}),t.delete(c))},s=c=>t.get(c),i=()=>Array.from(t.values()),l=async()=>{if(e.length===0)return;const c=new Map;e.forEach(f=>{c.has(f.hookName)||c.set(f.hookName,[]),c.get(f.hookName).push(f)}),e.length=0;for(const[f,h]of c.entries()){const g=h[h.length-1];await u(g.hookName,g.context,...g.args)}},d=()=>{n||(n=setTimeout(()=>{l().catch(c=>{}),n=null},r))},u=async(c,f,...h)=>{const g=Array.from(t.values());for(const v of g){const b=v.hooks[c];if(b)try{const L=await Promise.resolve(b(f,...h));if(L===!1)return!1;if(L!==void 0&&L!==!0)return L}catch{}}};return{register:a,unregister:o,getPlugin:s,getAllPlugins:i,executeHook:async(c,f,...h)=>{if(je.has(c)){e.push({hookName:c,context:f,args:h,timestamp:Date.now()}),d();return}else return u(c,f,...h)}}}const pe=class V{constructor(){z(this,"networkInfo"),z(this,"deviceInfo"),z(this,"listeners",new Set),this.initListeners()}static getInstance(){return V.instance||(V.instance=new V),V.instance}initListeners(){if(typeof window>"u")return;const e=typeof navigator<"u"?navigator:void 0,n=(e==null?void 0:e.connection)||(e==null?void 0:e.mozConnection)||(e==null?void 0:e.webkitConnection);n&&n.addEventListener("change",()=>{this.networkInfo=void 0,this.notifyListeners()}),window.addEventListener("resize",()=>{this.deviceInfo=void 0,this.notifyListeners()})}getNetworkInfo(){return this.networkInfo||(this.networkInfo=this.detectNetwork()),this.networkInfo}getDeviceInfo(){return this.deviceInfo||(this.deviceInfo=this.detectDevice()),this.deviceInfo}detectNetwork(){const e=typeof navigator<"u"?navigator:void 0,n=(e==null?void 0:e.connection)||(e==null?void 0:e.mozConnection)||(e==null?void 0:e.webkitConnection);if(n)return{effectiveType:n.effectiveType||"4g",downlink:Number(n.downlink||10),rtt:Number(n.rtt||50),saveData:!!n.saveData}}detectDevice(){const e=typeof window<"u"?window.innerWidth:1024,n=typeof window<"u"?window.innerHeight:768,r=typeof window<"u"&&window.devicePixelRatio||1,a=typeof navigator<"u"&&navigator.userAgent||"",o=/Mobile|Android|iPhone|iPad/i.test(a);return{type:/iPad|Tablet/i.test(a)?"tablet":o?"mobile":"desktop",os:a,browser:a,devicePixelRatio:r,viewportWidth:e,viewportHeight:n}}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e()}catch{}})}refreshNetworkInfo(){this.networkInfo=void 0,this.networkInfo=this.detectNetwork(),this.notifyListeners()}refreshDeviceInfo(){this.deviceInfo=void 0,this.deviceInfo=this.detectDevice(),this.notifyListeners()}};z(pe,"instance");let Ce=pe;const ye=Ce.getInstance(),ze=()=>ye.getNetworkInfo(),Te=()=>ye.getDeviceInfo();function Rt(t,e){const n=Array.isArray(e)?{plugins:e,enableDebug:!1}:e,{plugins:r,enableDebug:a=!1}=n,o=y.forwardRef((s,i)=>{const{src:l}=s,d=y.useRef(Ue()).current,u=y.useRef(Pe()).current;y.useEffect(()=>(r.forEach(p=>{if(p.hookFactory){const k=p.hookFactory.create(p.config||{});p.hookFactory.inject(p,k),a&&u.setData(`hook:${p.name}`,k)}d.register(p)}),()=>{r.forEach(p=>d.unregister(p.name))}),[r]),y.useEffect(()=>{if(a)try{const p=r.map(k=>k.name)}catch{}},[a,r]);const c=y.useRef(null),f=y.useRef(null),h=y.useRef(new Map),[g,v]=$.useState({isIdle:!0,isLoading:!1,isLoaded:!1,isError:!1}),[b,L]=$.useState(!1),E=y.useMemo(()=>ze(),[]),I=y.useMemo(()=>Te(),[]),P=y.useMemo(()=>({src:l,containerRef:c,imageRef:f,props:s,bus:u,networkInfo:E,deviceInfo:I,performanceData:{loadStartTime:0},sharedData:h.current}),[l,s,u,E,I]),w=y.useMemo(()=>({...P,imageState:g,isIntersecting:b}),[P,g,b]),S=y.useMemo(()=>{let p={...s};return r.forEach(k=>{k.hooks.transformProps&&(p=k.hooks.transformProps(p))}),p},[s,r]),R=y.useMemo(()=>r.map((p,k)=>{var _,x;const D=(x=(_=p.hooks).render)==null?void 0:x.call(_,w);return D?m.jsx($.Fragment,{children:D},`plugin-render-${p.name}-${k}`):null}).filter(Boolean),[w,r]),T=y.useMemo(()=>r.map((p,k)=>{var _,x;const D=(x=(_=p.hooks).renderOverlay)==null?void 0:x.call(_,w);return D?m.jsx($.Fragment,{children:D},`plugin-overlay-${p.name}-${k}`):null}).filter(Boolean),[w,r]);y.useEffect(()=>{const p=[];r.forEach(_=>{var x,D;const q=(D=(x=_.hooks).onMount)==null?void 0:D.call(x,w);q&&p.push(q)});const k=u.on("progress",_=>{d.executeHook("onProgress",w,_).catch(()=>{})});return()=>{r.forEach(_=>{var x,D;return(D=(x=_.hooks).onUnmount)==null?void 0:D.call(x,w)}),r.forEach(_=>d.unregister(_.name)),p.forEach(_=>typeof _=="function"&&_()),k&&k()}},[]);const j=y.useRef(l);y.useEffect(()=>{const p=j.current;p!==l&&(d.executeHook("onSrcChange",w,p,l).catch(()=>{}),j.current=l)},[l]);const M={...S,containerRefExternal:c,imageRefExternal:f,children:m.jsxs(m.Fragment,{children:[S.children,R,T]}),onBeforeLoad:async()=>await d.executeHook("onLoad",w),onLoadStart:()=>{v({isIdle:!1,isLoading:!0,isLoaded:!1,isError:!1}),d.executeHook("onBeforeLoad",w).catch(()=>{}),w.performanceData.loadStartTime=performance.now()},onLoadSuccess:p=>{v({isIdle:!1,isLoading:!1,isLoaded:!0,isError:!1}),w.performanceData.loadEndTime=performance.now();const k=w.performanceData;k.duration=(k.loadEndTime||0)-(k.loadStartTime||0),d.executeHook("onLoadSuccess",w,p).catch(()=>{})},onLoadError:p=>{v({isIdle:!1,isLoading:!1,isLoaded:!1,isError:!0}),d.executeHook("onLoadError",w,p).catch(()=>{})},onEnterViewport:()=>{L(!0),d.executeHook("onEnterViewport",w).catch(()=>{})},onLeaveViewport:()=>{L(!1),d.executeHook("onLeaveViewport",w).catch(()=>{})}};return m.jsx(t,{ref:i,...M})});return o.displayName="WithPlugins(LazyLoadImageCore)",o}const F=new Map,B=new Map,J=new Map;function Dt(t={}){const{enabled:e=!0,cacheKeyFn:n,blobThreshold:r=60*1024,progressThrottleMs:a=16,progressPercentThreshold:o=5}=t,s=u=>n?n(u.src):u.src,i=u=>{const c=s(u),f=B.get(c);if(f){try{f.abort()}catch{}B.delete(c)}},l=u=>{const c=s(u),f=J.get(c);if(f){try{URL.revokeObjectURL(f)}catch{}J.delete(c)}};async function d(u){const c=u.src,f=n?n(c):c;if(F.has(f))return F.get(f);const h=(async()=>{var g,v,b,L,E;const I=new AbortController,{signal:P}=I;B.set(f,I);const w=await fetch(c,{signal:P});if(!w.ok||!w.body)return B.delete(f),c;const S=w.headers.get("Content-Length")||w.headers.get("content-length"),R=Number(S||0);if(R>0&&R<r)return B.delete(f),c;const T=w.body.getReader(),j=[];let M=0;const p=!R||R<=0;let k=0,_=0;try{for(;;){const{done:q,value:Q}=await T.read();if(q)break;if(Q){j.push(Q),M+=Q.length;const ae=Date.now(),Y=R>0?Math.round(M/R*100):0;(k===0||ae-k>=a||Math.abs(Y-_)>=o)&&((g=u.bus)==null||g.emit("progress",{loaded:M,total:R,percent:Y,indeterminate:p}),k=ae,_=Y)}}}finally{B.delete(f)}const x=new Blob(j);let D=(v=u.sharedData)==null?void 0:v.get("fetch-loader:object-url");if(!D){D=URL.createObjectURL(x);try{(b=u.sharedData)==null||b.set("fetch-loader:object-url",D),(L=u.sharedData)==null||L.set("fetch-loader:blob",x)}catch{}J.set(f,D)}return(E=u.bus)==null||E.emit("progress",{loaded:M,total:R,percent:100,indeterminate:!1}),D})();F.set(f,h);try{const g=await h;return F.delete(f),g}catch(g){throw F.delete(f),g}}return{name:"fetch-loader",version:"1.0.0",config:t,hooks:{onLoad:async u=>{if(e)try{return await d(u)}catch{return}},onLeaveViewport:u=>{e&&i(u)},onSrcChange:(u,c,f)=>{e&&l(u)},onUnmount:u=>{e&&(i(u),l(u))}}}}function Mt(t={}){const{text:e="© 2024 Vane",position:n="bottom-right",opacity:r=.8,fontSize:a=12,color:o="#fff",offsetX:s=8,offsetY:i=8,zIndex:l=2,enabled:d=!0}=t;return{name:"watermark",version:"1.0.0",config:t,hooks:{render:u=>{if(!d)return null;const c=typeof e=="function"?e(u.src):e,f={position:"absolute",pointerEvents:"none",color:o,opacity:r,fontSize:a,fontWeight:500,textShadow:"0 1px 2px rgba(255,255,255,0.5)",zIndex:l},h={"top-left":{top:i,left:s},"top-right":{top:i,right:s},"bottom-left":{bottom:i,left:s},"bottom-right":{bottom:i,right:s},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return m.jsx("div",{style:{...f,...h[n]},children:c})}}}}function It(t={}){const{text:e="Badge",position:n="top-left",bgColor:r="rgba(0,0,0,0.6)",color:a="#fff",fontSize:o=12,padding:s="2px 6px",borderRadius:i=4,zIndex:l=3,showWhen:d="loaded",enabled:u=!0}=t;return{name:"badge",version:"1.0.0",config:t,hooks:{render:c=>{if(!u)return null;const{imageState:f}=c;if(!(d==="always"||d==="loading"&&f.isLoading||d==="loaded"&&f.isLoaded||d==="error"&&f.isError))return null;const h=typeof e=="function"?e(c):e,g={position:"absolute",pointerEvents:"none",background:r,color:a,fontSize:o,padding:s,borderRadius:i,zIndex:l,lineHeight:1.2,fontWeight:500},v={"top-left":{top:8,left:8},"top-right":{top:8,right:8},"bottom-left":{bottom:8,left:8},"bottom-right":{bottom:8,right:8},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return m.jsx("div",{style:{...g,...v[n]},children:h})}}}}function Oe({bus:t,loading:e,showWhen:n="loading",height:r=3,color:a="#3b82f6",background:o="rgba(0,0,0,0.15)",showPercentText:s=!0}){const[i,l]=y.useState(null),[d,u]=y.useState(0),c=$.useRef(null);y.useEffect(()=>{const g=t==null?void 0:t.on("progress",v=>{l(v),v.indeterminate?c.current||(c.current=window.setInterval(()=>{u(b=>b<90?b+3:b)},160)):(u(v.percent??0),c.current&&(clearInterval(c.current),c.current=null))});return()=>{g&&g(),c.current&&(clearInterval(c.current),c.current=null)}},[t]);const f=n==="always"?!0:e,h=i!=null&&i.indeterminate?d:(i==null?void 0:i.percent)??0;return f?m.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",background:o,display:"flex",alignItems:"flex-end",zIndex:10},children:[m.jsx("div",{style:{width:`${h}%`,height:r,background:a,transition:"width 200ms ease"}}),s&&m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",fontSize:12,color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)",textAlign:"center",pointerEvents:"none"},children:i!=null&&i.indeterminate?`加载中… ${h}%`:`${h}%`})]}):null}function $t(t={}){return{name:"progress-overlay",version:"1.0.0",config:t,hooks:{renderOverlay:({bus:e,imageState:n})=>m.jsx(Oe,{bus:e,loading:n.isLoading,showWhen:t.showWhen,height:t.height,color:t.color,background:t.background,showPercentText:t.showPercentText??!0}),onProgress:()=>{}}}}function Be({imageState:t,type:e="shimmer",backgroundColor:n="#e5e7eb",highlightColor:r="#f3f4f6",borderRadius:a=4,zIndex:o=2,showWhen:s="loading"}){if(!(s==="always"||t.isLoading))return null;const i={position:"absolute",inset:0,borderRadius:a,overflow:"hidden",pointerEvents:"none",zIndex:o},l={width:"100%",height:"100%",backgroundImage:`linear-gradient(90deg, ${n} 0%, ${n} 35%, ${r} 50%, ${n} 65%, ${n} 100%)`,backgroundSize:"200% 100%",animation:"lli-skeleton-shimmer 1200ms ease-in-out infinite"},d={width:"100%",height:"100%",background:n,animation:"lli-skeleton-pulse 1200ms ease-in-out infinite"};return m.jsxs("div",{style:i,children:[m.jsx("style",{children:`
@keyframes lli-skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
@keyframes lli-skeleton-pulse {
  0%, 100% { opacity: 0.85; }
  50% { opacity: 0.6; }
}
        `}),m.jsx("div",{style:e==="shimmer"?l:d})]})}function Pt(t={}){return{name:"skeleton",version:"1.0.0",config:t,hooks:{renderOverlay:e=>m.jsx(Be,{imageState:e.imageState,type:t.type,backgroundColor:t.backgroundColor,highlightColor:t.highlightColor,borderRadius:t.borderRadius,zIndex:t.zIndex,showWhen:t.showWhen})}}}function Ae({context:t,cfg:e}){const{position:n="bottom",background:r="rgba(0,0,0,0.45)",color:a="#fff",fontSize:o=12,padding:s="6px 8px",borderRadius:i=4,zIndex:l=4,showWhen:d="loading",trigger:u="always"}=e,{imageState:c}=t,f=d==="always"||d==="loading"&&c.isLoading||d==="loaded"&&c.isLoaded||d==="error"&&c.isError,[h,g]=$.useState(!1);if(!(u==="always"?f:f&&h))return m.jsx("div",{style:{position:"absolute",inset:0,zIndex:l,pointerEvents:u==="hover"?"auto":"none"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1)});const v=typeof e.content=="function"?e.content(t):e.content||"Loading...",b={position:"absolute",left:8,right:8,background:r,color:a,fontSize:o,padding:s,borderRadius:i,zIndex:l,pointerEvents:u==="hover"?"auto":"none",textAlign:"center"},L={top:{top:8},bottom:{bottom:8},center:{top:"50%",transform:"translateY(-50%)"}};return m.jsx("div",{style:{position:"absolute",inset:0,zIndex:l,pointerEvents:u==="hover"?"auto":"none"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:m.jsx("div",{style:{...b,...L[n]},children:v})})}function jt(t={}){return{name:"overlay-info",version:"1.0.0",config:t,hooks:{renderOverlay:e=>m.jsx(Ae,{context:e,cfg:t})}}}function X(t,e="anonymous"){if(typeof document>"u")return;const n=`lli-preconnect-${t}`;if(document.getElementById(n))return;const r=document.createElement("link");r.id=n,r.rel="preconnect",r.href=t,e&&(r.crossOrigin=e),document.head.appendChild(r)}function se(t){if(typeof document>"u")return;const e=`lli-preconnect-${t}`,n=document.getElementById(e);n&&n.remove()}function Z(t){try{const e=new URL(t,typeof window<"u"?window.location.origin:"http://localhost");return`${e.protocol}//${e.host}`}catch{return null}}function Ut(t={}){return{name:"preconnect",version:"1.0.0",config:t,hooks:{onMount:e=>{const n=Z(e.src);n&&X(n,t.crossOrigin??"anonymous"),t.domains&&Array.isArray(t.domains)&&t.domains.forEach(r=>X(r,t.crossOrigin??"anonymous"))},onUnmount:e=>{const n=Z(e.src);n&&se(n),t.domains&&Array.isArray(t.domains)&&t.domains.forEach(r=>se(r))},onSrcChange:(e,n,r)=>{const a=Z(r);a&&X(a,t.crossOrigin??"anonymous")}}}}function Ne(t,e="Image"){try{const n=new URL(t,typeof window<"u"?window.location.origin:"http://localhost").pathname.replace(/\/+$/,"");return`${e} • ${n}`}catch{return e}}function Ct(t={}){return{name:"alt-text",version:"1.0.0",config:t,hooks:{transformProps:e=>{const n=e.alt;if(typeof n=="string"&&n.trim().length>0)return e;const r=t.derive?t.derive(e.src):Ne(e.src,t.prefix??"Image");return{...e,alt:r}}}}}function zt(t={}){const{priority:e="medium"}=t;return{name:"priority-loading",version:"1.0.0",config:t,hooks:{transformProps:n=>{switch(e){case"high":return{...n,loading:"eager",rootMargin:"0px"};case"low":return{...n,loading:"lazy",rootMargin:n.rootMargin??"400px"};case"medium":default:return{...n,loading:"lazy",rootMargin:n.rootMargin??"200px"}}}}}}function Fe({context:t,cfg:e}){var n;const{imageState:r,imageRef:a,src:o}=t,s=!!((n=t.sharedData)!=null&&n.get("had-error")),i=r.isError||(e.persistAfterFallback??!0)&&s,l=y.useMemo(()=>(typeof e.message=="function"?e.message(t):e.message)??"加载失败",[e.message,t]);if(!i)return null;const d=()=>{const c=a==null?void 0:a.current;if(c)try{const f=`${o}${o.includes("?")?"&":"?"}retry=${Date.now()}`;c.src=f}catch{}},u={position:"absolute",inset:0,background:e.background??"rgba(220, 53, 69, 0.18)",color:e.color??"#b00020",zIndex:e.zIndex??10,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",gap:8,fontSize:13,fontWeight:500};return m.jsxs("div",{style:u,children:[m.jsx("span",{children:l}),e.showRetry!==!1&&m.jsxs("button",{onClick:d,style:{padding:"4px 8px",fontSize:12},children:[" ",e.retryText??"重试"," "]})]})}function Tt(t={}){return{name:"error-overlay",version:"1.0.0",config:t,hooks:{renderOverlay:e=>m.jsx(Fe,{context:e,cfg:t})}}}function Ot(t={}){const{text:e="Error",position:n="top-right",bgColor:r="rgba(220, 53, 69, 0.85)",color:a="#fff",fontSize:o=12,padding:s="2px 6px",borderRadius:i=4,zIndex:l=100,persistAfterFallback:d=!0}=t;return{name:"error-badge",version:"1.0.0",config:t,hooks:{onLoadError:u=>{var c;try{(c=u.sharedData)==null||c.set("had-error",!0)}catch{}return!0},renderOverlay:u=>{var c;const f=!!((c=u.sharedData)!=null&&c.get("had-error"));if(!(u.imageState.isError||d&&f))return null;const h=typeof e=="function"?e(u):e,g={position:"absolute",inset:0,pointerEvents:"none",zIndex:l},v={position:"absolute",background:r,color:a,fontSize:o,padding:s,borderRadius:i,lineHeight:1.2,fontWeight:600},b={"top-left":{top:8,left:8},"top-right":{top:8,right:8},"bottom-left":{bottom:8,left:8},"bottom-right":{bottom:8,right:8},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return m.jsx("div",{style:g,children:m.jsx("div",{style:{...v,...b[n]},children:h})})}}}}function Bt(t){const{fallbackSrc:e}=t;return{name:"fallback-image",version:"1.0.0",config:t,hooks:{onLoadError:(n,r)=>{var a,o;try{(a=n.sharedData)==null||a.set("had-error",!0)}catch{}const s=(o=n.imageRef)==null?void 0:o.current;if(!s)return!0;try{s.src=e}catch{}return!0}}}}function We(t,e,n){const r=(e.baseDelayMs??500)*Math.pow(2,Math.max(0,n-1)),a=e.jitter?Math.random()*.25*r:0,o=r+a;setTimeout(()=>{var s;const i=(s=t.imageRef)==null?void 0:s.current;if(i)try{const l=`${t.src}${t.src.includes("?")?"&":"?"}retry=${Date.now()}&n=${n}`;i.src=l}catch{}},o)}function At(t={}){const{maxRetries:e=2}=t;return{name:"retry-on-error",version:"1.0.0",config:t,hooks:{onLoadError:(n,r)=>{var a,o,s;try{(a=n.sharedData)==null||a.set("had-error",!0)}catch{}const i="retry-count",l=Number(((o=n.sharedData)==null?void 0:o.get(i))??0)+1;return l<=e&&((s=n.sharedData)==null||s.set(i,l),We(n,t,l)),!0}}}}function A(t,...e){}function Nt(t={}){const{enabled:e=!0,prefix:n="[LLI]"}=t;return{name:"event-logger",version:"1.0.0",config:t,hooks:{onBeforeLoad:r=>(e&&A(n,"before-load",r.src),!0),onLoadSuccess:(r,a)=>{e&&A(n,"load-success",{src:r.src,displaySrc:a})},onLoadError:(r,a)=>(e&&A(n,"load-error",{src:r.src,error:a}),!0),onEnterViewport:r=>{e&&A(n,"enter-viewport",r.src)},onLeaveViewport:r=>{e&&A(n,"leave-viewport",r.src)},onProgress:(r,a)=>{e&&A(n,"progress",a.percent)}}}}function Ve(t,e){const{lqipSrc:n}=e;if(n)return typeof n=="function"?n(t):n}function Ft(t={}){const{blur:e=12,opacity:n=1,zIndex:r=2}=t;return{name:"lqip",version:"1.0.0",config:t,hooks:{renderOverlay:a=>{const{imageState:o,src:s}=a,i=Ve(s,t);if(!i||o.isLoaded)return null;const l={position:"absolute",inset:0,backgroundImage:`url(${i})`,backgroundSize:"cover",backgroundPosition:"center",filter:`blur(${e}px)`,opacity:n,zIndex:r,pointerEvents:"none",transition:"opacity 300ms ease"};return m.jsx("div",{style:l})}}}}function Wt(t={}){const{startBlur:e=8,endBlur:n=0,durationMs:r=400}=t;return{name:"blur-up",version:"1.0.0",config:t,hooks:{transformProps:a=>{var o,s,i;const l=(((o=a.imageStyle)==null?void 0:o.filter)||"").replace(/blur\([^)]*\)/,"").trim(),d=l?`${l} blur(${e}px)`:`blur(${e}px)`,u=(s=a.imageStyle)==null?void 0:s.transition,c=`${u&&/opacity\s*\d*ms/.test(u)?u:"opacity 180ms ease"}, filter ${r}ms ease`,f=(i=a.imageStyle)==null?void 0:i.willChange,h=f?`${f}, filter`:"filter";return{...a,imageStyle:{...a.imageStyle||{},filter:d,transition:c,willChange:h}}},onBeforeLoad:a=>{var o;const s=(o=a.imageRef)==null?void 0:o.current;if(!s)return!0;try{const i=(s.style.filter||"").replace(/blur\([^)]*\)/,"").trim();s.__lliPrevFilterNoBlur=i;const l=i?`${i} blur(${e}px)`:`blur(${e}px)`;s.style.filter=l;const d=s.style.transition||"";s.style.transition=d?`${d}, filter ${r}ms ease`:`filter ${r}ms ease`}catch{}return!0},onLoadSuccess:a=>{var o;const s=(o=a.imageRef)==null?void 0:o.current;if(s)try{const i=s.__lliPrevFilterNoBlur??(s.style.filter||"").replace(/blur\([^)]*\)/,"").trim(),l=n>0?i?`${i} blur(${n}px)`:`blur(${n}px)`:i;s.style.filter=l}catch{}},onUnmount:a=>{var o;const s=(o=a.imageRef)==null?void 0:o.current;if(s)try{s.__lliPrevFilterNoBlur!==void 0&&(s.style.filter=s.__lliPrevFilterNoBlur||"",delete s.__lliPrevFilterNoBlur)}catch{}}}}}function Vt(t={}){const{durationMs:e=400,easing:n="ease"}=t;return{name:"fade-in",version:"1.0.0",config:t,hooks:{onMount:r=>{var a;const o=(a=r.imageRef)==null?void 0:a.current;if(o)try{o.style.opacity="0",o.style.transition=`opacity ${e}ms ${n}`}catch{}},onLoadSuccess:r=>{var a;const o=(a=r.imageRef)==null?void 0:a.current;if(o)try{o.style.opacity="1"}catch{}}}}}function qe(t,e){const{lqipSrc:n}=e;if(n)return typeof n=="function"?n(t):n}async function He(t){try{const e=new Image;e.crossOrigin="anonymous";const n=new Promise((c,f)=>{e.onload=()=>c(e),e.onerror=f});e.src=t;const r=await n,a=document.createElement("canvas");a.width=Math.max(1,Math.min(16,r.naturalWidth)),a.height=Math.max(1,Math.min(16,r.naturalHeight));const o=a.getContext("2d");if(!o)return;o.drawImage(r,0,0,a.width,a.height);const s=o.getImageData(0,0,a.width,a.height).data;let i=0,l=0,d=0,u=0;for(let c=0;c<s.length;c+=4)i+=s[c],l+=s[c+1],d+=s[c+2],u++;return i=Math.round(i/u),l=Math.round(l/u),d=Math.round(d/u),`rgb(${i}, ${l}, ${d})`}catch{return}}function qt(t={}){const e=t.color??"rgba(0,0,0,0.06)";return{name:"dominant-color",version:"1.0.0",config:t,hooks:{onMount:n=>{var r;const a=(r=n.containerRef)==null?void 0:r.current;if(a)try{const o=qe(n.src,t);if(o)He(o).then(s=>{try{a.style.background=s||e}catch{}}).catch(()=>{try{a.style.background=e}catch{}});else try{a.style.background=e}catch{}}catch{try{a.style.background=e}catch{}}}}}}function Ht(t={}){const{ratio:e=4/3}=t;return{name:"aspect-ratio-spacer",version:"1.0.0",config:t,hooks:{onMount:n=>{var r;const a=(r=n.containerRef)==null?void 0:r.current;if(a)try{a.style.aspectRatio=String(e)}catch{}}}}}const O=new Map,U=[];function be(){return Date.now()}function Ke(t){if(!(t<=0))for(;U.length>t;){const e=U.shift();e&&O.has(e)&&O.delete(e)}}function we(t){const e=U.indexOf(t);e>=0&&U.splice(e,1),U.push(t)}function ne(t,e){const n=O.get(t);if(n){if(e&&e>0&&be()-n.time>e){O.delete(t);const r=U.indexOf(t);r>=0&&U.splice(r,1);return}return we(t),n.value}}function xe(t,e,n){O.set(t,{value:e,time:be()}),we(t),Ke(n)}const re={get:ne,set:xe,has:(t,e)=>ne(t,e)!==void 0,clear:()=>{O.clear(),U.splice(0,U.length)},size:()=>O.size};function Kt(t={}){const{enabled:e=!0,maxEntries:n=200,ttlMs:r,debug:a=!1}=t,o=new Map;return{name:"cache-memory",version:"1.0.0",config:t,hooks:{onLoad:async s=>{var i;if(!e)return;const l=ne(s.src,r);if(l&&((i=s.bus)==null||i.emit("cache:hit",{level:"memory",src:s.src}),!l.startsWith("blob:")))return l},onLoadSuccess:(s,i)=>{e&&(i.startsWith("blob:")||xe(s.src,i,n))},onSrcChange:(s,i,l)=>{var d;if(!e)return;(d=s.bus)==null||d.emit("cache:src-change",{oldSrc:i,newSrc:l});const u=o.get(i);if(u){try{URL.revokeObjectURL(u)}catch{}o.delete(i)}},onUnmount:s=>{const i=o.get(s.src);if(i){try{URL.revokeObjectURL(i)}catch{}o.delete(s.src)}}}}}let ee=null;function ke(t,e){return ee||(ee=new Promise((n,r)=>{const a=indexedDB.open(t,1);a.onupgradeneeded=()=>{const o=a.result;o.objectStoreNames.contains(e)||o.createObjectStore(e)},a.onsuccess=()=>n(a.result),a.onerror=()=>r(a.error)})),ee}async function Le(t,e){try{const n=await ke(e.dbName,e.storeName),r=n.transaction(e.storeName,"readonly").objectStore(e.storeName),a=await new Promise((o,s)=>{const i=r.get(t);i.onsuccess=()=>o(i.result),i.onerror=()=>s(i.error)});if(!a)return;if(e.ttlMs>0&&Date.now()-a.time>e.ttlMs){try{n.transaction(e.storeName,"readwrite").objectStore(e.storeName).delete(t)}catch{}return}return a}catch{e.debug;return}}async function C(t,e,n){try{const r=(await ke(n.dbName,n.storeName)).transaction(n.storeName,"readwrite").objectStore(n.storeName),a=typeof e=="string"?{value:e,time:Date.now()}:{blob:e,time:Date.now(),mime:e.type};await new Promise((o,s)=>{const i=r.put(a,t);i.onsuccess=()=>o(),i.onerror=()=>s(i.error)})}catch{n.debug}}const Ge={get:Le,set:C};function Qe(t){try{const e=t.split(","),n=e[0].match(/:(.*?);/),r=n?n[1]:"application/octet-stream",a=atob(e[1]);let o=a.length;const s=new Uint8Array(o);for(;o--;)s[o]=a.charCodeAt(o);return new Blob([s],{type:r})}catch{return null}}function Gt(t={}){const{enabled:e=!0,dbName:n="LLI-Cache",storeName:r="images",ttlMs:a=7*24*60*60*1e3,debug:o=!1}=t,s=new Map;return{name:"cache-idb",version:"1.0.0",config:t,hooks:{onLoad:async i=>{var l,d,u,c;if(!e)return;const f=await Le(i.src,{dbName:n,storeName:r,ttlMs:a,debug:o});if(f){if((l=i.bus)==null||l.emit("cache:hit",{level:"idb",src:i.src}),f.blob){let h=(d=i.sharedData)==null?void 0:d.get("fetch-loader:object-url");if(!h){h=URL.createObjectURL(f.blob),s.set(i.src,h);try{(u=i.sharedData)==null||u.set("fetch-loader:object-url",h),(c=i.sharedData)==null||c.set("fetch-loader:blob",f.blob)}catch{}}return h}return f.value}},onLoadSuccess:async(i,l)=>{var d;if(e)try{if(l.startsWith("blob:")){const u=(d=i.sharedData)==null?void 0:d.get("fetch-loader:blob");if(u)await C(i.src,u,{dbName:n,storeName:r,debug:o});else{const c=await(await fetch(l)).blob();await C(i.src,c,{dbName:n,storeName:r,debug:o})}}else if(l.startsWith("data:")){const u=Qe(l);u?await C(i.src,u,{dbName:n,storeName:r,debug:o}):await C(i.src,l,{dbName:n,storeName:r,debug:o})}else try{const u=await fetch(l,{cache:"force-cache"});if(u.ok){const c=await u.blob();await C(i.src,c,{dbName:n,storeName:r,debug:o})}else await C(i.src,l,{dbName:n,storeName:r,debug:o})}catch{await C(i.src,l,{dbName:n,storeName:r,debug:o})}}catch{}},onSrcChange:(i,l)=>{const d=s.get(l);if(d){try{URL.revokeObjectURL(d)}catch{}s.delete(l)}},onUnmount:i=>{const l=s.get(i.src);if(l){try{URL.revokeObjectURL(l)}catch{}s.delete(i.src)}}}}}const oe=new Map;async function le(t,e,n){try{const r=await fetch(t,{cache:"force-cache"});if(!r.ok)return;const a=await r.blob();if(e){const o=URL.createObjectURL(a);re.set(t,o,200),oe.set(t,o)}await Ge.set(t,a,{dbName:"LLI-Cache",storeName:"images",debug:n});try{}catch{}}catch{}}function Qt(t={}){const{enabled:e=!0,trigger:n="enter",preferMemory:r=!0,debug:a=!1}=t;return{name:"cache-prewarm",version:"1.0.0",config:t,hooks:{onMount:o=>{!e||n!=="mount"||re.get(o.src)||le(o.src,r,a)},onEnterViewport:o=>{!e||n!=="enter"||re.get(o.src)||le(o.src,r,a)},onUnmount:o=>{const s=oe.get(o.src);if(s){try{URL.revokeObjectURL(s)}catch{}oe.delete(o.src)}}}}}const H=(()=>{const t=new Map;function e(a){let o=t.get(a);return o||(o={current:0,queue:[]},t.set(a,o)),o}async function n(a,o,s,i){const l=e(a);if(l.current<o){l.current+=1;return}await new Promise((d,u)=>{const c={resolve:()=>{c.timer&&clearTimeout(c.timer),l.current+=1,d()},reject:u};i&&i>0&&(c.timer=setTimeout(()=>{const f=l.queue.indexOf(c);f>=0&&l.queue.splice(f,1),u==null||u(new Error(`acquire timeout for ${a}`))},i)),l.queue.push(c)})}function r(a,o,s){const i=e(a);i.current>0&&(i.current-=1);const l=i.queue.shift();l&&l.resolve()}return{acquire:n,release:r}})();function te(t,e){if(e==="global")return"__global__";try{return`host:${new URL(t,typeof window<"u"?window.location.origin:"http://localhost").hostname}`}catch{return"__global__"}}function Yt(t={}){const{maxConcurrent:e=4,scope:n="global",adaptive:r=!0,acquireTimeoutMs:a=8e3,debug:o=!1}=t;function s(i,l){var d,u;if(!r)return i;const c=(d=l.networkInfo)==null?void 0:d.effectiveType;if((u=l.networkInfo)!=null&&u.saveData)return 1;switch(c){case"slow-2g":case"2g":return 1;case"3g":return Math.max(1,Math.floor(i/2));case"4g":default:return i}}return{name:"concurrency-control",version:"1.0.0",config:t,hooks:{onLoad:async i=>{var l;const d=te(i.src,n),u=s(e,i);try{await H.acquire(d,u,o,a)}catch{return}try{(l=i.sharedData)==null||l.set("cc:key",d)}catch{}},onLoadSuccess:i=>{var l;const d=((l=i.sharedData)==null?void 0:l.get("cc:key"))||te(i.src,n),u=s(e,i);H.release(d,u,o)},onLoadError:i=>{var l;const d=((l=i.sharedData)==null?void 0:l.get("cc:key"))||te(i.src,n),u=s(e,i);return H.release(d,u,o),!0},onUnmount:i=>{var l,d;const u=(l=i.sharedData)==null?void 0:l.get("cc:key");if(typeof u=="string"){const c=s(e,i);H.release(u,c,o);try{(d=i.sharedData)==null||d.delete("cc:key")}catch{}}}}}}const ce=(()=>{const t=new Map;function e(r,a){const o=t.get(r);if(o&&o.initialized)return o.idleMs=a>0?a:o.idleMs,o;const s={isIdle:!0,timer:null,idleWaiters:new Set,idleMs:a>0?a:120,initialized:!1,cleanup:void 0},i=()=>{s.isIdle=!1,s.timer&&clearTimeout(s.timer),s.timer=setTimeout(()=>{s.isIdle=!0,s.idleWaiters.forEach(l=>{try{l()}catch{}}),s.idleWaiters.clear()},s.idleMs)};if(r==="window")window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("wheel",i,{passive:!0}),window.addEventListener("touchmove",i,{passive:!0}),s.cleanup=()=>{window.removeEventListener("scroll",i),window.removeEventListener("wheel",i),window.removeEventListener("touchmove",i)};else{try{r.addEventListener("scroll",i,{passive:!0}),r.addEventListener("wheel",i,{passive:!0}),r.addEventListener("touchmove",i,{passive:!0})}catch{}s.cleanup=()=>{try{r.removeEventListener("scroll",i),r.removeEventListener("wheel",i),r.removeEventListener("touchmove",i)}catch{}}}return s.initialized=!0,t.set(r,s),s}async function n(r,a,o){const s=e(r,a);s.isIdle||await new Promise(i=>{let l=null;const d=()=>{l&&clearTimeout(l),i()};s.idleWaiters.add(d),typeof o=="number"&&o>0&&(l=setTimeout(()=>{s.idleWaiters.delete(d),i()},o))})}return{ensure:e,waitForIdle:n}})();function Jt(t={}){const{idleMs:e=120,onlyWhenIntersecting:n=!0,maxWaitMs:r=1200,target:a="window",axis:o="vertical",debug:s=!1}=t;return{name:"scroll-idle",version:"1.0.0",config:t,hooks:{onMount:i=>{var l;const d=((l=i.containerRef)==null?void 0:l.current)||null,u=a==="container"&&d?d:"window";ce.ensure(u,e)},onLoad:async i=>{var l;if(i.props.loading!=="eager"&&(!n||i.isIntersecting)){const d=((l=i.containerRef)==null?void 0:l.current)||null,u=a==="container"&&d?d:"window";try{await ce.waitForIdle(u,e,r)}catch{}}}}}}function Xt(t={}){const{dwellMs:e=180,maxWaitMs:n=1e3,onlyWhenIntersecting:r=!0,debug:a=!1}=t,o="viewport-dwell:enteredAt",s="viewport-dwell:left",i=(c,f)=>{var h,g;try{(h=c.sharedData)==null||h.set(o,f)}catch{}try{(g=c.sharedData)==null||g.set(s,!1)}catch{}},l=(c,f)=>{var h;try{(h=c.sharedData)==null||h.set(s,f)}catch{}},d=c=>{var f;return(f=c.sharedData)==null?void 0:f.get(o)},u=c=>{var f;return!!((f=c.sharedData)!=null&&f.get(s))};return{name:"viewport-dwell",version:"1.0.0",config:t,hooks:{onBeforeLoad:async c=>{if(r&&!c.isIntersecting)return!0;const f=Date.now();let h=d(c);h||(h=f,i(c,h));const g=Date.now()-h,v=Math.max(0,e-g),b=Math.max(0,n);if(v<=0)return!0;const L=w=>new Promise(S=>setTimeout(S,w)),E=Math.min(v,b);try{await L(E)}catch{}const I=u(c),P=Date.now()-f;return!(I&&P<n)},onEnterViewport:c=>{i(c,Date.now())},onLeaveViewport:c=>{l(c,!0)},onLoad:c=>{},onUnmount:c=>{var f,h;try{(f=c.sharedData)==null||f.delete(o),(h=c.sharedData)==null||h.delete(s)}catch{}}}}}const Zt=t=>{const e=(t==null?void 0:t.buttonText)??"Open",n=(t==null?void 0:t.enableLightbox)??!0,r=(t==null?void 0:t.overlayZIndex)??10;return{name:"gallery",hooks:{renderOverlay(a){const o=()=>{const[s,i]=$.useState(!1),[l,d]=$.useState(!1),u=()=>{if(n)i(!0);else{const c=a.src??"";c&&window.open(c,"_blank")}};return $.useEffect(()=>{const c=f=>{f.key==="Escape"&&i(!1)};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]),m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{position:"absolute",inset:0,zIndex:r,pointerEvents:"auto",background:l?"rgba(0,0,0,0.08)":"transparent",transition:"background 160ms ease"},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:c=>{c.stopPropagation(),u()}}),m.jsx("button",{type:"button",style:{position:"absolute",top:8,right:8,zIndex:r+1,padding:"8px 12px",borderRadius:8,border:"none",background:"rgba(0,0,0,0.65)",color:"#fff",fontSize:13,boxShadow:"0 2px 6px rgba(0,0,0,0.25)",cursor:"pointer"},onClick:c=>{c.stopPropagation(),u()},children:e}),n&&s?m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,cursor:"zoom-out"},onClick:()=>i(!1),children:m.jsx("img",{src:a.src??"",style:{maxWidth:"90%",maxHeight:"90%"}})}):null]})};return m.jsx(o,{})}}}};function Ye(t){const e=(t==null?void 0:t.filter)??"none",n=(t==null?void 0:t.amount)??1;switch(e){case"none":return"none";case"grayscale":return`grayscale(${Math.max(0,Math.min(1,n))})`;case"sepia":return`sepia(${Math.max(0,Math.min(1,n))})`;case"brightness":return`brightness(${n})`;case"contrast":return`contrast(${n})`;case"saturate":return`saturate(${n})`;default:return"none"}}const en=t=>{const e=Ye(t),n=!!(t!=null&&t.hover);return{name:"filter",hooks:{onLoadSuccess(r){var a;const o=(a=r.imageRef)==null?void 0:a.current;if(o&&(o.style.filter=e,n&&e!=="none")){const s=()=>{o.style.filter="none"},i=()=>{o.style.filter=e};o.__lliFilterEnter=s,o.__lliFilterLeave=i,o.addEventListener("mouseenter",s),o.addEventListener("mouseleave",i)}},onUnmount(r){var a;const o=(a=r.imageRef)==null?void 0:a.current;if(!o)return;const s=o.__lliFilterEnter,i=o.__lliFilterLeave;s&&o.removeEventListener("mouseenter",s),i&&o.removeEventListener("mouseleave",i),o.style.filter=""}}}},tn={grayscaleSoft:{filter:"grayscale",amount:.6,hover:!0},sepiaWarm:{filter:"sepia",amount:.5},brightBoost:{filter:"brightness",amount:1.2},contrastPunch:{filter:"contrast",amount:1.3},saturateVivid:{filter:"saturate",amount:1.4}},nn=t=>{const e=Math.max(1,(t==null?void 0:t.scale)??1.08),n=Math.max(0,(t==null?void 0:t.durationMs)??180);return{name:"hover-zoom",hooks:{onLoadSuccess(r){var a;const o=(a=r.imageRef)==null?void 0:a.current;if(!o)return;o.style.transition=`transform ${n}ms ease`;const s=()=>{o.style.transform=`scale(${e})`},i=()=>{o.style.transform="scale(1)"};o.__lliHoverEnter=s,o.__lliHoverLeave=i,o.addEventListener("mouseenter",s),o.addEventListener("mouseleave",i)},onUnmount(r){var a;const o=(a=r.imageRef)==null?void 0:a.current;if(!o)return;const s=o.__lliHoverEnter,i=o.__lliHoverLeave;s&&o.removeEventListener("mouseenter",s),i&&o.removeEventListener("mouseleave",i),o.style.transition="",o.style.transform=""}}}},rn=t=>{const e=(t==null?void 0:t.position)??"bottom",n=(t==null?void 0:t.bg)??"rgba(0,0,0,0.55)",r=(t==null?void 0:t.color)??"#fff";return{name:"caption",hooks:{renderOverlay(a){const o=a.src,s=typeof(t==null?void 0:t.text)=="function"?t==null?void 0:t.text(o):(t==null?void 0:t.text)??"";if(!s)return null;const i={position:"absolute",left:0,right:0,[e]:0,padding:"6px 10px",background:n,color:r,fontSize:12,zIndex:2,pointerEvents:"none"};return m.jsx("div",{style:i,children:s})}}}},on=t=>{const e=(t==null?void 0:t.color)??"rgba(0, 153, 255, 0.6)",n=Math.max(0,(t==null?void 0:t.blurPx)??12),r=Math.max(0,(t==null?void 0:t.spreadPx)??2),a=Math.max(1,(t==null?void 0:t.hoverMultiplier)??1.4),o=`0 0 ${n}px ${r}px ${e}`,s=`0 0 ${Math.round(n*a)}px ${Math.round(r*a)}px ${e}`;return{name:"border-glow",hooks:{onLoadSuccess(i){var l,d;const u=(l=i.containerRef)==null?void 0:l.current,c=(u==null?void 0:u.parentElement)??null,f=(c==null?void 0:c.parentElement)??null,h=(d=i.imageRef)==null?void 0:d.current,g=f||c||u||h;if(!g)return;g.__lliPrevShadow=g.style.boxShadow||"",g.style.boxShadow=g.__lliPrevShadow?`${g.__lliPrevShadow}, ${o}`:o,g.style.transition=g.style.transition?`${g.style.transition}, box-shadow 160ms ease`:"box-shadow 160ms ease",h&&(h.style.borderRadius=h.style.borderRadius||"6px");const v=()=>{g.style.boxShadow=g.__lliPrevShadow?`${g.__lliPrevShadow}, ${s}`:s},b=()=>{g.style.boxShadow=g.__lliPrevShadow?`${g.__lliPrevShadow}, ${o}`:o};g.__lliGlowEnter=v,g.__lliGlowLeave=b,g.addEventListener("mouseenter",v),g.addEventListener("mouseleave",b)},onUnmount(i){var l,d;const u=(l=i.containerRef)==null?void 0:l.current,c=(u==null?void 0:u.parentElement)??null,f=(c==null?void 0:c.parentElement)??null,h=(d=i.imageRef)==null?void 0:d.current,g=f||c||u||h;if(!g)return;const v=g.__lliGlowEnter,b=g.__lliGlowLeave;v&&g.removeEventListener("mouseenter",v),b&&g.removeEventListener("mouseleave",b),g.style.boxShadow=g.__lliPrevShadow||"",delete g.__lliPrevShadow,delete g.__lliGlowEnter,delete g.__lliGlowLeave}}}};function Je({context:t,config:e}){const{imageState:n}=t,{background:r="transparent",opacity:a=1,zIndex:o=3,showWhen:s="loading",fadeOutOnLoaded:i=!0}=e;if(!(()=>{switch(s){case"always":return!0;case"idle":return n.isIdle;case"loading":return n.isLoading;case"loaded":return n.isLoaded;case"error":return n.isError;default:return n.isLoading}})())return null;const l=typeof e.svgContent=="function"?e.svgContent(t):e.svgContent,d={position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:r,zIndex:o,pointerEvents:"none",opacity:i&&n.isLoaded?0:a,transition:i?"opacity 240ms ease":void 0};return m.jsx("div",{style:d,"aria-hidden":!0,children:l?m.jsx("div",{style:{width:"60%",height:"60%"},dangerouslySetInnerHTML:{__html:l}}):null})}function an(t={}){return{name:"svg-placeholder",version:"1.0.0",config:t,hooks:{renderOverlay:e=>m.jsx(Je,{context:e,config:t})}}}let K=null;function Xe(){if(K)return K;const t="data:image/webp;base64,UklGRiIAAABXRUJQVlA4ICAAAADwAQCdASoBAAEALm0AAA/vv///8AA";return K=new Promise(e=>{try{const n=new Image;n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=t}catch{e(!1)}}),K}function Ze(t,e){if(!e||e.length===0)return!0;try{const n=new URL(t);return e.some(r=>n.hostname.includes(r))}catch{return!1}}function et(t,e){if(!e)return t;try{const n=new URL(t),[r,a]=e.split("=");return r&&n.searchParams.set(r,a??""),n.toString()}catch{return t.includes("?")?`${t}&${e}`:`${t}?${e}`}}function tt(t,e){const n=t.lastIndexOf(".");if(n<0)return t;const r=t.substring(n+1).toLowerCase();return e.includes(r)?`${t.substring(0,n)}.webp`:t}function sn(t={}){const{enabled:e=!0,rewrite:n,replaceExtensions:r=["jpg","jpeg","png"],appendQueryParam:a,onDomains:o,testSupport:s=!0}=t;return{name:"webp",version:"1.0.0",config:t,hooks:{onLoad:async i=>{var l,d;if(!e)return;const u=i.src;if(!Ze(u,o)||s&&!await Xe())return;let c;if(n)c=n(u,i);else{const f=tt(u,r);c=et(f,a)}if(!(!c||c===u)){try{(l=i.sharedData)==null||l.set("webp:original",u),(d=i.sharedData)==null||d.set("webp:rewritten",c)}catch{}return c}},onLoadError:i=>{var l,d,u;const c=(l=i.sharedData)==null?void 0:l.get("webp:original"),f=(d=i.sharedData)==null?void 0:d.get("webp:rewritten"),h=(u=i.imageRef)==null?void 0:u.current;if(h&&c&&f&&h.src===f){try{h.src=c}catch{}return!0}return!1}}}}function nt(t,e){try{const n=new URL(t);return n.searchParams.set("w",String(e)),n.toString()}catch{return t.includes("?")?`${t}&w=${e}`:`${t}?w=${e}`}}function ln(t={}){const{enabled:e=!0,variants:n=[{width:400},{width:800},{width:1200}],buildSrc:r=nt,sizes:a="(max-width: 800px) 100vw, 800px"}=t;return{name:"responsive",version:"1.0.0",config:t,hooks:{onLoadSuccess:o=>{var s;if(!e)return;const i=(s=o.imageRef)==null?void 0:s.current;if(!i)return;const l=o.src,d=n.map(u=>`${u.src??r(l,u.width)} ${u.width}w`);try{i.setAttribute("srcset",d.join(", ")),i.setAttribute("sizes",a)}catch{}},onSrcChange:(o,s,i)=>!0}}}function rt(t){try{const e=document.createElement("link");return e.rel="preload",e.as="image",e.href=t,document.head.appendChild(e),()=>{try{document.head.removeChild(e)}catch{}}}catch{return()=>{}}}function cn(t={}){const{enabled:e=!0,altFallback:n,title:r,aspectRatio:a,priority:o="auto",preload:s=!1}=t;return{name:"seo",version:"1.0.0",config:t,hooks:{transformProps:i=>{if(!e)return i;const l={...i};return(!l.alt||l.alt==="")&&n&&(l.alt=n),o==="lcp"&&(l.loading="eager",l.rootMargin="0px"),a&&(l.containerStyle={...l.containerStyle||{},aspectRatio:a}),l},onMount:i=>{var l,d,u;if(!e)return;let c;if(s&&(c=rt(i.src)),r)try{(d=(l=i.imageRef)==null?void 0:l.current)==null||d.setAttribute("title",r)}catch{}if(n&&(u=i.imageRef)!=null&&u.current){const f=i.imageRef.current;if(f.getAttribute("alt")===null||f.getAttribute("alt")==="")try{f.setAttribute("alt",n)}catch{}}return c}}}}function ot(t,e){const{ariaLabel:n}=t;if(n)return typeof n=="function"?n(e):n}const at=({ctx:t,config:e})=>{var n,r,a;const{imageState:o}=t,s=o.isError?((n=e.statusText)==null?void 0:n.error)??"图片加载失败":o.isLoaded?((r=e.statusText)==null?void 0:r.loaded)??"图片加载完成":o.isLoading?((a=e.statusText)==null?void 0:a.loading)??"图片加载中":"图片未加载";return y.useEffect(()=>{var i;const l=(i=t.imageRef)==null?void 0:i.current;if(!(!l||!e.enabled))try{l.setAttribute("aria-busy",o.isLoading?"true":"false")}catch{}},[t.imageRef,e.enabled,o.isLoading]),m.jsx("span",{role:"status","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0},children:s})};function un(t={}){const{enabled:e=!0,decorative:n=!1}=t;return{name:"a11y",version:"1.0.0",config:t,hooks:{onMount:r=>{var a;if(!e)return;const o=(a=r.imageRef)==null?void 0:a.current;if(o)try{n&&(o.setAttribute("aria-hidden","true"),o.setAttribute("alt",""));const s=ot(t,r);s&&o.setAttribute("aria-label",s),o.setAttribute("role","img")}catch{}},renderOverlay:r=>e?m.jsx(at,{ctx:r,config:t}):null}}}function it({context:t,cfg:e}){const n=t.performanceData||{duration:void 0};if(!e.showOverlay||!t.imageState.isLoaded)return null;const r=e.overlayPosition??"top-right",a={position:"absolute",zIndex:9,background:e.background??"rgba(0,0,0,0.45)",color:e.color??"#fff",fontSize:12,padding:"2px 6px",borderRadius:4};return r.includes("top")&&(a.top=6),r.includes("bottom")&&(a.bottom=6),r.includes("left")&&(a.left=6),r.includes("right")&&(a.right=6),m.jsxs("div",{style:a,children:["Loaded in ",Math.round(n.duration||0)," ms"]})}function dn(t={}){return{name:"performance-monitor",version:"1.0.0",config:t,hooks:{onLoadSuccess:e=>{const n=e.performanceData||{duration:0},r={src:e.src,durationMs:Math.round(n.duration||0),network:e.networkInfo,device:e.deviceInfo};try{t.onReport&&t.onReport(r)}catch{}},renderOverlay:e=>m.jsx(it,{context:e,cfg:t})}}}function st(t,e){try{t.report&&t.report(e),t.reportEndpoint&&fetch(t.reportEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).catch(()=>{})}catch{}}function fn(t={}){return{name:"error-tracking",version:"1.0.0",config:t,hooks:{onLoadError:(e,n)=>{var r,a,o;const s="error-count",i=Number(((r=e.sharedData)==null?void 0:r.get(s))??0)+1;(a=e.sharedData)==null||a.set(s,i);const l={src:e.src,message:String((n==null?void 0:n.message)||"unknown"),stack:n==null?void 0:n.stack,time:Date.now(),network:e.networkInfo,device:e.deviceInfo,count:i};st(t,l);try{(o=e.sharedData)==null||o.set("had-error",!0)}catch{}return!0},renderOverlay:e=>{var n;if(!t.showBadge)return null;const r=Number(((n=e.sharedData)==null?void 0:n.get("error-count"))??0);if(r<=0)return null;const a={position:"absolute",top:6,right:6,zIndex:10,fontSize:12,color:t.badgeColor??"#fff",background:t.badgeBg??"rgba(220,53,69,0.8)",padding:"2px 6px",borderRadius:4};return m.jsxs("div",{style:a,children:[t.badgeText??"Error"," × ",r]})}}}}function lt(t,e,n){try{t.searchParams.get(e)||t.searchParams.set(e,n)}catch{}}function hn(t={}){return{name:"auth",version:"1.0.0",config:t,hooks:{transformProps:e=>{let n={...e};try{const r=typeof t.token=="function"?t.token():t.token;if(r){const a=new URL(n.src,typeof window<"u"?window.location.origin:"http://localhost");lt(a,t.tokenParam??"token",r),n.src=a.toString()}t.crossOrigin&&(n.crossOrigin=t.crossOrigin),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy)}catch{}return n}}}}function ue(t,e){try{const n=Math.max(1,Math.min(100,Math.round(e)));t.searchParams.set("q",String(n))}catch{}}function ct(){const t=typeof navigator<"u"?navigator:void 0,e=(t==null?void 0:t.connection)||(t==null?void 0:t.mozConnection)||(t==null?void 0:t.webkitConnection);if(e)return{effectiveType:e.effectiveType||"4g",downlink:Number(e.downlink??10),rtt:Number(e.rtt??50),saveData:!!(e.saveData??!1)}}function ut(){const t=typeof navigator<"u"?navigator:void 0;return(t==null?void 0:t.connection)||(t==null?void 0:t.mozConnection)||(t==null?void 0:t.webkitConnection)}function de(t){const e=ct();if(t.overrideSaveData??(e==null?void 0:e.saveData))return t.saveDataQuality??35;const n=t.overrideEffectiveType??(e==null?void 0:e.effectiveType)??"4g";return n==="slow-2g"||n==="2g"?t.lowQ??40:n==="3g"?t.lowQ??55:t.highQ??80}function gn(t={}){return{name:"adaptive-quality",version:"1.0.0",config:t,hooks:{transformProps:e=>{const n={...e};try{const r=new URL(n.src,typeof window<"u"?window.location.origin:"http://localhost"),a=de(t);ue(r,a),n.src=r.toString()}catch{}return n},onMount:e=>{var n,r,a,o;const{mode:s="once"}=t;if(s!=="realtime")return;const i=ut();if(!i)return;const l=d=>{var u;try{const c=(u=e.imageRef)==null?void 0:u.current,f=(c==null?void 0:c.src)||e.src,h=new URL(f,typeof window<"u"?window.location.origin:"http://localhost"),g=de(t);ue(h,g),c?c.src=h.toString():e.src=h.toString()}catch{}};try{if(typeof i.addEventListener=="function")i.addEventListener("change",l),(n=e.sharedData)==null||n.set("aqp-handler",l),(r=e.sharedData)==null||r.set("aqp-conn",i);else if("onchange"in i){const d=i.onchange;i.onchange=u=>{try{typeof d=="function"&&d.call(i,u)}catch{}l(u)},(a=e.sharedData)==null||a.set("aqp-conn",i),(o=e.sharedData)==null||o.set("aqp-onchange-patched",!0)}}catch{}return()=>{var d,u,c;try{const f=(d=e.sharedData)==null?void 0:d.get("aqp-conn"),h=(u=e.sharedData)==null?void 0:u.get("aqp-handler");if(f&&h&&typeof f.removeEventListener=="function")f.removeEventListener("change",h);else if(f&&(c=e.sharedData)!=null&&c.get("aqp-onchange-patched"))try{f.onchange=null}catch{}}catch{}}}}}}function fe(t,e){try{const n=new URL(t,typeof window<"u"?window.location.origin:"http://localhost"),r=new URL(e);return n.protocol=r.protocol,n.hostname=r.hostname,n.port=r.port,n.toString()}catch{return t}}function mn(t){const e=t.cdnBases||[];return{name:"cdn-fallback",version:"1.0.0",config:t,hooks:{transformProps:n=>{var r;if(!e.length)return n;const a={...n};try{const o=Number(((r=a._sharedData)==null?void 0:r.get("cdn-index"))??0)}catch{}return a},onLoadError:n=>{var r,a,o;if(!e.length)return!0;const s="cdn-index",i=(Number(((r=n.sharedData)==null?void 0:r.get(s))??0)+1)%e.length;(a=n.sharedData)==null||a.set(s,i);const l=(o=n.imageRef)==null?void 0:o.current;if(l){const d=fe(n.src,e[i]);try{l.src=`${d}${d.includes("?")?"&":"?"}cdnFallback=${Date.now()}`}catch{}}return!0},onLoad:n=>{var r;if(!e.length)return;const a=Number(((r=n.sharedData)==null?void 0:r.get("cdn-index"))??0);return fe(n.src,e[a])}}}}function dt({context:t,cfg:e}){if(!e.showDot||e.hideWhenOut&&!t.isIntersecting)return null;const n=e.dotPosition??"bottom-right",r={position:"absolute",width:10,height:10,borderRadius:999,background:t.isIntersecting?"#28a745":"#6c757d",zIndex:10};return n.includes("top")?r.top=6:r.bottom=6,n.includes("left")?r.left=6:r.right=6,m.jsx("div",{style:r,title:t.isIntersecting?"in-view":"out-of-view"})}function vn(t={}){return{name:"viewport-aware",version:"1.0.0",config:t,hooks:{renderOverlay:e=>m.jsx(dt,{context:e,cfg:t}),onEnterViewport:e=>{var n,r;try{(r=(n=e.imageRef)==null?void 0:n.current)==null||r.setAttribute("data-in-view","1")}catch{}},onLeaveViewport:e=>{var n,r;try{(r=(n=e.imageRef)==null?void 0:n.current)==null||r.setAttribute("data-in-view","0")}catch{}}}}}function ft(t,e){var n;const r=(n=t.imageRef)==null?void 0:n.current;if(r)try{r.style.opacity=String(e.fromOpacity??0),r.style.transform=`scale(${e.fromScale??.98})`,r.style.transition=`opacity ${e.durationMs??300}ms ${e.easing??"ease"}, transform ${e.durationMs??300}ms ${e.easing??"ease"}`}catch{}}function ht(t,e){var n;const r=(n=t.imageRef)==null?void 0:n.current;if(r)try{r.style.opacity=String(e.toOpacity??1),r.style.transform=`scale(${e.toScale??1})`}catch{}}function pn(t={}){return{name:"transition",version:"1.0.0",config:t,hooks:{onMount:e=>{ft(e,t)},onLoadSuccess:e=>{ht(e,t)}}}}function gt(t,e,n){try{const r=new URL(t,typeof window<"u"?window.location.origin:"http://localhost");return r.searchParams.set(e,n),r.toString()}catch{const r=t.includes("?")?"&":"?";return`${t}${r}${encodeURIComponent(e)}=${encodeURIComponent(n)}`}}function yn(t={}){const{respectSaveData:e=!0,fallbackQuality:n=.6,disablePreload:r=!0,qualityParam:a="quality"}=t;return{name:"data-saver",version:"1.0.0",config:t,hooks:{transformProps:o=>{var s;try{const i=((s=navigator==null?void 0:navigator.connection)==null?void 0:s.saveData)===!0;if(!e||!i)return o;const l=Math.max(0,Math.min(1,n)),d=gt(o.src,a,String(l)),u={...o,src:d};return r&&(u.loading="lazy"),u}catch{return o}}}}}function mt(t,e){try{const n=new URL(t,typeof window<"u"?window.location.origin:"http://localhost");return Object.entries(e).forEach(([r,a])=>{a!=null&&n.searchParams.set(r,String(a))}),n.toString()}catch{const n=Object.keys(e).filter(o=>e[o]!==void 0&&e[o]!==null);if(n.length===0)return t;const r=t.includes("?")?"&":"?",a=n.map(o=>`${encodeURIComponent(o)}=${encodeURIComponent(String(e[o]))}`).join("&");return`${t}${r}${a}`}}function bn(t={}){const{enabled:e=!0,maxWidth:n=1920,quality:r=.85,format:a="auto",widthParam:o="w",qualityParam:s="q",formatParam:i="format"}=t;return{name:"image-optimization",version:"1.0.0",config:t,hooks:{transformProps:l=>{if(!e)return l;try{const d=typeof window<"u"?Math.max(1,window.devicePixelRatio||1):1,u=typeof window<"u"&&window.innerWidth||n,c=Math.min(Math.round(u*d),n),f=mt(l.src,{[o]:c,[s]:Math.max(0,Math.min(1,r)),[i]:a});return{...l,src:f}}catch{return l}}}}}function vt(t){try{return new URL(t,typeof window<"u"?window.location.origin:"http://localhost").hostname}catch{return null}}function he(t,e,n){try{const r=new URL(t,typeof window<"u"?window.location.origin:"http://localhost");return r.searchParams.set(e,n),r.toString()}catch{const r=t.includes("?")?"&":"?";return`${t}${r}${encodeURIComponent(e)}=${encodeURIComponent(n)}`}}function wn(t={}){const{allowedDomains:e,checkReferer:n=!1,generateToken:r,tokenParam:a="token"}=t;return{name:"anti-hotlink",version:"1.0.0",config:t,hooks:{transformProps:o=>{if(Array.isArray(e)&&e.length>0){const l=vt(o.src);if(!l||!e.includes(l))return o}if(n&&typeof document<"u"&&!document.referrer){const l=he(o.src,"ref","direct");return{...o,src:l}}const s=r==null?void 0:r(o.src);if(!s)return o;const i=he(o.src,a,s);return{...o,src:i}}}}}function ge(t){try{return new URL(t,typeof window<"u"?window.location.origin:"http://localhost").hostname}catch{return null}}async function pt(t,e){try{await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0})}catch{}}function G(t,e,n){if(typeof t.report=="function")try{t.report(e,n)}catch{}else t.reportEndpoint&&pt(t.reportEndpoint,{event:e,...n})}function xn(t={}){return{name:"network-analytics",version:"1.0.0",config:t,hooks:{onMount:e=>{G(t,"mount",{src:e.src,time:Date.now()})},onLoadSuccess:(e,n)=>{const r=t.trackCDN?ge(e.src):null;G(t,"load-success",{src:e.src,displaySrc:n,host:r,time:Date.now()})},onLoadError:(e,n)=>{const r=t.trackCDN?ge(e.src):null;return G(t,"load-error",{src:e.src,message:n.message,host:r,time:Date.now()}),!1},onUnmount:e=>{G(t,"unmount",{src:e.src,time:Date.now()})}}}}function yt(t,e,n="anonymous"){if(!(typeof document>"u"))try{const r=`lli-preload-${e}-${t}`;if(document.getElementById(r))return;const a=document.createElement("link");a.id=r,a.rel="preload",a.setAttribute("as",e),a.href=t,n&&a.setAttribute("crossorigin",n),document.head.appendChild(a)}catch{}}function kn(t={}){const{model:e="heuristic",predict:n,maxPreload:r=5,as:a="image",crossOrigin:o="anonymous"}=t;return{name:"predictive-loading",version:"1.0.0",config:t,hooks:{onMount:s=>{try{n&&Promise.resolve(n(s)).then(i=>{(Array.isArray(i)?i.slice(0,r):[]).forEach(l=>yt(l,a,o))}).catch(()=>{})}catch{}}}}}function Ln(t={}){const{debounceMs:e=150,onlyWhenIntersecting:n=!0,debug:r=!1}=t;return{name:"viewport-debounce",version:"1.0.0",config:t,hooks:{onEnterViewport:a=>{var o;const s=(o=a.imageRef)==null?void 0:o.current;if(!s)return;const i=Date.now(),l=s.__lliLastEnterTs??0;if(s.__lliLastEnterTs=i,n)clearTimeout(s.__lliEnterTimer),s.__lliEnterTimer=setTimeout(()=>{s.dataset.vpStable="true"},e);else if(i-l<e)return},onLeaveViewport:a=>{var o;const s=(o=a.imageRef)==null?void 0:o.current;s&&(clearTimeout(s.__lliEnterTimer),s.dataset.vpStable="false")},onUnmount:a=>{var o,s;const i=(o=a.imageRef)==null?void 0:o.current;i&&(clearTimeout(i.__lliEnterTimer),delete i.__lliEnterTimer,delete i.__lliLastEnterTs,(s=i.dataset)==null||delete s.vpStable)}}}}function En(t={}){const{enabled:e=!0,onReport:n}=t;return{name:"user-behavior",version:"1.0.0",config:t,hooks:{transformProps:r=>({...r,unobserveOnVisible:!1}),onMount:r=>{var a,o,s,i,l;if(e)try{(a=r.sharedData)==null||a.set("ub:clicks",0),(o=r.sharedData)==null||o.set("ub:dwell",0),(s=r.sharedData)==null||s.set("ub:enters",0),(i=r.sharedData)==null||i.set("ub:leaves",0),(l=r.sharedData)==null||l.set("ub:enterTs",0)}catch{}},onLoadSuccess:r=>{var a;if(!e)return;const o=(a=r.imageRef)==null?void 0:a.current;if(!o)return;o.__lliUBClicks=o.__lliUBClicks||0,o.__lliUBEnterTs=o.__lliUBEnterTs||0,o.__lliUBDwell=o.__lliUBDwell||0,o.__lliUBEnters=o.__lliUBEnters||0,o.__lliUBLeaves=o.__lliUBLeaves||0;const s=()=>{var i,l;o.__lliUBClicks+=1;try{const d=(((i=r.sharedData)==null?void 0:i.get("ub:clicks"))||0)+1;(l=r.sharedData)==null||l.set("ub:clicks",d)}catch{}};o.__lliUBClickHandler=s;try{o.addEventListener("click",s)}catch{}},onEnterViewport:r=>{var a,o,s,i;if(!e)return;const l=(a=r.imageRef)==null?void 0:a.current;l&&(l.__lliUBEnterTs=Date.now(),l.__lliUBEnters=(l.__lliUBEnters||0)+1);try{const d=(((o=r.sharedData)==null?void 0:o.get("ub:enters"))||0)+1;(s=r.sharedData)==null||s.set("ub:enters",d),(i=r.sharedData)==null||i.set("ub:enterTs",Date.now())}catch{}},onLeaveViewport:r=>{var a,o,s,i,l,d,u;if(!e)return;const c=(a=r.imageRef)==null?void 0:a.current;if(c){const f=c.__lliUBEnterTs||0;f&&(c.__lliUBDwell=(c.__lliUBDwell||0)+(Date.now()-f)),c.__lliUBEnterTs=0,c.__lliUBLeaves=(c.__lliUBLeaves||0)+1}try{const f=(((o=r.sharedData)==null?void 0:o.get("ub:leaves"))||0)+1;(s=r.sharedData)==null||s.set("ub:leaves",f);const h=((i=r.sharedData)==null?void 0:i.get("ub:enterTs"))||0;if(h){const g=(((l=r.sharedData)==null?void 0:l.get("ub:dwell"))||0)+(Date.now()-h);(d=r.sharedData)==null||d.set("ub:dwell",g),(u=r.sharedData)==null||u.set("ub:enterTs",0)}}catch{}},onUnmount:r=>{var a,o,s,i,l,d,u,c,f,h,g;if(!e)return;const v=(a=r.imageRef)==null?void 0:a.current;if(v&&v.__lliUBClickHandler)try{v.removeEventListener("click",v.__lliUBClickHandler)}catch{}const b=((o=r.sharedData)==null?void 0:o.get("ub:enterTs"))||0,L=(((s=r.sharedData)==null?void 0:s.get("ub:dwell"))||0)+(b?Date.now()-b:0),E=v?(v.__lliUBDwell||0)+(v.__lliUBEnterTs?Date.now()-v.__lliUBEnterTs:0):0,I=(v==null?void 0:v.__lliUBClicks)??(((i=r.sharedData)==null?void 0:i.get("ub:clicks"))||0),P=(v==null?void 0:v.__lliUBEnters)??(((l=r.sharedData)==null?void 0:l.get("ub:enters"))||0),w=(v==null?void 0:v.__lliUBLeaves)??(((d=r.sharedData)==null?void 0:d.get("ub:leaves"))||0),S={src:r.src,dwellMs:E||L||0,clicks:I,enters:P,leaves:w};try{n&&n(S)}catch{}v&&(delete v.__lliUBClickHandler,delete v.__lliUBClicks,delete v.__lliUBEnterTs,delete v.__lliUBDwell,delete v.__lliUBEnters,delete v.__lliUBLeaves);try{(u=r.sharedData)==null||u.delete("ub:clicks"),(c=r.sharedData)==null||c.delete("ub:dwell"),(f=r.sharedData)==null||f.delete("ub:enters"),(h=r.sharedData)==null||h.delete("ub:leaves"),(g=r.sharedData)==null||g.delete("ub:enterTs")}catch{}},renderOverlay:r=>{if(!e)return null;const a=()=>{const[o,s]=$.useState({dwellMs:0,clicks:0,enters:0,leaves:0,inView:!1});$.useEffect(()=>{let d=!0,u=0;const c=()=>{var f,h,g,v,b,L;if(!d)return;const E=(f=r.imageRef)==null?void 0:f.current,I=(E==null?void 0:E.__lliUBEnterTs)||0,P=((E==null?void 0:E.__lliUBDwell)||0)+(I?Date.now()-I:0),w=((h=r.sharedData)==null?void 0:h.get("ub:enterTs"))||0,S=(((g=r.sharedData)==null?void 0:g.get("ub:dwell"))||0)+(w?Date.now()-w:0);s({dwellMs:P||S||0,clicks:(E==null?void 0:E.__lliUBClicks)??(((v=r.sharedData)==null?void 0:v.get("ub:clicks"))||0),enters:(E==null?void 0:E.__lliUBEnters)??(((b=r.sharedData)==null?void 0:b.get("ub:enters"))||0),leaves:(E==null?void 0:E.__lliUBLeaves)??(((L=r.sharedData)==null?void 0:L.get("ub:leaves"))||0),inView:r.isIntersecting}),u=requestAnimationFrame(c)};return u=requestAnimationFrame(c),()=>{d=!1;try{cancelAnimationFrame(u)}catch{}}},[r]);const i={position:"absolute",top:8,right:8,background:"rgba(30,144,255,0.85)",color:"#fff",fontSize:12,padding:"6px 8px",borderRadius:6,zIndex:5,boxShadow:"0 2px 8px rgba(0,0,0,0.2)",lineHeight:1.4},l=d=>m.jsx("span",{style:{display:"inline-block",width:8,height:8,borderRadius:8,background:d?"#4caf50":"#f44336",marginRight:6}});return m.jsxs("div",{style:i,children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[l(o.inView),m.jsx("strong",{children:"视口"})]}),m.jsxs("div",{children:["驻留：",Math.round(o.dwellMs/100)/10,"s"]}),m.jsxs("div",{children:["点击：",o.clicks]}),m.jsxs("div",{children:["进入：",o.enters,"，离开：",o.leaves]}),m.jsx("div",{style:{marginTop:4,opacity:.85},children:"提示：点击或慢慢滚动"})]})};return m.jsx(a,{})}}}}function Sn(t={}){const e=Math.max(0,Math.min(1,t.strength??.2)),n=t.axis??"y";function r(a){const o=a.getBoundingClientRect(),s=typeof window<"u"?window.innerHeight:800,i=(o.top+o.height/2-s/2)/s*(e*100),l=n==="x"?i:0,d=n==="y"?i:0;a.style.transform=`translate(${l}px, ${d}px)`}return{name:"parallax",version:"1.0.0",config:t,hooks:{onMount:a=>{var o;const s=(o=a.imageRef)==null?void 0:o.current;if(!s)return;s.style.willChange="transform";const i=()=>r(s),l=()=>r(s);s.__lliParallaxScroll=i,s.__lliParallaxResize=l,window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",l),r(s)},onUnmount:a=>{var o;const s=(o=a.imageRef)==null?void 0:o.current;if(!s)return;const i=s.__lliParallaxScroll,l=s.__lliParallaxResize;i&&window.removeEventListener("scroll",i),l&&window.removeEventListener("resize",l),s.style.transform="",s.style.willChange="",delete s.__lliParallaxScroll,delete s.__lliParallaxResize}}}}function bt(t,e=4){try{const n=document.createElement("canvas"),r=Math.min(t.naturalWidth||t.width,256),a=Math.min(t.naturalHeight||t.height,256);n.width=r,n.height=a;const o=n.getContext("2d");if(!o)return null;o.drawImage(t,0,0,r,a);const s=o.getImageData(0,0,r,a).data;let i=0,l=0,d=0,u=0;for(let c=0;c<s.length;c+=4*e)i+=s[c],l+=s[c+1],d+=s[c+2],u++;return i=Math.round(i/u),l=Math.round(l/u),d=Math.round(d/u),`rgb(${i}, ${l}, ${d})`}catch{return null}}function _n(t={}){const{setContainerBg:e=!0,sampleSize:n=4,showOverlay:r=!0}=t;return{name:"color-extraction",version:"1.0.0",config:t,hooks:{transformProps:a=>({...a,crossOrigin:"anonymous"}),onMount:a=>{var o,s;try{(s=(o=a.imageRef)==null?void 0:o.current)==null||s.setAttribute("crossOrigin","anonymous")}catch{}},onLoadSuccess:a=>{var o,s,i;const l=(o=a.imageRef)==null?void 0:o.current;if(!l)return;const d=bt(l,n);if(e&&d)try{const u=(s=a.containerRef)==null?void 0:s.current;u&&(u.style.background=`linear-gradient(90deg, ${d} 0%, rgba(0,0,0,0.06) 100%)`)}catch{}try{(i=a.sharedData)==null||i.set("dominant-color",d)}catch{}try{l.__lliDominantColor=d}catch{}},renderOverlay:a=>{if(!r)return null;const o=()=>{const[s,i]=$.useState(null);$.useEffect(()=>{let d=!0;const u=requestAnimationFrame(()=>{var c,f;if(!d)return;const h=(c=a.imageRef)==null?void 0:c.current,g=(h==null?void 0:h.__lliDominantColor)||((f=a.sharedData)==null?void 0:f.get("dominant-color"))||null;i(g||null)});return()=>{d=!1,cancelAnimationFrame(u)}},[a]);const l={position:"absolute",top:8,right:8,background:"rgba(0,0,0,0.35)",color:"#fff",fontSize:12,padding:"6px 8px",borderRadius:6,zIndex:5,display:"flex",alignItems:"center",gap:8,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"};return m.jsxs("div",{style:l,children:[m.jsx("span",{style:{width:16,height:16,borderRadius:4,background:s||"transparent",border:"1px solid rgba(255,255,255,0.35)"}}),m.jsx("span",{children:s||"未提取"})]})};return m.jsx(o,{})}}}}function Rn(t={}){const{enabled:e=!0}=t;return{name:"offline",version:"0.1.0",config:t,hooks:{onMount:n=>{},renderOverlay:n=>{var r;if(!e)return null;const a=!!((r=n.networkInfo)!=null&&r.saveData);return m.jsxs("div",{style:{position:"absolute",bottom:8,left:8,background:"rgba(0,0,0,0.6)",color:"#fff",padding:"4px 6px",borderRadius:4,fontSize:12},children:["OfflinePlugin · saveData: ",String(a)]})}}}}function Dn(t={}){const{enabled:e=!0,focusPoint:n={x:.5,y:.5}}=t;return{name:"crop",version:"0.1.0",config:t,hooks:{transformProps:r=>{if(!e)return r;const a={...r.imageStyle||{},objectFit:"cover",objectPosition:`${Math.round(n.x*100)}% ${Math.round(n.y*100)}%`};return{...r,imageStyle:a}},renderOverlay:r=>e?m.jsxs("div",{style:{position:"absolute",top:8,left:8,background:"rgba(255,165,0,0.8)",color:"#000",padding:"4px 6px",borderRadius:4,fontSize:12},children:["CropPlugin · focus ",n.x.toFixed(2),",",n.y.toFixed(2)]}):null}}}function Mn(t={}){const{enabled:e=!0}=t;return{name:"comparison",version:"0.1.0",config:t,hooks:{renderOverlay:n=>e?m.jsx("div",{style:{position:"absolute",top:8,right:8,background:"rgba(0,0,0,0.6)",color:"#fff",padding:"4px 6px",borderRadius:4,fontSize:12},children:"ComparisonPlugin"}):null}}}function wt(t,e="image",n="anonymous"){try{if(typeof document>"u")return;const r=document.createElement("link");return r.setAttribute("rel","preload"),r.setAttribute("as",e||"image"),r.setAttribute("href",t),n&&r.setAttribute("crossorigin",n),document.head.appendChild(r),()=>{try{document.head.removeChild(r)}catch{}}}catch{}}function In(t={}){const{getNextSrc:e,target:n="container",trigger:r="mouseenter",as:a="image",max:o=2,dedupe:s=!0,crossOrigin:i="anonymous",debug:l=!1}=t,d=new Set;async function u(c){try{const f=e?await Promise.resolve(e(c)):void 0;if(!f)return;(Array.isArray(f)?f:[f]).slice(0,Math.max(1,o)).forEach(h=>{if(!(s&&d.has(h))&&(wt(h,a,i)&&d.add(h),l))try{}catch{}})}catch{}}return{name:"hover-prefetch",version:"0.1.0",config:t,hooks:{onMount:c=>{var f,h,g;const v=(f=c.containerRef)==null?void 0:f.current,b=(h=c.imageRef)==null?void 0:h.current,L=n==="container"?v:b;if(!L)return;const E=()=>u(c);L.addEventListener(r,E,{passive:!0}),(g=c.sharedData)==null||g.set("hover-prefetch:cleanup",()=>{try{L.removeEventListener(r,E)}catch{}})},onUnmount:c=>{var f;const h=(f=c.sharedData)==null?void 0:f.get("hover-prefetch:cleanup");if(typeof h=="function")try{h()}catch{}d.clear()}}}}function xt(t,e){try{const n=new URL(t,window.location.href),r=n.host,a=n.searchParams;return/images\.unsplash\.com$/i.test(r)||/img\d+\.360buyimg\.com$/i.test(r)?(a.set("w",String(e)),a.set("auto","format"),a.set("fit","crop"),n.search=a.toString(),n.toString()):((!n.search||n.search==="")&&(n.search=`?w=${e}&auto=format&fit=crop`),n.toString())}catch{return t}}function $n(t={}){const{enabled:e=!0,deviceMemoryThreshold:n=4,preferOnMobile:r=!0,lowWidth:a=640}=t,o=s=>{var i,l;const d=typeof navigator<"u"?navigator:void 0,u=Number((d==null?void 0:d.deviceMemory)||8),c=((i=s.deviceInfo)==null?void 0:i.type)==="mobile",f=!!((l=s.networkInfo)!=null&&l.saveData);return u&&u<=n||r&&c||f};return{name:"memory-pressure-abort",version:"1.0.0",config:t,hooks:{onLoad:s=>!e||!o(s)?void 0:xt(s.src,a),onLeaveViewport:s=>{}}}}const kt=typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback:(t,e)=>setTimeout(t,(e==null?void 0:e.timeout)??0);function Pn(t={}){const{enabled:e=!0,timeoutMs:n=600}=t;return{name:"decode-after-idle",version:"1.0.0",config:t,hooks:{onLoadSuccess:r=>{var a;if(!e)return;const o=(a=r.imageRef)==null?void 0:a.current;!o||!o.decode||kt(async()=>{var s;try{await((s=o.decode)==null?void 0:s.call(o))}catch{}},{timeout:n})},transformProps:r=>({...r,decoding:"async"})}}}async function Lt(){try{const t=navigator;if(t&&typeof t.getBattery=="function"){const e=await t.getBattery();return(e==null?void 0:e.level)??null}}catch{}return null}function Et(t,e){try{const n=new URL(t,window.location.href);return n.searchParams.set("w",String(e)),n.searchParams.set("auto","format"),n.searchParams.set("fit","crop"),n.toString()}catch{return t}}function St(t){var e;return!!((e=t.networkInfo)!=null&&e.saveData)}function jn(t={}){const{enabled:e=!0,lowBatteryThreshold:n=.2,downgradeWidth:r=640,disablePreconnect:a=!0}=t;return{name:"battery-aware",version:"1.0.0",config:t,hooks:{onLoad:async o=>{if(!e)return;const s=await Lt(),i=s!==null?s<=n:!1,l=St(o);if(i||l)return Et(o.src,r)},transformProps:o=>{if(!e)return o;const s={...o};return s.loading="lazy",a&&(s["data-disable-preconnect"]="true"),s}}}}function Un(t={}){const{enabled:e=!0}=t;return{name:"exif-orientation",version:"1.0.0",config:t,hooks:{transformProps:n=>{if(!e)return n;const r={...n.imageStyle||{},imageOrientation:"from-image"};return{...n,imageStyle:r}}}}}function Cn(t={}){const{enabled:e=!0,boxes:n=[],zIndex:r=3}=t;return{name:"redaction",version:"1.0.0",config:t,hooks:{render:a=>!e||!n.length?null:m.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:r},children:n.map((o,s)=>m.jsx("div",{style:{position:"absolute",left:`${o.x*100}%`,top:`${o.y*100}%`,width:`${o.w*100}%`,height:`${o.h*100}%`,background:o.color??"rgba(0,0,0,0.35)",backdropFilter:o.blur?`blur(${o.blur}px)`:void 0,borderRadius:6}},s))})}}}export{sn as $,cn as A,un as B,tn as C,Zt as D,Xt as E,Ct as F,wn as G,pn as H,en as I,kn as J,bn as K,Jt as L,rn as M,hn as N,on as O,Yt as P,xn as Q,Qt as R,Gt as S,nn as T,ln as U,mn as V,Un as W,Ln as X,yn as Y,En as Z,Kt as _,$t as a,Ht as a0,It as a1,qt as a2,Ft as a3,dn as a4,gn as a5,jn as a6,Dn as a7,Mn as a8,Wt as b,Pt as c,Ut as d,Sn as e,zt as f,Rn as g,Tt as h,$n as i,an as j,Pn as k,jt as l,Ot as m,Dt as n,Mt as o,At as p,vn as q,Rt as r,$e as s,_n as t,Cn as u,Bt as v,Vt as w,In as x,Nt as y,fn as z};
