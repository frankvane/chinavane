import{r as l,j as s}from"./index-CAgh_i44.js";import{D as d}from"./DemoPage-DDy1Lp2W.js";import{w as h}from"./index-BUiUrMm6.js";import{L as u}from"./LazyLoadImageCore-BXC5ZDAL.js";import"./tomorrow-gtxudeWU.js";import"./GlobalContext-DYUf_pwM.js";function f(e,o,t="anonymous"){if(!(typeof document>"u"))try{const a=`lli-preload-${o}-${e}`;if(document.getElementById(a))return;const i=document.createElement("link");i.id=a,i.rel="preload",i.setAttribute("as",o),i.href=e,t&&i.setAttribute("crossorigin",t),document.head.appendChild(i)}catch{}}function g(e={}){const{model:o="heuristic",predict:t,maxPreload:a=5,as:i="image",crossOrigin:c="anonymous"}=e;return{name:"predictive-loading",version:"1.0.0",config:e,hooks:{onMount:m=>{try{t&&Promise.resolve(t(m)).then(n=>{(Array.isArray(n)?n.slice(0,a):[]).forEach(p=>f(p,i,c))}).catch(()=>{})}catch{}}}}}const r=["https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=640&auto=format&fit=crop","https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=640&auto=format&fit=crop","https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=640&auto=format&fit=crop","https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=640&auto=format&fit=crop","https://images.unsplash.com/photo-1519681393784-d120267933ba?w=640&auto=format&fit=crop","https://images.unsplash.com/photo-1470770903676-69b98201ea1c?w=640&auto=format&fit=crop","https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=640&auto=format&fit=crop","https://images.unsplash.com/photo-1502082553048-f009c37129b9?w=640&auto=format&fit=crop"];function y(e){const o=r.findIndex(a=>a===e.src);if(o<0)return r.slice(0,3);const t=r.slice(o+1,o+4);return t.length<3&&t.push(...r.slice(0,3-t.length)),t}const x=h(u,[g({model:"heuristic",predict:y,maxPreload:3,as:"image",crossOrigin:"anonymous"})]);function I(){const e=l.useMemo(()=>r,[]);return s.jsx(d,{title:"PredictiveLoading 插件示例",description:"基于启发式预测，提前为后续图片添加 preload 链接，加快后续加载。",children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:12},children:e.map((o,t)=>s.jsx("div",{style:{width:320,height:200,position:"relative"},children:s.jsx(x,{src:o,alt:`Predictive image ${t+1}`,loading:"lazy",rootMargin:"300px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"},containerClassName:"lazy-image-container"})},o+t))})})}export{I as default};
