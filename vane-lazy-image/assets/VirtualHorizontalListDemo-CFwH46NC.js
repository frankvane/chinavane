import{R as n,j as o}from"./index-DYgqlTni.js";import{R as f}from"./react-window-BAxrxnTd.js";import{r as w,_ as R,S as y,L as b,E as p,P as j,n as v,a as z,c as E,l as L,d as W,y as S,s as M}from"./index.es-GGdYOdPG.js";import{D as C}from"./DemoPage-D1_mDGmg.js";import"./tomorrow-CqI3LVar.js";const I=w(M,[R({maxEntries:300,ttlMs:60*60*1e3}),y({ttlMs:7*24*60*60*1e3}),b({idleMs:160,maxWaitMs:1200,onlyWhenIntersecting:!0,target:"container",axis:"horizontal"}),p({dwellMs:160,maxWaitMs:1e3,onlyWhenIntersecting:!0}),j({maxConcurrent:6}),v({enabled:!0}),z({showWhen:"loading",height:3,color:"#4caf50",showPercentText:!0}),E({type:"shimmer",showWhen:"loading",borderRadius:6,zIndex:1}),L({content:r=>`Horizontal • ${new URL(r.src,window.location.origin).pathname}`,position:"bottom",background:"rgba(0,0,0,0.35)",color:"#fff",showWhen:"loading",zIndex:4}),W({domains:["https://picsum.photos"]}),S({enabled:!0,prefix:"[HL-Demo]"})]),m=f,u=m.Grid,P=m.FixedSizeList;function G(){const r=n.useRef(null),l=n.useRef(null),[g,x]=n.useState(void 0),[s]=n.useState(Array.from({length:180}).map((e,t)=>({id:t,src:`https://picsum.photos/seed/virt-h-${t}/800/600`})));n.useEffect(()=>{var t,i,d,c;const e=l.current;if(e){const h=((t=e==null?void 0:e.getElement)==null?void 0:t.call(e))||((i=e==null?void 0:e.getOuterElement)==null?void 0:i.call(e))||((d=e==null?void 0:e.getRootElement)==null?void 0:d.call(e))||((c=e==null?void 0:e._outerRef)==null?void 0:c.current)||(e==null?void 0:e._outerElement);h instanceof HTMLElement&&x(h)}},[]);const a=({index:e,style:t})=>{const i=s[e];return o.jsx("div",{style:{...t,padding:8},children:o.jsx("div",{style:{position:"relative",width:240,height:160,borderRadius:8,overflow:"hidden",boxShadow:"0 1px 6px rgba(0,0,0,0.1)"},children:o.jsx(I,{src:i.src,loading:"lazy",root:g||r.current||void 0,rootMargin:"240px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})})})};return o.jsx(C,{title:"LazyLoadImagePlugin • 水平虚拟列表示例（react-window）",description:"结合 react-window 的水平虚拟列表，优化横向滚动图片加载",children:o.jsx("div",{style:{border:"1px solid #eee",borderRadius:8,overflow:"hidden"},children:u?o.jsx(u,{cellComponent:({columnIndex:e,style:t})=>o.jsx(a,{index:e,style:t}),columnCount:s.length,columnWidth:256,rowCount:1,rowHeight:220,gridRef:l,cellProps:{items:s},style:{height:220,width:960}}):o.jsx(P,{height:220,width:960,itemCount:s.length,itemSize:256,layout:"horizontal",outerRef:r,overscanCount:8,children:a})})})}export{G as default};
