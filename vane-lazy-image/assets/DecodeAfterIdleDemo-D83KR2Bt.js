import{j as o}from"./index-B9PC2ohi.js";import{D as s}from"./DemoPage-DkYR9Y4e.js";import{w as c}from"./index-D07z_aKU.js";import{L as l}from"./LazyLoadImageCore-B-l3-xqi.js";import"./tomorrow-BZAIm09o.js";import"./GlobalContext-DYUf_pwM.js";const m=typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback:(e,t)=>setTimeout(e,(t==null?void 0:t.timeout)??0);function u(e={}){const{enabled:t=!0,timeoutMs:n=600}=e;return{name:"decode-after-idle",version:"1.0.0",config:e,hooks:{onLoadSuccess:r=>{var d;if(!t)return;const i=(d=r.imageRef)==null?void 0:d.current;!i||!i.decode||m(async()=>{var a;try{await((a=i.decode)==null?void 0:a.call(i))}catch{}},{timeout:n})},transformProps:r=>({...r,decoding:"async"})}}}const f=c(l,[u({timeoutMs:800})]);function j(){return o.jsx(s,{title:"DecodeAfterIdle 插件示例",description:"在浏览器空闲时执行 img.decode()，减少主线程卡顿。",children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:16},children:["idle-1","idle-2","idle-3"].map(e=>o.jsx("div",{style:{width:360,height:240},children:o.jsx(f,{src:`https://picsum.photos/seed/${e}/800/600`,loading:"lazy",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})},e))})})}export{j as default};
