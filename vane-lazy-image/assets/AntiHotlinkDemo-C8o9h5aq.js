import{j as i}from"./index-D8F4DWO3.js";import{D as h}from"./DemoPage-Cm4QH0wv.js";import{w as u}from"./index-B42FZQrT.js";import{L as f}from"./LazyLoadImageCore-CJJrIobl.js";import"./tomorrow-CQx5l04T.js";import"./GlobalContext-DYUf_pwM.js";function p(t){try{return new URL(t,typeof window<"u"?window.location.origin:"http://localhost").hostname}catch{return null}}function c(t,e,r){try{const n=new URL(t,typeof window<"u"?window.location.origin:"http://localhost");return n.searchParams.set(e,r),n.toString()}catch{const n=t.includes("?")?"&":"?";return`${t}${n}${encodeURIComponent(e)}=${encodeURIComponent(r)}`}}function w(t={}){const{allowedDomains:e,checkReferer:r=!1,generateToken:n,tokenParam:l="token"}=t;return{name:"anti-hotlink",version:"1.0.0",config:t,hooks:{transformProps:o=>{if(Array.isArray(e)&&e.length>0){const a=p(o.src);if(!a||!e.includes(a))return o}if(r&&typeof document<"u"&&!document.referrer){const d=c(o.src,"ref","direct");return{...o,src:d}}const s=n==null?void 0:n(o.src);if(!s)return o;const m=c(o.src,l,s);return{...o,src:m}}}}}const g=u(f,[w({allowedDomains:["picsum.photos"],checkReferer:!0,tokenParam:"token",generateToken:t=>{try{return btoa(unescape(encodeURIComponent(t))).replace(/=+$/,"").slice(-8)}catch{return"demo-token"}}})]),A=()=>{const t=["https://picsum.photos/seed/anti-hot-link-1/800/600?w=1280&auto=format&fit=crop","https://picsum.photos/seed/anti-hot-link-2/800/600?w=1280&auto=format&fit=crop","https://picsum.photos/seed/anti-hot-link-3/800/600?w=1280&auto=format&fit=crop"];return i.jsx(h,{title:"AntiHotlink - 防盗链保护",description:"仅在白名单域名时注入签名参数，未带来源时添加 ref 标记",children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:12},children:t.map((e,r)=>i.jsx("div",{style:{width:320,height:200},children:i.jsx(g,{src:e,alt:`AntiHotlink ${r+1}`,loading:"lazy",rootMargin:"300px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})},e+r))})})};export{A as default};
