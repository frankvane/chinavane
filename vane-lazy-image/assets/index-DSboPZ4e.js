import{j as a}from"./index-CAgh_i44.js";function c({context:o,cfg:e}){const t=o.performanceData||{duration:void 0};if(!e.showOverlay||!o.imageState.isLoaded)return null;const n=e.overlayPosition??"top-right",r={position:"absolute",zIndex:9,background:e.background??"rgba(0,0,0,0.45)",color:e.color??"#fff",fontSize:12,padding:"2px 6px",borderRadius:4};return n.includes("top")&&(r.top=6),n.includes("bottom")&&(r.bottom=6),n.includes("left")&&(r.left=6),n.includes("right")&&(r.right=6),a.jsxs("div",{style:r,children:["Loaded in ",Math.round(t.duration||0)," ms"]})}function p(o={}){const e=new Set,t=100,n=new Map;return{name:"performance-monitor",version:"1.0.0",config:o,hooks:{onLoadSuccess:r=>{if(e.has(r.src))return;const s=Date.now(),i=n.get(r.src)||0;if(s-i<t)return;n.set(r.src,s),e.add(r.src);const d=r.performanceData||{duration:0},u={src:r.src,durationMs:Math.round(d.duration||0),network:r.networkInfo,device:r.deviceInfo};try{o.onReport&&o.onReport(u)}catch{}},renderOverlay:r=>a.jsx(c,{context:r,cfg:o})}}}export{p as c};
