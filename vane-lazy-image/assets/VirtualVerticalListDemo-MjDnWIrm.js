import{R as r,j as o}from"./index-CAgh_i44.js";import{R as w}from"./react-window-CXv8QbWF.js";import{D as p}from"./DemoPage-DDy1Lp2W.js";import{w as x}from"./index-BUiUrMm6.js";import{c as R}from"./index-WRK_IPD5.js";import{c as y}from"./FetchLoaderPlugin-TVanieTR.js";import{L as P}from"./LazyLoadImageCore-BXC5ZDAL.js";import{c as v}from"./index-B5UHMOeD.js";import{c as L}from"./index-BgL7gFsr.js";import{c as b}from"./index-pPKGznM1.js";import{c as C}from"./index-BSqgw6fK.js";import{c as E}from"./index-h9RCZJBs.js";import{c as j}from"./index-CGWN0RiM.js";import{c as I}from"./index-MK5Fd09O.js";import{c as M}from"./index-DuBD9CE8.js";import{c as S}from"./index-Umho1SUE.js";import"./tomorrow-gtxudeWU.js";import"./GlobalContext-DYUf_pwM.js";const W=x(P,[v({maxEntries:300,ttlMs:60*60*1e3}),L({ttlMs:7*24*60*60*1e3}),b({idleMs:280,maxWaitMs:1e3,onlyWhenIntersecting:!0,target:"container",axis:"vertical"}),R({dwellMs:180,maxWaitMs:1e3,onlyWhenIntersecting:!0}),C({maxConcurrent:4}),y({enabled:!0}),E({showWhen:"loading",height:3,color:"#ff7f50",showPercentText:!0}),j({type:"shimmer",showWhen:"loading",borderRadius:6,zIndex:1}),I({content:n=>`VirtualList • ${new URL(n.src,window.location.origin).pathname}`,position:"bottom",background:"rgba(0,0,0,0.35)",color:"#fff",showWhen:"loading",zIndex:4}),M({domains:["https://picsum.photos"]}),S({enabled:!0,prefix:"[VL-Demo]"})]),h=w,u=h.List,z=h.FixedSizeList;function X(){const n=r.useRef(null),c=r.useRef(null),[g,f]=r.useState(void 0),[i]=r.useState(Array.from({length:300}).map((e,t)=>({id:t,src:`https://picsum.photos/seed/virt-v-${t}/800/600`})));r.useEffect(()=>{var t,s,a,m;const e=c.current;if(e){const d=((t=e==null?void 0:e.getElement)==null?void 0:t.call(e))||((s=e==null?void 0:e.getOuterElement)==null?void 0:s.call(e))||((a=e==null?void 0:e.getRootElement)==null?void 0:a.call(e))||((m=e==null?void 0:e._outerRef)==null?void 0:m.current)||(e==null?void 0:e._outerElement);d instanceof HTMLElement&&f(d)}},[]);const l=({index:e,style:t})=>{const s=i[e];return o.jsx("div",{style:{...t,padding:8},children:o.jsx("div",{style:{position:"relative",width:"100%",height:184,borderRadius:8,overflow:"hidden",boxShadow:"0 1px 6px rgba(0,0,0,0.1)"},children:o.jsx(W,{src:s.src,loading:"lazy",root:g||n.current||void 0,rootMargin:"240px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})})})};return o.jsx(p,{title:"LazyLoadImagePlugin • 垂直虚拟列表示例（react-window）",description:"结合 react-window 的垂直虚拟列表，优化长列表图片加载",children:o.jsx("div",{style:{border:"1px solid #eee",borderRadius:8,overflow:"hidden"},children:u?o.jsx(u,{rowComponent:l,rowCount:i.length,rowHeight:200,rowProps:{items:i},listRef:c,overscanCount:3,style:{height:640,width:960}}):o.jsx(z,{height:640,width:960,itemCount:i.length,itemSize:200,outerRef:n,overscanCount:3,children:l})})})}export{X as default};
