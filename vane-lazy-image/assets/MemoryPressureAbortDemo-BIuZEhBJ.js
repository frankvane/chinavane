import{j as a}from"./index-C0E0sUJ6.js";import{D as p}from"./DemoPage-DjGyO8DL.js";import{w as f}from"./index-BUsnPGUY.js";import{L as g}from"./LazyLoadImageCore-BPNS9GwS.js";import"./tomorrow-CNZkBZJs.js";import"./GlobalContext-DYUf_pwM.js";function y(r,i){try{const e=new URL(r,window.location.href),s=e.host,t=e.searchParams;return/images\.unsplash\.com$/i.test(s)||/img\d+\.360buyimg\.com$/i.test(s)?(t.set("w",String(i)),t.set("auto","format"),t.set("fit","crop"),e.search=t.toString(),e.toString()):((!e.search||e.search==="")&&(e.search=`?w=${i}&auto=format&fit=crop`),e.toString())}catch{return r}}function w(r={}){const{enabled:i=!0,deviceMemoryThreshold:e=4,preferOnMobile:s=!0,lowWidth:t=640}=r,u=o=>{var c,d;const n=typeof navigator<"u"?navigator:void 0,m=Number((n==null?void 0:n.deviceMemory)||8),l=((c=o.deviceInfo)==null?void 0:c.type)==="mobile",h=!!((d=o.networkInfo)!=null&&d.saveData);return m&&m<=e||s&&l||h};return{name:"memory-pressure-abort",version:"1.0.0",config:r,hooks:{onLoad:o=>!i||!u(o)?void 0:y(o.src,t),onLeaveViewport:o=>{}}}}const v=f(g,[w({deviceMemoryThreshold:4,lowWidth:480})]);function P(){return a.jsx(p,{title:"MemoryPressureAbort 插件示例",description:"在低内存/省流/移动端条件下自动降级清晰度，避免浪费。",children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:16},children:[1,2,3].map(r=>a.jsx("div",{style:{width:360,height:240},children:a.jsx(v,{src:`https://picsum.photos/seed/cdn-fallback-demo-${r}/800/600`,loading:"lazy",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})},r))})})}export{P as default};
