import{j as r}from"./index-D8F4DWO3.js";import{D as x}from"./DemoPage-Cm4QH0wv.js";import{w as m}from"./index-B42FZQrT.js";import{L as u}from"./LazyLoadImageCore-CJJrIobl.js";import"./tomorrow-CQx5l04T.js";import"./GlobalContext-DYUf_pwM.js";function f(n={}){const s=Math.max(0,Math.min(1,n.strength??.2)),o=n.axis??"y";function c(i){const e=i.getBoundingClientRect(),t=typeof window<"u"?window.innerHeight:800,a=(e.top+e.height/2-t/2)/t*(s*100),d=o==="x"?a:0,p=o==="y"?a:0;i.style.transform=`translate(${d}px, ${p}px)`}return{name:"parallax",version:"1.0.0",config:n,hooks:{onMount:i=>{var p;const e=(p=i.imageRef)==null?void 0:p.current;if(!e)return;e.style.willChange="transform";let t=!1,l=null;const a=()=>{t||(l=requestAnimationFrame(()=>{c(e),t=!1}),t=!0)},d=()=>{t||(l=requestAnimationFrame(()=>{c(e),t=!1}),t=!0)};return e.__lliParallaxScroll=a,e.__lliParallaxResize=d,e.__lliParallaxRafId=l,window.addEventListener("scroll",a,{passive:!0}),window.addEventListener("resize",d,{passive:!0}),c(e),()=>{e.__lliParallaxRafId!==null&&cancelAnimationFrame(e.__lliParallaxRafId)}},onUnmount:i=>{var a;const e=(a=i.imageRef)==null?void 0:a.current;if(!e)return;if(e.__lliParallaxRafId!==null)try{cancelAnimationFrame(e.__lliParallaxRafId)}catch{}const t=e.__lliParallaxScroll,l=e.__lliParallaxResize;t&&window.removeEventListener("scroll",t),l&&window.removeEventListener("resize",l),e.style.transform="",e.style.willChange="",delete e.__lliParallaxScroll,delete e.__lliParallaxResize,delete e.__lliParallaxRafId}}}}const h=m(u,[f({strength:.6,axis:"y"})]);function R(){const n=["https://picsum.photos/seed/parallax-1/800/600","https://picsum.photos/seed/parallax-2/800/600","https://picsum.photos/seed/parallax-3/800/600"];return r.jsx(x,{title:"Parallax 插件示例",description:"向下慢慢滚动，观察图片相对背景产生明显位移。",children:r.jsxs("div",{style:{height:800,overflow:"auto",border:"1px solid #ddd",borderRadius:8,position:"relative"},children:[r.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,backgroundImage:"linear-gradient(#eee 1px, transparent 1px), linear-gradient(90deg, #eee 1px, transparent 1px)",backgroundSize:"40px 40px, 40px 40px",zIndex:0}}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:12,padding:12,position:"relative",zIndex:1},children:n.map((s,o)=>r.jsx("div",{style:{width:320,height:200,position:"relative"},children:r.jsx(h,{src:s,alt:`Parallax ${o+1}`,loading:"lazy",rootMargin:"300px",containerStyle:{width:"100%",height:"100%",position:"relative"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})},s+o))})]})})}export{R as default};
