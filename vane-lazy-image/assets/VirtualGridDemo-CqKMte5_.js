import{R as s,j as o}from"./index-DYgqlTni.js";import{R}from"./react-window-BAxrxnTd.js";import{r as y,_ as b,S as p,L as v,E as j,P as E,n as W,a as C,c as M,l as S,d as G,y as I,s as L}from"./index.es-GGdYOdPG.js";import{D as z}from"./DemoPage-D1_mDGmg.js";import"./tomorrow-CqI3LVar.js";const P=y(L,[b({maxEntries:300,ttlMs:60*60*1e3}),p({ttlMs:7*24*60*60*1e3}),v({idleMs:160,maxWaitMs:1200,onlyWhenIntersecting:!0,target:"container",axis:"both"}),j({dwellMs:140,maxWaitMs:900,onlyWhenIntersecting:!0}),E({maxConcurrent:6}),W({enabled:!0}),C({showWhen:"loading",height:3,color:"#2196f3",showPercentText:!0}),M({type:"shimmer",showWhen:"loading",borderRadius:6,zIndex:1}),S({content:i=>`Grid • ${new URL(i.src,window.location.origin).pathname}`,position:"bottom",background:"rgba(0,0,0,0.35)",color:"#fff",showWhen:"loading",zIndex:4}),G({domains:["https://picsum.photos"]}),I({enabled:!0,prefix:"[GRID-Demo]"})]),w=R,g=w.Grid,D=w.FixedSizeGrid;function $(){const i=s.useRef(null),a=s.useRef(null),[x,f]=s.useState(void 0),r=4,d=60,[h]=s.useState(Array.from({length:r*d}).map((e,t)=>({id:t,src:`https://picsum.photos/seed/virt-g-${t}/800/600`})));s.useEffect(()=>{var t,n,l,c;const e=a.current;if(e){const m=((t=e==null?void 0:e.getElement)==null?void 0:t.call(e))||((n=e==null?void 0:e.getOuterElement)==null?void 0:n.call(e))||((l=e==null?void 0:e.getRootElement)==null?void 0:l.call(e))||((c=e==null?void 0:e._outerRef)==null?void 0:c.current)||(e==null?void 0:e._outerElement);m instanceof HTMLElement&&f(m)}},[]);const u=({columnIndex:e,rowIndex:t,style:n})=>{const l=t*r+e,c=h[l];return o.jsx("div",{style:{...n,padding:8},children:o.jsx("div",{style:{position:"relative",width:"100%",height:"100%",borderRadius:8,overflow:"hidden",boxShadow:"0 1px 6px rgba(0,0,0,0.1)"},children:o.jsx(P,{src:c.src,loading:"lazy",root:x||i.current||void 0,rootMargin:"240px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})})})};return o.jsx(z,{title:"LazyLoadImagePlugin • 双向网格虚拟滚动示例（react-window）",description:"结合 react-window 的双向网格虚拟滚动，优化大量图片加载性能",children:o.jsx("div",{style:{border:"1px solid #eee",borderRadius:8,overflow:"hidden"},children:g?o.jsx(g,{cellComponent:({columnIndex:e,rowIndex:t,style:n})=>o.jsx(u,{columnIndex:e,rowIndex:t,style:n}),columnCount:r,columnWidth:240,rowCount:d,rowHeight:200,gridRef:a,cellProps:{items:h,cols:r,rows:d},style:{height:640,width:960}}):o.jsx(D,{height:640,width:960,columnCount:r,columnWidth:240,rowCount:d,rowHeight:200,outerRef:i,overscanColumnsCount:2,overscanRowsCount:4,children:u})})})}export{$ as default};
