function r(n,o="anonymous"){if(typeof document>"u")return;const e=`lli-preconnect-${n}`;if(document.getElementById(e))return;const t=document.createElement("link");t.id=e,t.rel="preconnect",t.href=n,o&&(t.crossOrigin=o),document.head.appendChild(t)}function s(n){if(typeof document>"u")return;const o=`lli-preconnect-${n}`,e=document.getElementById(o);e&&e.remove()}function i(n){try{const o=new URL(n,typeof window<"u"?window.location.origin:"http://localhost");return`${o.protocol}//${o.host}`}catch{return null}}function d(n={}){return{name:"preconnect",version:"1.0.0",config:n,hooks:{onMount:o=>{const e=i(o.src);e&&r(e,n.crossOrigin??"anonymous"),n.domains&&Array.isArray(n.domains)&&n.domains.forEach(t=>r(t,n.crossOrigin??"anonymous"))},onUnmount:o=>{const e=i(o.src);e&&s(e),n.domains&&Array.isArray(n.domains)&&n.domains.forEach(t=>s(t))},onSrcChange:(o,e,t)=>{const c=i(t);c&&r(c,n.crossOrigin??"anonymous")}}}}export{d as c};
