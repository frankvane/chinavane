import{j as s,r as h}from"./index-B9PC2ohi.js";function m({context:r,cfg:e}){var a;const{imageState:i,imageRef:t,src:o}=r,l=!!((a=r.sharedData)!=null&&a.get("had-error")),u=i.isError||(e.persistAfterFallback??!0)&&l,c=h.useMemo(()=>(typeof e.message=="function"?e.message(r):e.message)??"加载失败",[e.message,r]);if(!u)return null;const d=()=>{const n=t==null?void 0:t.current;if(n)try{const y=`${o}${o.includes("?")?"&":"?"}retry=${Date.now()}`;n.src=y}catch{}},p={position:"absolute",inset:0,background:e.background??"rgba(220, 53, 69, 0.18)",color:e.color??"#b00020",zIndex:e.zIndex??10,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",gap:8,fontSize:13,fontWeight:500};return s.jsxs("div",{style:p,children:[s.jsx("span",{children:c}),e.showRetry!==!1&&s.jsxs("button",{onClick:d,style:{padding:"4px 8px",fontSize:12},children:[" ",e.retryText??"重试"," "]})]})}function x(r={}){return{name:"error-overlay",version:"1.0.0",config:r,hooks:{renderOverlay:e=>s.jsx(m,{context:e,cfg:r})}}}export{x as c};
