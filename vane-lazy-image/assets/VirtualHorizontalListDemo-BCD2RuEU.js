import{R as r,j as o}from"./index-C0E0sUJ6.js";import{R as w}from"./react-window-BXFKetsh.js";import{D as x}from"./DemoPage-DjGyO8DL.js";import{w as p}from"./index-BUsnPGUY.js";import{c as y}from"./FetchLoaderPlugin-TVanieTR.js";import{L as P}from"./LazyLoadImageCore-BPNS9GwS.js";import{c as R}from"./index-B5UHMOeD.js";import{c as v}from"./index-BgL7gFsr.js";import{c as L}from"./index-pPKGznM1.js";import{c as b}from"./index-WRK_IPD5.js";import{c as z}from"./index-BSqgw6fK.js";import{c as C}from"./index-PuxTKO9u.js";import{c as j}from"./index-DHk8s8hy.js";import{c as E}from"./index-Bh64Msh2.js";import{c as I}from"./index-DuBD9CE8.js";import{c as W}from"./index-Umho1SUE.js";import"./tomorrow-CNZkBZJs.js";import"./GlobalContext-DYUf_pwM.js";const M=p(P,[R({maxEntries:300,ttlMs:60*60*1e3}),v({ttlMs:7*24*60*60*1e3}),L({idleMs:160,maxWaitMs:1200,onlyWhenIntersecting:!0,target:"container",axis:"horizontal"}),b({dwellMs:160,maxWaitMs:1e3,onlyWhenIntersecting:!0}),z({maxConcurrent:6}),y({enabled:!0}),C({showWhen:"loading",height:3,color:"#4caf50",showPercentText:!0}),j({type:"shimmer",showWhen:"loading",borderRadius:6,zIndex:1}),E({content:n=>`Horizontal • ${new URL(n.src,window.location.origin).pathname}`,position:"bottom",background:"rgba(0,0,0,0.35)",color:"#fff",showWhen:"loading",zIndex:4}),I({domains:["https://picsum.photos"]}),W({enabled:!0,prefix:"[HL-Demo]"})]),h=w,u=h.Grid,S=h.FixedSizeList;function X(){const n=r.useRef(null),l=r.useRef(null),[g,f]=r.useState(void 0),[i]=r.useState(Array.from({length:180}).map((e,t)=>({id:t,src:`https://picsum.photos/seed/virt-h-${t}/800/600`})));r.useEffect(()=>{var t,s,a,m;const e=l.current;if(e){const d=((t=e==null?void 0:e.getElement)==null?void 0:t.call(e))||((s=e==null?void 0:e.getOuterElement)==null?void 0:s.call(e))||((a=e==null?void 0:e.getRootElement)==null?void 0:a.call(e))||((m=e==null?void 0:e._outerRef)==null?void 0:m.current)||(e==null?void 0:e._outerElement);d instanceof HTMLElement&&f(d)}},[]);const c=({index:e,style:t})=>{const s=i[e];return o.jsx("div",{style:{...t,padding:8},children:o.jsx("div",{style:{position:"relative",width:240,height:160,borderRadius:8,overflow:"hidden",boxShadow:"0 1px 6px rgba(0,0,0,0.1)"},children:o.jsx(M,{src:s.src,loading:"lazy",root:g||n.current||void 0,rootMargin:"240px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})})})};return o.jsx(x,{title:"LazyLoadImagePlugin • 水平虚拟列表示例（react-window）",description:"结合 react-window 的水平虚拟列表，优化横向滚动图片加载",children:o.jsx("div",{style:{border:"1px solid #eee",borderRadius:8,overflow:"hidden"},children:u?o.jsx(u,{cellComponent:({columnIndex:e,style:t})=>o.jsx(c,{index:e,style:t}),columnCount:i.length,columnWidth:256,rowCount:1,rowHeight:220,gridRef:l,cellProps:{items:i},style:{height:220,width:960}}):o.jsx(S,{height:220,width:960,itemCount:i.length,itemSize:256,layout:"horizontal",outerRef:n,overscanCount:8,children:c})})})}export{X as default};
