import{j as d}from"./index-CAgh_i44.js";import{D as g}from"./DemoPage-DDy1Lp2W.js";import{w as y}from"./index-BUiUrMm6.js";import{L as p}from"./LazyLoadImageCore-BXC5ZDAL.js";import"./tomorrow-gtxudeWU.js";import"./GlobalContext-DYUf_pwM.js";function f(e,t){const{lqipSrc:n}=t;if(n)return typeof n=="function"?n(e):n}async function w(e){try{const t=new Image;t.crossOrigin="anonymous";const n=new Promise((a,u)=>{t.onload=()=>a(t),t.onerror=u});t.src=e;const r=await n,o=document.createElement("canvas");o.width=Math.max(1,Math.min(16,r.naturalWidth)),o.height=Math.max(1,Math.min(16,r.naturalHeight));const i=o.getContext("2d");if(!i)return;i.drawImage(r,0,0,o.width,o.height);const c=i.getImageData(0,0,o.width,o.height).data;let s=0,h=0,m=0,l=0;for(let a=0;a<c.length;a+=4)s+=c[a],h+=c[a+1],m+=c[a+2],l++;return s=Math.round(s/l),h=Math.round(h/l),m=Math.round(m/l),`rgb(${s}, ${h}, ${m})`}catch{return}}function v(e={}){const t=e.color??"rgba(0,0,0,0.06)";return{name:"dominant-color",version:"1.0.0",config:e,hooks:{onMount:n=>{var o;const r=(o=n.containerRef)==null?void 0:o.current;if(r)try{const i=f(n.src,e);if(i)w(i).then(c=>{try{r.style.background=c||t}catch{}}).catch(()=>{try{r.style.background=t}catch{}});else try{r.style.background=t}catch{}}catch{try{r.style.background=t}catch{}}}}}}const x=y(p,[v({})]);function I(){return d.jsx(g,{title:"DominantColor 插件示例",description:"根据图片主色设置背景，提升过渡观感。",children:d.jsx("div",{style:{width:480,height:300,maxWidth:"100%"},children:d.jsx(x,{src:"https://picsum.photos/seed/dominant-color-demo/800/600",loading:"lazy",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})})})}export{I as default};
