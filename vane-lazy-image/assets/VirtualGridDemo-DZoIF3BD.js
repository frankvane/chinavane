import{R as i,j as o}from"./index-C0E0sUJ6.js";import{R as p}from"./react-window-BXFKetsh.js";import{D as R}from"./DemoPage-DjGyO8DL.js";import{w as y}from"./index-BUsnPGUY.js";import{c as P}from"./FetchLoaderPlugin-TVanieTR.js";import{L as v}from"./LazyLoadImageCore-BPNS9GwS.js";import{c as C}from"./index-B5UHMOeD.js";import{c as b}from"./index-BgL7gFsr.js";import{c as j}from"./index-pPKGznM1.js";import{c as E}from"./index-WRK_IPD5.js";import{c as I}from"./index-BSqgw6fK.js";import{c as W}from"./index-PuxTKO9u.js";import{c as L}from"./index-DHk8s8hy.js";import{c as M}from"./index-Bh64Msh2.js";import{c as S}from"./index-DuBD9CE8.js";import{c as z}from"./index-Umho1SUE.js";import"./tomorrow-CNZkBZJs.js";import"./GlobalContext-DYUf_pwM.js";const D=y(v,[C({maxEntries:300,ttlMs:60*60*1e3}),b({ttlMs:7*24*60*60*1e3}),j({idleMs:160,maxWaitMs:1200,onlyWhenIntersecting:!0,target:"container",axis:"both"}),E({dwellMs:140,maxWaitMs:900,onlyWhenIntersecting:!0}),I({maxConcurrent:6}),P({enabled:!0}),W({showWhen:"loading",height:3,color:"#2196f3",showPercentText:!0}),L({type:"shimmer",showWhen:"loading",borderRadius:6,zIndex:1}),M({content:s=>`Grid • ${new URL(s.src,window.location.origin).pathname}`,position:"bottom",background:"rgba(0,0,0,0.35)",color:"#fff",showWhen:"loading",zIndex:4}),S({domains:["https://picsum.photos"]}),z({enabled:!0,prefix:"[GRID-Demo]"})]),f=p,g=f.Grid,G=f.FixedSizeGrid;function Z(){const s=i.useRef(null),m=i.useRef(null),[w,x]=i.useState(void 0),n=4,c=60,[d]=i.useState(Array.from({length:n*c}).map((e,t)=>({id:t,src:`https://picsum.photos/seed/virt-g-${t}/800/600`})));i.useEffect(()=>{var t,r,l,a;const e=m.current;if(e){const h=((t=e==null?void 0:e.getElement)==null?void 0:t.call(e))||((r=e==null?void 0:e.getOuterElement)==null?void 0:r.call(e))||((l=e==null?void 0:e.getRootElement)==null?void 0:l.call(e))||((a=e==null?void 0:e._outerRef)==null?void 0:a.current)||(e==null?void 0:e._outerElement);h instanceof HTMLElement&&x(h)}},[]);const u=({columnIndex:e,rowIndex:t,style:r})=>{const l=t*n+e,a=d[l];return o.jsx("div",{style:{...r,padding:8},children:o.jsx("div",{style:{position:"relative",width:"100%",height:"100%",borderRadius:8,overflow:"hidden",boxShadow:"0 1px 6px rgba(0,0,0,0.1)"},children:o.jsx(D,{src:a.src,loading:"lazy",root:w||s.current||void 0,rootMargin:"240px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})})})};return o.jsx(R,{title:"LazyLoadImagePlugin • 双向网格虚拟滚动示例（react-window）",description:"结合 react-window 的双向网格虚拟滚动，优化大量图片加载性能",children:o.jsx("div",{style:{border:"1px solid #eee",borderRadius:8,overflow:"hidden"},children:g?o.jsx(g,{cellComponent:({columnIndex:e,rowIndex:t,style:r})=>o.jsx(u,{columnIndex:e,rowIndex:t,style:r}),columnCount:n,columnWidth:240,rowCount:c,rowHeight:200,gridRef:m,cellProps:{items:d,cols:n,rows:c},style:{height:640,width:960}}):o.jsx(G,{height:640,width:960,columnCount:n,columnWidth:240,rowCount:c,rowHeight:200,outerRef:s,overscanColumnsCount:2,overscanRowsCount:4,children:u})})})}export{Z as default};
