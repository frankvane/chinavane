import{j as e,r as u}from"./index-CAgh_i44.js";import{D as T}from"./DemoPage-DDy1Lp2W.js";import{L as f}from"./LazyLoadImageCore-BXC5ZDAL.js";import{w as b}from"./index-BUiUrMm6.js";import"./tomorrow-gtxudeWU.js";import"./GlobalContext-DYUf_pwM.js";function k(r,i){const o=document.createElement("canvas"),s=o.getContext("2d");if(!s)return[];const a=.1;o.width=r.naturalWidth*a,o.height=r.naturalHeight*a,s.drawImage(r,0,0,o.width,o.height);try{const n=s.getImageData(0,0,o.width,o.height).data,h=new Map;for(let l=0;l<n.length;l+=4*10){const d=n[l],m=n[l+1],x=n[l+2];if(n[l+3]<128||d>240&&m>240&&x>240||d<15&&m<15&&x<15)continue;const S=Math.round(d/32)*32,w=Math.round(m/32)*32,R=Math.round(x/32)*32,p=`rgb(${S}, ${w}, ${R})`;h.set(p,(h.get(p)||0)+1)}return Array.from(h.entries()).sort((l,d)=>d[1]-l[1]).slice(0,i).map(([l])=>l)}catch(c){return console.error("Failed to extract colors (å¯èƒ½æ˜¯è·¨åŸŸé—®é¢˜):",c),["rgb(255, 99, 71)","rgb(70, 130, 180)","rgb(60, 179, 113)","rgb(255, 215, 0)","rgb(238, 130, 238)"].slice(0,i)}}function I(r){const i=r.match(/\d+/g);if(!i)return r;const[o,s,a]=i.map(Number);return`#${((1<<24)+(o<<16)+(s<<8)+a).toString(16).slice(1)}`}const z=({config:r,context:i})=>{const{maxColors:o=5,showPalette:s=!0,position:a="bottom",onColorSelect:c,swatchSize:n=32,interactive:h=!0,style:l={},showColorCode:d=!1,gap:m=8}=r,[x,C]=u.useState([]),[S,w]=u.useState(null),[R,p]=u.useState(null);if(u.useEffect(()=>{var j;const t=(j=i.imageRef)==null?void 0:j.current;if(t)if(t.complete&&t.naturalWidth>0){const g=k(t,o);C(g)}else{const g=()=>{const y=k(t,o);C(y)};return t.addEventListener("load",g),()=>t.removeEventListener("load",g)}},[i.imageRef,o]),!s||x.length===0)return null;const B=t=>{h&&(w(t),c==null||c(t))},L={...{bottom:{position:"absolute",bottom:"10px",left:"10px",right:"10px"},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"bottom-center":{position:"absolute",bottom:"10px",left:"50%",transform:"translateX(-50%)"}}[a],display:"flex",alignItems:"center",gap:`${m}px`,padding:"8px",backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"8px",boxShadow:"0 2px 12px rgba(0,0,0,0.15)",zIndex:10,animation:"colorSwatchFadeIn 0.4s ease-out",...l};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:L,children:x.map((t,j)=>{const g=S===t,y=R===t,P={width:`${n}px`,height:`${n}px`,backgroundColor:t,borderRadius:"50%",cursor:h?"pointer":"default",border:g?"3px solid #333":"2px solid rgba(0,0,0,0.1)",boxShadow:y?"0 4px 12px rgba(0,0,0,0.3)":"0 2px 6px rgba(0,0,0,0.15)",transform:y?"scale(1.15)":"scale(1)",transition:"all 0.2s ease",position:"relative"};return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:P,onClick:()=>B(t),onMouseEnter:()=>p(t),onMouseLeave:()=>p(null),title:I(t)}),d&&e.jsx("div",{style:{fontSize:"10px",marginTop:"4px",color:"#666",fontFamily:"monospace"},children:I(t)})]},j)})}),e.jsx("style",{children:`
        @keyframes colorSwatchFadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})};function v(r){return{name:"color-swatch",version:"1.0.0",config:r,dependencies:[],hooks:{renderOverlay:i=>{var s;if(!i.imageState.isLoaded||!((s=i.imageRef)!=null&&s.current))return null;const o=i.config||r;return e.jsx(z,{config:o,context:i})}}}}const W=()=>{const[r,i]=u.useState(""),o=b(f,[v({maxColors:6,showPalette:!0,position:"bottom",interactive:!0,swatchSize:36,onColorSelect:n=>{console.log("é€‰ä¸­é¢œè‰²:",n),i(n)}})]),s=b(f,[v({maxColors:5,showPalette:!0,position:"overlay",interactive:!0,swatchSize:40,gap:10})]),a=b(f,[v({maxColors:5,showPalette:!0,position:"bottom-center",interactive:!0,swatchSize:32,showColorCode:!0,gap:12})]),c=b(f,[v({maxColors:8,showPalette:!0,position:"bottom",interactive:!0,swatchSize:24,gap:6})]);return e.jsxs(T,{title:"ColorSwatch Plugin",description:"é¢œè‰²é€‰æ‹©å™¨æ’ä»¶ - è‡ªåŠ¨æå–å•†å“å›¾ç‰‡çš„ä¸»è¦é¢œè‰²ï¼Œæ”¯æŒäº¤äº’é€‰æ‹©å’Œé¢œè‰²ä»£ç æ˜¾ç¤º",children:[r&&e.jsxs("div",{style:{padding:15,marginBottom:20,backgroundColor:"#e3f2fd",borderRadius:8,borderLeft:"4px solid #2196F3"},children:[e.jsx("strong",{children:"é€‰ä¸­é¢œè‰²:"})," ",r,e.jsx("div",{style:{display:"inline-block",width:20,height:20,backgroundColor:r,marginLeft:10,borderRadius:4,border:"1px solid #ccc",verticalAlign:"middle"}})]}),e.jsxs("div",{style:{marginBottom:40},children:[e.jsx("h3",{style:{marginBottom:10},children:"åº•éƒ¨è‰²æ¿ï¼ˆå¯äº¤äº’ï¼‰"}),e.jsx("p",{style:{fontSize:14,color:"#666",marginBottom:10},children:"ç‚¹å‡»è‰²å—å¯é€‰æ‹©é¢œè‰²"}),e.jsx("div",{style:{position:"relative",display:"inline-block"},children:e.jsx(o,{src:"/100-500x400.jpg",alt:"å•†å“å›¾ç‰‡ - åº•éƒ¨è‰²æ¿",imageStyle:{borderRadius:"8px"}})})]}),e.jsxs("div",{style:{marginBottom:40},children:[e.jsx("h3",{style:{marginBottom:10},children:"å±…ä¸­å åŠ "}),e.jsx("div",{style:{position:"relative",display:"inline-block"},children:e.jsx(s,{src:"/106-500x400.jpg",alt:"å•†å“å›¾ç‰‡ - å±…ä¸­å åŠ ",imageStyle:{borderRadius:"8px"}})})]}),e.jsxs("div",{style:{marginBottom:40},children:[e.jsx("h3",{style:{marginBottom:10},children:"æ˜¾ç¤ºé¢œè‰²ä»£ç "}),e.jsx("div",{style:{position:"relative",display:"inline-block"},children:e.jsx(a,{src:"/116-500x400.jpg",alt:"å•†å“å›¾ç‰‡ - é¢œè‰²ä»£ç ",imageStyle:{borderRadius:"8px"}})})]}),e.jsxs("div",{style:{marginBottom:40},children:[e.jsx("h3",{style:{marginBottom:10},children:"å¤šé¢œè‰²å°è‰²å—"}),e.jsx("div",{style:{position:"relative",display:"inline-block"},children:e.jsx(c,{src:"/129-500x400.jpg",alt:"å•†å“å›¾ç‰‡ - å°è‰²å—",imageStyle:{borderRadius:"8px"}})})]}),e.jsxs("div",{style:{marginTop:30,padding:20,backgroundColor:"#f5f5f5",borderRadius:8},children:[e.jsx("h4",{children:"ğŸ¯ åŠŸèƒ½ç‰¹æ€§"}),e.jsxs("ul",{style:{marginTop:10},children:[e.jsx("li",{children:"âœ… è‡ªåŠ¨æå–å›¾ç‰‡ä¸»è¦é¢œè‰²"}),e.jsx("li",{children:"âœ… æ™ºèƒ½è¿‡æ»¤é»‘ç™½å’Œé€æ˜è‰²"}),e.jsx("li",{children:"âœ… å¯é…ç½®æå–é¢œè‰²æ•°é‡"}),e.jsx("li",{children:"âœ… 3ç§æ˜¾ç¤ºä½ç½®ï¼ˆåº•éƒ¨/å±…ä¸­/åº•éƒ¨å±…ä¸­ï¼‰"}),e.jsx("li",{children:"âœ… äº¤äº’å¼é¢œè‰²é€‰æ‹©"}),e.jsx("li",{children:"âœ… æ˜¾ç¤ºHEXé¢œè‰²ä»£ç "}),e.jsx("li",{children:"âœ… æ‚¬åœæ”¾å¤§æ•ˆæœ"}),e.jsx("li",{children:"âœ… é€‰ä¸­çŠ¶æ€æ ‡è¯†"})]}),e.jsx("h4",{style:{marginTop:20},children:"ğŸ’¡ ä½¿ç”¨åœºæ™¯"}),e.jsxs("ul",{style:{marginTop:10},children:[e.jsx("li",{children:"ğŸ‘— æœè£…å¤šé¢œè‰²é€‰æ‹©"}),e.jsx("li",{children:"ğŸ¨ è‰ºæœ¯å“/è®¾è®¡ä½œå“é…è‰²"}),e.jsx("li",{children:"ğŸª‘ å®¶å…·/è£…é¥°å“é¢œè‰²ç­›é€‰"}),e.jsx("li",{children:"ğŸ‘Ÿ é‹åŒ…é…è‰²é€‰æ‹©"}),e.jsx("li",{children:"ğŸ ç¤¼å“ä¸ªæ€§åŒ–å®šåˆ¶"})]}),e.jsx("h4",{style:{marginTop:20},children:"ğŸ”§ æŠ€æœ¯ç‰¹ç‚¹"}),e.jsxs("ul",{style:{marginTop:10},children:[e.jsx("li",{children:"âš¡ Canvas API é¢œè‰²æå–"}),e.jsx("li",{children:"ğŸ¯ é¢œè‰²é‡åŒ–ç®—æ³•"}),e.jsx("li",{children:"ğŸ“Š æŒ‰å‡ºç°é¢‘ç‡æ’åº"}),e.jsx("li",{children:"ğŸ”„ RGB to HEX è½¬æ¢"}),e.jsx("li",{children:"ğŸ¨ æ™ºèƒ½å»é‡å’Œè¿‡æ»¤"})]}),e.jsxs("div",{style:{marginTop:20,padding:"16px",backgroundColor:"#fff3cd",borderRadius:"8px",borderLeft:"4px solid #ffc107"},children:[e.jsx("h4",{style:{marginTop:0,color:"#856404"},children:"âš ï¸ é‡è¦æç¤ºï¼šè·¨åŸŸé—®é¢˜"}),e.jsxs("p",{style:{margin:"8px 0",color:"#856404",lineHeight:1.6},children:["æœ¬Demoä½¿ç”¨çš„ picsum.photos å›¾ç‰‡",e.jsx("strong",{children:"æ²¡æœ‰ CORS å¤´"}),"ï¼Œå› æ­¤æ— æ³•æå–çœŸå®é¢œè‰²ã€‚",e.jsx("br",{}),"å½“å‰æ˜¾ç¤ºçš„æ˜¯",e.jsx("strong",{children:"é»˜è®¤æ¼”ç¤ºé¢œè‰²"}),"ã€‚"]}),e.jsxs("p",{style:{margin:"8px 0",color:"#856404",lineHeight:1.6},children:[e.jsx("strong",{children:"åœ¨å®é™…ä½¿ç”¨ä¸­"}),"ï¼Œè¯·ç¡®ä¿ï¼š"]}),e.jsxs("ul",{style:{margin:"8px 0 0 0",color:"#856404",lineHeight:1.6},children:[e.jsx("li",{children:"å›¾ç‰‡æœåŠ¡å™¨é…ç½®äº†æ­£ç¡®çš„ CORS å¤´ï¼ˆAccess-Control-Allow-Originï¼‰"}),e.jsx("li",{children:"æˆ–è€…ä½¿ç”¨åŒåŸŸå›¾ç‰‡"}),e.jsx("li",{children:"è¿™æ ·æ’ä»¶æ‰èƒ½æ­£ç¡®æå–å›¾ç‰‡çš„çœŸå®é¢œè‰²"})]})]})]})]})};export{W as default};
