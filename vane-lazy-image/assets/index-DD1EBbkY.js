import{j as l,r as d}from"./index-D8F4DWO3.js";function c(e,r){const{ariaLabel:t}=e;if(t)return typeof t=="function"?t(r):t}const b=({ctx:e,config:r})=>{var a,s,n;const{imageState:t}=e,i=t.isError?((a=r.statusText)==null?void 0:a.error)??"图片加载失败":t.isLoaded?((s=r.statusText)==null?void 0:s.loaded)??"图片加载完成":t.isLoading?((n=r.statusText)==null?void 0:n.loading)??"图片加载中":"图片未加载";return d.useEffect(()=>{var o;const u=(o=e.imageRef)==null?void 0:o.current;if(!(!u||!r.enabled))try{u.setAttribute("aria-busy",t.isLoading?"true":"false")}catch{}},[e.imageRef,r.enabled,t.isLoading]),l.jsx("span",{role:"status","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0},children:i})};function m(e={}){const{enabled:r=!0,decorative:t=!1}=e;return{name:"a11y",version:"1.0.0",config:e,hooks:{onMount:i=>{var s;if(!r)return;const a=(s=i.imageRef)==null?void 0:s.current;if(a)try{t&&(a.setAttribute("aria-hidden","true"),a.setAttribute("alt",""));const n=c(e,i);n&&a.setAttribute("aria-label",n),a.setAttribute("role","img")}catch{}},renderOverlay:i=>r?l.jsx(b,{ctx:i,config:e}):null}}}export{m as c};
