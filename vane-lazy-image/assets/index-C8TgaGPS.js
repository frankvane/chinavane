function u(l={}){const{debounceMs:o=150,onlyWhenIntersecting:a=!0,debug:i=!1}=l;return{name:"viewport-debounce",version:"1.0.0",config:l,hooks:{onEnterViewport:t=>{var s;const e=(s=t.imageRef)==null?void 0:s.current;if(!e)return;const r=Date.now(),n=e.__lliLastEnterTs??0;if(e.__lliLastEnterTs=r,a)clearTimeout(e.__lliEnterTimer),e.__lliEnterTimer=setTimeout(()=>{i&&console.log("[ViewportDebounce] stable enter",t.src),e.dataset.vpStable="true"},o);else if(r-n<o){i&&console.log("[ViewportDebounce] suppressed enter",t.src);return}},onLeaveViewport:t=>{var r;const e=(r=t.imageRef)==null?void 0:r.current;e&&(clearTimeout(e.__lliEnterTimer),e.dataset.vpStable="false",i&&console.log("[ViewportDebounce] leave",t.src))},onUnmount:t=>{var r,n;const e=(r=t.imageRef)==null?void 0:r.current;e&&(clearTimeout(e.__lliEnterTimer),delete e.__lliEnterTimer,delete e.__lliLastEnterTs,(n=e.dataset)==null||delete n.vpStable)}}}}export{u as c};
