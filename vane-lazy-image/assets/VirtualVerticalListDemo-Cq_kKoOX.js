import{R as n,j as o}from"./index-DYgqlTni.js";import{R as w}from"./react-window-BAxrxnTd.js";import{r as x,_ as R,S as y,L as v,E as L,P as p,n as b,a as E,c as j,l as S,d as W,y as M,s as z}from"./index.es-GGdYOdPG.js";import{D as C}from"./DemoPage-D1_mDGmg.js";import"./tomorrow-CqI3LVar.js";const I=x(z,[R({maxEntries:300,ttlMs:60*60*1e3}),y({ttlMs:7*24*60*60*1e3}),v({idleMs:280,maxWaitMs:1e3,onlyWhenIntersecting:!0,target:"container",axis:"vertical"}),L({dwellMs:180,maxWaitMs:1e3,onlyWhenIntersecting:!0}),p({maxConcurrent:4}),b({enabled:!0}),E({showWhen:"loading",height:3,color:"#ff7f50",showPercentText:!0}),j({type:"shimmer",showWhen:"loading",borderRadius:6,zIndex:1}),S({content:s=>`VirtualList • ${new URL(s.src,window.location.origin).pathname}`,position:"bottom",background:"rgba(0,0,0,0.35)",color:"#fff",showWhen:"loading",zIndex:4}),W({domains:["https://picsum.photos"]}),M({enabled:!0,prefix:"[VL-Demo]"})]),u=w,m=u.List,P=u.FixedSizeList;function H(){const s=n.useRef(null),l=n.useRef(null),[g,f]=n.useState(void 0),[r]=n.useState(Array.from({length:300}).map((e,t)=>({id:t,src:`https://picsum.photos/seed/virt-v-${t}/800/600`})));n.useEffect(()=>{var t,i,d,c;const e=l.current;if(e){const h=((t=e==null?void 0:e.getElement)==null?void 0:t.call(e))||((i=e==null?void 0:e.getOuterElement)==null?void 0:i.call(e))||((d=e==null?void 0:e.getRootElement)==null?void 0:d.call(e))||((c=e==null?void 0:e._outerRef)==null?void 0:c.current)||(e==null?void 0:e._outerElement);h instanceof HTMLElement&&f(h)}},[]);const a=({index:e,style:t})=>{const i=r[e];return o.jsx("div",{style:{...t,padding:8},children:o.jsx("div",{style:{position:"relative",width:"100%",height:184,borderRadius:8,overflow:"hidden",boxShadow:"0 1px 6px rgba(0,0,0,0.1)"},children:o.jsx(I,{src:i.src,loading:"lazy",root:g||s.current||void 0,rootMargin:"240px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})})})};return o.jsx(C,{title:"LazyLoadImagePlugin • 垂直虚拟列表示例（react-window）",description:"结合 react-window 的垂直虚拟列表，优化长列表图片加载",children:o.jsx("div",{style:{border:"1px solid #eee",borderRadius:8,overflow:"hidden"},children:m?o.jsx(m,{rowComponent:a,rowCount:r.length,rowHeight:200,rowProps:{items:r},listRef:l,overscanCount:3,style:{height:640,width:960}}):o.jsx(P,{height:640,width:960,itemCount:r.length,itemSize:200,outerRef:s,overscanCount:3,children:a})})})}export{H as default};
