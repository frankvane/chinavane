import{j as o}from"./index-B9PC2ohi.js";import{D as d}from"./DemoPage-DkYR9Y4e.js";import{w as u}from"./index-D07z_aKU.js";import{L as h}from"./LazyLoadImageCore-B-l3-xqi.js";import"./tomorrow-BZAIm09o.js";import"./GlobalContext-DYUf_pwM.js";async function m(){try{const t=navigator;if(t&&typeof t.getBattery=="function"){const e=await t.getBattery();return(e==null?void 0:e.level)??null}}catch{}return null}function f(t,e){try{const r=new URL(t,window.location.href);return r.searchParams.set("w",String(e)),r.searchParams.set("auto","format"),r.searchParams.set("fit","crop"),r.toString()}catch{return t}}function y(t){var e;return!!((e=t.networkInfo)!=null&&e.saveData)}function w(t={}){const{enabled:e=!0,lowBatteryThreshold:r=.2,downgradeWidth:i=640,disablePreconnect:s=!0}=t;return{name:"battery-aware",version:"1.0.0",config:t,hooks:{onLoad:async n=>{if(!e)return;const a=await m(),l=a!==null?a<=r:!1,c=y(n);if(l||c)return f(n.src,i)},transformProps:n=>{if(!e)return n;const a={...n};return a.loading="lazy",s&&(a["data-disable-preconnect"]="true"),a}}}}const g=u(h,[w({lowBatteryThreshold:.3,downgradeWidth:480})]);function j(){return o.jsx(d,{title:"BatteryAware 插件示例",description:"低电量或省流模式时降级图片清晰度并采用懒加载。",children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:16},children:["ba-1","ba-2","ba-3"].map(t=>o.jsx("div",{style:{width:360,height:240},children:o.jsx(g,{src:`https://picsum.photos/seed/${t}/1200/800`,loading:"lazy",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})},t))})})}export{j as default};
