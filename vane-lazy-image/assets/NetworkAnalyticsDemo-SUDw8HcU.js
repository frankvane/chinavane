import{j as s}from"./index-D8F4DWO3.js";import{D as m}from"./DemoPage-Cm4QH0wv.js";import{w as p}from"./index-B42FZQrT.js";import{L as u}from"./LazyLoadImageCore-CJJrIobl.js";import"./tomorrow-CQx5l04T.js";import"./GlobalContext-DYUf_pwM.js";function c(o){try{return new URL(o,typeof window<"u"?window.location.origin:"http://localhost").hostname}catch{return null}}async function h(o,t){try{await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0})}catch{}}const i=new Map,d=100;function a(o,t,e){const n=`${t}:${e.src||""}`,r=Date.now(),l=i.get(n)||0;if(!(r-l<d))if(i.set(n,r),setTimeout(()=>{i.delete(n)},1e3),typeof o.report=="function")try{o.report(t,e)}catch{}else if(o.reportEndpoint)h(o.reportEndpoint,{event:t,...e});else try{console.debug("[LLI][net]",t,e)}catch{}}function w(o={}){return{name:"network-analytics",version:"1.0.0",config:o,hooks:{onMount:t=>{a(o,"mount",{src:t.src,time:Date.now()})},onLoadSuccess:(t,e)=>{const n=o.trackCDN?c(t.src):null;a(o,"load-success",{src:t.src,displaySrc:e,host:n,time:Date.now()})},onLoadError:(t,e)=>{const n=o.trackCDN?c(t.src):null,r=e instanceof Error?e.message:String(e||"unknown");return a(o,"load-error",{src:t.src,message:r,host:n,time:Date.now()}),!1},onUnmount:t=>{a(o,"unmount",{src:t.src,time:Date.now()})}}}}const f=p(u,[w({reportEndpoint:void 0,trackCDN:!0,report:(o,t)=>{console.log("[NetworkAnalytics]",o,t)}})]);function N(){const o=["https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1280&auto=format&fit=crop","https://images.unsplash.com/photo-1502082553048-f009c37129b9?w=1280&auto=format&fit=crop","https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=1280&auto=format&fit=crop"];return s.jsx(m,{title:"NetworkAnalytics 插件示例",description:"在图片生命周期事件中上报信息（控制台可查看）。",children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:12},children:o.map((t,e)=>s.jsx("div",{style:{width:320,height:200},children:s.jsx(f,{src:t,alt:`Analytics ${e+1}`,loading:"lazy",rootMargin:"300px",containerStyle:{width:"100%",height:"100%"},imageStyle:{width:"100%",height:"100%",objectFit:"cover"}})},t+e))})})}export{N as default};
