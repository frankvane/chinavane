import{h as P}from"./index-CNVOlx-d.js";import{f as b,g as T,a as B,b as C,c as L}from"./planStudyHelpers-CQmQDwkq.js";import{E as x,e as u,G as t,I as w,o as d,r as N,Z as A,g as y,j as O,B as V,f,J as p,K as m,v as j,u as E,Y as R,F as M,k as S,S as z,A as $,L as U,c as D}from"./vue-BPmSeTKS.js";import"./dayjs-Bof1u0Bp.js";const H=c=>{try{const l=JSON.stringify(c,null,2),o=new Blob([l],{type:"application/json"}),a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=`学习计划_${c.name}_${b(c.createdAt)}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}catch{alert("导出失败，请重试")}},J=(c,l)=>{try{const o={exportDate:new Date().toISOString(),version:"1.0",plans:c,activePlan:l},a=JSON.stringify(o,null,2),r=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(r),e=document.createElement("a");e.href=s,e.download=`学习计划备份_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(s)}catch{alert("导出失败，请重试")}},G=c=>{const l=document.createElement("input");l.type="file",l.accept=".json",l.multiple=!1,l.onchange=async o=>{const a=o.target.files?.[0];if(a)try{const r=await a.text(),s=JSON.parse(r);let e,n=null;if(s.plans&&Array.isArray(s.plans))e=s.plans,n=s.activePlan||null;else if(s.id&&s.name&&s.dailyTarget&&s.duration&&s.startDate&&s.endDate)e=[s],n=s;else throw new Error("无效的导入文件格式");confirm(`确定要导入 ${e.length} 个学习计划吗？
注意：这将覆盖现有的学习计划数据。`)&&(c(e,n),alert(`成功导入 ${e.length} 个学习计划！`))}catch(r){alert("导入失败："+(r instanceof Error?r.message:"未知错误"))}},l.click()},W=(c,l)=>{try{const o=JSON.parse(c);let a,r=null;if(o.plans&&Array.isArray(o.plans))a=o.plans,r=o.activePlan||null;else if(o.id&&o.name&&o.dailyTarget&&o.duration&&o.startDate&&o.endDate)a=[o],r=o;else throw new Error("无效的导入文件格式");return confirm(`确定要导入 ${a.length} 个学习计划吗？
注意：这将覆盖现有的学习计划数据。`)?(l(a,r),alert(`成功导入 ${a.length} 个学习计划！`),!0):!1}catch(o){return alert("导入失败："+(o instanceof Error?o.message:"未知错误")),!1}},F={class:"text-center mb-6"},I=x({__name:"PlanManageHeader",setup(c){const l=P(),o=()=>{J(l.studyPlans,l.activePlan)},a=()=>{G((s,e)=>{l.importPlans(s,e)})},r=()=>{const s=prompt(`请粘贴学习计划的JSON数据：

支持格式：
1. 单个计划：直接粘贴计划JSON
2. 多个计划：包含plans数组的JSON`);s&&s.trim()&&W(s.trim(),(e,n)=>{l.importPlans(e,n)})};return(s,e)=>(d(),u("div",F,[e[3]||(e[3]=t("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"学习计划管理",-1)),e[4]||(e[4]=t("p",{class:"text-gray-600"},"查看、修改和删除你的学习计划",-1)),t("div",{class:"flex items-center justify-center gap-4 mt-4"},[t("button",{onClick:o,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},e[0]||(e[0]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),w(" 导出所有计划 ",-1)])),t("button",{onClick:a,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},e[1]||(e[1]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})],-1),w(" 导入文件 ",-1)])),t("button",{onClick:r,class:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors"},e[2]||(e[2]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),w(" 导入文本 ",-1)]))])]))}}),K={class:"text-center py-12"},Y=x({__name:"PlanEmptyState",setup(c){return(l,o)=>{const a=N("router-link");return d(),u("div",K,[o[1]||(o[1]=A('<div class="text-gray-400 mb-4"><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">暂无学习计划</h3><p class="text-gray-500 mb-4">创建你的第一个学习计划开始学习吧！</p>',3)),y(a,{to:"/create-plan",class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors"},{default:O(()=>o[0]||(o[0]=[w(" 创建学习计划 ",-1)])),_:1,__:[0]})])}}}),Z={class:"p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white"},q={class:"flex items-start justify-between"},Q={class:"flex-1"},X={class:"text-lg font-semibold text-gray-900 mb-1"},tt={key:0,class:"text-sm text-gray-600 mb-2"},et={class:"flex flex-col gap-1 text-sm text-gray-500"},st={class:"flex items-center"},ot={class:"flex items-center gap-1"},nt={key:0,class:"flex items-center"},lt={key:1,class:"flex items-center"},rt={class:"flex items-center gap-2"},at=["disabled","title"],it={key:1,class:"px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full flex items-center gap-1"},dt=x({__name:"PlanCardHeader",props:{plan:{}},setup(c){const l=c,o=P(),a=V(()=>o.getPlanProcessability(l.plan.id)),r=s=>{a.value?.canSetActive&&o.setActivePlan(s)};return(s,e)=>(d(),u("div",Z,[t("div",q,[t("div",Q,[t("h3",X,p(s.plan.name),1),s.plan.description?(d(),u("p",tt,p(s.plan.description),1)):f("",!0),t("div",et,[t("div",st,[t("span",null,"创建: "+p(m(b)(s.plan.createdAt)),1)]),t("div",ot,[t("span",{class:j(["w-2 h-2 rounded-full",m(T)(s.plan.status)])},null,2),t("span",null,p(m(B)(s.plan.status)),1)]),s.plan.startDate?(d(),u("div",nt,[t("span",null,"开始: "+p(m(b)(new Date(s.plan.startDate))),1)])):f("",!0),s.plan.endDate?(d(),u("div",lt,[t("span",null,"结束: "+p(m(b)(new Date(s.plan.endDate))),1)])):f("",!0)])]),t("div",rt,[m(o).activePlan?.id!==s.plan.id?(d(),u("button",{key:0,onClick:e[0]||(e[0]=n=>r(s.plan)),disabled:!a.value?.canSetActive,class:j(["px-3 py-1 text-xs rounded-full transition-colors flex items-center gap-1",a.value?.canSetActive?"bg-green-600 text-white hover:bg-green-700 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"]),title:a.value?.canSetActive?"设为当前计划":a.value?.statusReason||"无法设为当前计划"},e[1]||(e[1]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),t("span",null,"设为当前",-1)]),10,at)):(d(),u("div",it,e[2]||(e[2]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),t("span",null,"当前计划",-1)])))])])]))}}),ut={class:"p-6 bg-white"},pt={class:"grid grid-cols-2 gap-4 mb-4"},ct={class:"text-center"},gt={class:"text-2xl font-bold text-indigo-600"},mt={class:"text-center"},vt={class:"text-2xl font-bold text-green-600"},ft={class:"mb-4"},xt={class:"flex justify-between text-sm text-gray-600 mb-1"},ht={class:"w-full bg-gray-200 rounded-full h-2"},yt={class:"text-xs text-gray-500 mt-1"},wt={class:"text-sm text-gray-600 mb-4"},bt={class:"flex items-center gap-2"},kt={key:0,class:"mt-1"},_t={class:"text-xs"},$t=x({__name:"PlanCardStats",props:{plan:{}},setup(c){return(l,o)=>(d(),u("div",ut,[t("div",pt,[t("div",ct,[t("div",gt,p(l.plan.dailyTarget),1),o[0]||(o[0]=t("div",{class:"text-xs text-gray-500"},"每日目标",-1))]),t("div",mt,[t("div",vt,p(l.plan.words?.length||0),1),o[1]||(o[1]=t("div",{class:"text-xs text-gray-500"},"总单词数",-1))])]),t("div",ft,[t("div",xt,[o[2]||(o[2]=t("span",null,"学习进度",-1)),t("span",null,p(l.plan.progress.completedWords.length)+"/"+p(l.plan.progress.totalWords),1)]),t("div",ht,[t("div",{class:"bg-indigo-600 h-2 rounded-full transition-all",style:E({width:`${m(C)(l.plan)}%`})},null,4)]),t("div",yt,p(m(C)(l.plan).toFixed(1))+"% 完成 ",1)]),t("div",wt,[t("div",bt,[o[3]||(o[3]=t("span",{class:"font-medium"},"选择模式:",-1)),t("span",null,p(m(L)(l.plan.selectionMode)),1)]),l.plan.selectedGroups&&l.plan.selectedGroups.length>0?(d(),u("div",kt,[o[4]||(o[4]=t("span",{class:"font-medium"},"分组:",-1)),t("span",_t,p(l.plan.selectedGroups.length)+" 个分组",1)])):f("",!0)])]))}}),Ct={class:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200"},Pt={class:"flex justify-center gap-2 mb-3"},jt=["disabled","title"],Mt={key:0,class:"w-8 h-8 bg-gray-100 text-gray-500 rounded flex items-center justify-center",title:"计划已完成"},St={key:1,class:"w-8 h-8 bg-red-100 text-red-500 rounded flex items-center justify-center",title:"计划已过期"},Dt=["title"],Bt={key:0,disabled:"",class:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 px-6 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-3 shadow-lg cursor-not-allowed opacity-90"},Lt={key:1,disabled:"",class:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-4 px-6 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-3 shadow-lg cursor-not-allowed opacity-90"},At={key:2,disabled:"",class:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 px-6 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-3 shadow-lg cursor-not-allowed opacity-90"},Vt={class:"text-lg"},Et={key:4,disabled:"",class:"w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white py-4 px-6 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-3 shadow-lg cursor-not-allowed opacity-90"},zt={class:"text-lg"},Tt=x({__name:"PlanCardActions",props:{plan:{}},emits:["view-details","confirm-delete"],setup(c,{emit:l}){const o=c,a=R(),r=P(),s=V(()=>r.getPlanProcessability(o.plan.id)),e=g=>{_("view-details",g)},n=g=>{r.startEditPlan(g),a.push("/create-plan")},v=g=>{_("confirm-delete",g)},k=g=>{try{r.setActivePlan(g),a.push("/plan-study")}catch{alert("开始学习失败，请重试")}},_=l;return(g,i)=>(d(),u("div",Ct,[t("div",Pt,[t("button",{onClick:i[0]||(i[0]=h=>e(g.plan)),class:"w-8 h-8 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center justify-center",title:"查看详情"},i[5]||(i[5]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])),t("button",{onClick:i[1]||(i[1]=h=>n(g.plan)),disabled:!s.value?.canEdit,class:j(["w-8 h-8 rounded transition-colors flex items-center justify-center",s.value?.canEdit?"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"]),title:s.value?.canEdit?"编辑计划":s.value?.isExpired?"已过期的计划无法编辑":"已完成的计划无法编辑"},i[6]||(i[6]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),10,jt),s.value?.isCompleted?(d(),u("div",Mt,i[7]||(i[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):s.value?.isExpired?(d(),u("div",St,i[8]||(i[8]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))):s.value?.hasStarted?f("",!0):(d(),u("div",{key:2,class:"w-8 h-8 bg-blue-100 text-blue-500 rounded flex items-center justify-center",title:`计划将在${s.value?.daysUntilStart}天后开始`},i[9]||(i[9]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]),8,Dt)),t("button",{onClick:i[2]||(i[2]=h=>m(H)(g.plan)),class:"w-8 h-8 bg-green-500 text-white rounded hover:bg-green-600 transition-colors flex items-center justify-center",title:"导出计划"},i[10]||(i[10]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])),t("button",{onClick:i[3]||(i[3]=h=>v(g.plan)),class:"w-8 h-8 bg-red-500 text-white rounded hover:bg-red-600 transition-colors flex items-center justify-center",title:"删除计划"},i[11]||(i[11]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]))]),s.value?.isCompleted?(d(),u("button",Bt,i[12]||(i[12]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),t("span",{class:"text-lg"},"已完成",-1)]))):s.value?.isExpired?(d(),u("button",Lt,i[13]||(i[13]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("span",{class:"text-lg"},"计划已过期",-1)]))):s.value?.hasStarted?s.value?.canStart?(d(),u("button",{key:3,onClick:i[4]||(i[4]=h=>k(g.plan)),class:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-4 px-6 rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl transform hover:scale-[1.02]"},i[15]||(i[15]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),t("span",{class:"text-lg"},"开始计划学习",-1)]))):(d(),u("button",Et,[i[16]||(i[16]=t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})],-1)),t("span",zt,p(s.value?.statusReason||"无法开始"),1)])):(d(),u("button",At,[i[14]||(i[14]=t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",Vt,p(s.value?.daysUntilStart)+"天后开始",1)]))]))}}),Nt={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 hover:transform hover:scale-[1.02]"},Ot=x({__name:"PlanCard",props:{plan:{}},emits:["view-details","confirm-delete"],setup(c,{emit:l}){const o=s=>{r("view-details",s)},a=s=>{r("confirm-delete",s)},r=l;return(s,e)=>(d(),u("div",Nt,[y(dt,{plan:s.plan},null,8,["plan"]),y($t,{plan:s.plan},null,8,["plan"]),y(Tt,{plan:s.plan,onViewDetails:o,onConfirmDelete:a},null,8,["plan"])]))}}),Rt={class:"p-6 border-b border-gray-200"},Ut={class:"flex items-center justify-between"},Ht={class:"text-xl font-semibold text-gray-900"},Jt={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},Gt={key:0,class:"space-y-6"},Wt={class:"bg-gray-50 rounded-lg p-3"},Ft={class:"grid grid-cols-3 gap-3 text-sm"},It={class:"flex items-center gap-2"},Kt={class:"text-gray-900"},Yt={class:"flex items-center gap-2"},Zt={class:"text-gray-900"},qt={class:"flex items-center gap-2"},Qt={class:"text-gray-900"},Xt={class:"flex items-center gap-2"},te={class:"text-gray-900"},ee={class:"flex items-center gap-2"},se={class:"text-gray-900"},oe={class:"flex items-center gap-2"},ne={class:"text-gray-900"},le={key:0,class:"mt-2 pt-2 border-t border-gray-200"},re={class:"flex items-start gap-2"},ae={class:"text-gray-900"},ie={class:"bg-gray-50 rounded-lg p-3"},de={class:"grid grid-cols-3 gap-3 text-center mb-3"},ue={class:"text-xl font-bold text-indigo-600"},pe={class:"text-xl font-bold text-green-600"},ce={class:"text-xl font-bold text-orange-600"},ge={class:"flex justify-between text-sm text-gray-600 mb-1"},me={class:"w-full bg-gray-200 rounded-full h-2"},ve={key:0},fe={class:"grid grid-cols-2 gap-2"},xe={key:1},he={class:"bg-gray-50 rounded-lg p-4 max-h-40 overflow-y-auto"},ye={class:"grid grid-cols-3 gap-2"},we=x({__name:"PlanDetailModal",props:{show:{type:Boolean},plan:{}},emits:["close"],setup(c,{emit:l}){const o=e=>e.progress.wordCompletionStatus?Object.values(e.progress.wordCompletionStatus).filter(n=>n.isCompleted).length:e.progress.completedWords.length||0,a=e=>{const n=o(e);return Math.max(0,e.progress.totalWords-n)},r=()=>{s("close")},s=l;return(e,n)=>e.show?(d(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:r},[t("div",{class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",onClick:n[0]||(n[0]=z(()=>{},["stop"]))},[t("div",Rt,[t("div",Ut,[t("h2",Ht,p(e.plan?.name),1),t("button",{onClick:r,class:"text-gray-400 hover:text-gray-600"},n[1]||(n[1]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),t("div",Jt,[e.plan?(d(),u("div",Gt,[t("div",null,[n[9]||(n[9]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"基本信息",-1)),t("div",Wt,[t("div",Ft,[t("div",It,[n[2]||(n[2]=t("span",{class:"font-medium text-gray-600"},"名称:",-1)),t("span",Kt,p(e.plan.name),1)]),t("div",Yt,[n[3]||(n[3]=t("span",{class:"font-medium text-gray-600"},"创建:",-1)),t("span",Zt,p(m(b)(e.plan.createdAt)),1)]),t("div",qt,[n[4]||(n[4]=t("span",{class:"font-medium text-gray-600"},"目标:",-1)),t("span",Qt,p(e.plan.dailyTarget)+"词/天",1)]),t("div",Xt,[n[5]||(n[5]=t("span",{class:"font-medium text-gray-600"},"周期:",-1)),t("span",te,p(e.plan.duration)+"天",1)]),t("div",ee,[n[6]||(n[6]=t("span",{class:"font-medium text-gray-600"},"模式:",-1)),t("span",se,p(m(L)(e.plan.selectionMode)),1)]),t("div",oe,[n[7]||(n[7]=t("span",{class:"font-medium text-gray-600"},"状态:",-1)),t("span",ne,p(m(B)(e.plan.status)),1)])]),e.plan.description?(d(),u("div",le,[t("div",re,[n[8]||(n[8]=t("span",{class:"font-medium text-gray-600"},"描述:",-1)),t("span",ae,p(e.plan.description),1)])])):f("",!0)])]),t("div",null,[n[14]||(n[14]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"学习进度",-1)),t("div",ie,[t("div",de,[t("div",null,[t("div",ue,p(e.plan.progress.totalWords),1),n[10]||(n[10]=t("div",{class:"text-xs text-gray-600"},"总单词数",-1))]),t("div",null,[t("div",pe,p(o(e.plan)),1),n[11]||(n[11]=t("div",{class:"text-xs text-gray-600"},"已完成",-1))]),t("div",null,[t("div",ce,p(a(e.plan)),1),n[12]||(n[12]=t("div",{class:"text-xs text-gray-600"},"剩余",-1))])]),t("div",ge,[n[13]||(n[13]=t("span",null,"完成进度",-1)),t("span",null,p(m(C)(e.plan).toFixed(1))+"%",1)]),t("div",me,[t("div",{class:"bg-indigo-600 h-2 rounded-full transition-all",style:E({width:`${m(C)(e.plan)}%`})},null,4)])])]),e.plan.selectedGroups&&e.plan.selectedGroups.length>0?(d(),u("div",ve,[n[15]||(n[15]=t("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"选择的分组",-1)),t("div",fe,[(d(!0),u(M,null,S(e.plan.selectedGroups,v=>(d(),u("div",{key:`${v.fileIdx}-${v.groupName}`,class:"bg-gray-50 rounded p-2 text-sm"},p(v.groupName),1))),128))])])):f("",!0),e.plan.progress.wordsToday&&e.plan.progress.wordsToday.length>0?(d(),u("div",xe,[n[16]||(n[16]=t("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"今日学习单词",-1)),t("div",he,[t("div",ye,[(d(!0),u(M,null,S(e.plan.progress.wordsToday,v=>(d(),u("div",{key:v,class:"text-sm text-gray-700 bg-white rounded px-2 py-1"},p(v),1))),128))])])])):f("",!0)])):f("",!0)])])])):f("",!0)}}),be={class:"p-6"},ke={class:"mb-4"},_e={class:"text-sm text-gray-600"},$e={class:"font-medium"},Ce=x({__name:"PlanDeleteModal",props:{show:{type:Boolean},plan:{}},emits:["close","confirm"],setup(c,{emit:l}){const o=()=>{r("close")},a=()=>{r("confirm")},r=l;return(s,e)=>s.show?(d(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o},[t("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:e[0]||(e[0]=z(()=>{},["stop"]))},[t("div",be,[e[3]||(e[3]=A('<div class="flex items-center mb-4"><div class="flex-shrink-0"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="ml-3"><h3 class="text-lg font-medium text-gray-900">确认删除</h3></div></div>',1)),t("div",ke,[t("p",_e,[e[1]||(e[1]=w(' 确定要删除学习计划 "',-1)),t("span",$e,p(s.plan?.name),1),e[2]||(e[2]=w('" 吗？ 此操作无法撤销。 ',-1))])]),t("div",{class:"flex justify-end gap-3"},[t("button",{onClick:o,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors"}," 取消 "),t("button",{onClick:a,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors"}," 删除 ")])])])])):f("",!0)}}),Pe={class:"w-full h-full"},je={class:"w-full px-6"},Me={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Ae=x({name:"PlanManage",__name:"PlanManageView",setup(c){const l=P(),o=$(!1),a=$(!1),r=$(null),s=$(null);U(()=>{l.updateAllPlanStatuses()});const e=g=>{r.value=g,o.value=!0},n=()=>{o.value=!1,r.value=null},v=g=>{s.value=g,a.value=!0},k=()=>{a.value=!1,s.value=null},_=()=>{s.value&&(l.deletePlan(s.value.id),k())};return(g,i)=>(d(),u("div",Pe,[y(I),t("div",je,[m(l).studyPlans.length===0?(d(),D(Y,{key:0})):(d(),u("div",Me,[(d(!0),u(M,null,S(m(l).studyPlans,h=>(d(),D(Ot,{key:h.id,plan:h,onViewDetails:e,onConfirmDelete:v},null,8,["plan"]))),128))]))]),y(we,{show:o.value,plan:r.value,onClose:n},null,8,["show","plan"]),y(Ce,{show:a.value,plan:s.value,onClose:k,onConfirm:_},null,8,["show","plan"])]))}});export{Ae as default};
