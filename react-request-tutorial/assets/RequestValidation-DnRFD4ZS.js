var j=Object.defineProperty;var y=(x,t,r)=>t in x?j(x,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):x[t]=r;var p=(x,t,r)=>y(x,typeof t!="symbol"?t+"":t,r);import{r as c,j as s}from"./index-C7SuDyTR.js";import{C as N}from"./ComponentTemplate-BzrYXZsv.js";class g{constructor(t=[],r=!1){p(this,"rules");p(this,"strictMode");this.rules=t,this.strictMode=r}addRule(t){this.rules.push(t)}removeRule(t){this.rules=this.rules.filter(r=>r.field!==t)}validate(t){const r={},e={};for(const a of this.rules){const n=this.getFieldValue(t,a.field),m=this.validateField(n,a);m.length>0&&(r[a.field]=m)}if(this.strictMode){const a=new Set(this.rules.map(m=>m.field)),n=this.getAllFields(t);for(const m of n)a.has(m)||(e[m]||(e[m]=[]),e[m].push("未定义的字段"))}return{valid:Object.keys(r).length===0,errors:r,warnings:e}}validateField(t,r){const e=[];if(r.type==="required"&&(t==null||t===""))return e.push(r.message||`${r.field} 是必填字段`),e;if(t==null||t==="")return e;switch(r.type){case"email":this.isValidEmail(t)||e.push(r.message||"邮箱格式不正确");break;case"phone":this.isValidPhone(t)||e.push(r.message||"手机号格式不正确");break;case"url":this.isValidUrl(t)||e.push(r.message||"URL格式不正确");break;case"number":const a=Number(t);isNaN(a)?e.push(r.message||"必须是数字"):(r.min!==void 0&&a<r.min&&e.push(`值不能小于 ${r.min}`),r.max!==void 0&&a>r.max&&e.push(`值不能大于 ${r.max}`));break;case"string":typeof t!="string"?e.push(r.message||"必须是字符串"):(r.min!==void 0&&t.length<r.min&&e.push(`长度不能少于 ${r.min} 个字符`),r.max!==void 0&&t.length>r.max&&e.push(`长度不能超过 ${r.max} 个字符`),r.pattern&&!r.pattern.test(t)&&e.push(r.message||"格式不正确"));break;case"array":Array.isArray(t)?(r.min!==void 0&&t.length<r.min&&e.push(`数组长度不能少于 ${r.min}`),r.max!==void 0&&t.length>r.max&&e.push(`数组长度不能超过 ${r.max}`)):e.push(r.message||"必须是数组");break;case"object":(typeof t!="object"||Array.isArray(t))&&e.push(r.message||"必须是对象");break;case"custom":if(r.validator){const n=r.validator(t);n===!1?e.push(r.message||"验证失败"):typeof n=="string"&&e.push(n)}break}return e}getFieldValue(t,r){const e=r.split(".");let a=t;for(const n of e){if(a==null)return;a=a[n]}return a}getAllFields(t,r=""){const e=[];if(typeof t=="object"&&t!==null&&!Array.isArray(t))for(const a in t){const n=r?`${r}.${a}`:a;e.push(n),typeof t[a]=="object"&&t[a]!==null&&e.push(...this.getAllFields(t[a],n))}return e}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}isValidPhone(t){return/^1[3-9]\d{9}$/.test(t)}isValidUrl(t){try{return new URL(t),!0}catch{return!1}}}const v=()=>{const[x]=c.useState(()=>{const l=new g;return l.addRule({field:"name",type:"required"}),l.addRule({field:"name",type:"string",min:2,max:20}),l.addRule({field:"email",type:"required"}),l.addRule({field:"email",type:"email"}),l.addRule({field:"age",type:"number",min:0,max:120}),l.addRule({field:"phone",type:"phone"}),l}),[t,r]=c.useState({name:"",email:"",age:"",phone:""}),[e,a]=c.useState(null),n=c.useCallback((l,i)=>{r(d=>({...d,[l]:i}))},[]),m=c.useCallback(()=>{const l={...t,age:t.age?parseInt(t.age):void 0},i=x.validate(l);a(i)},[x,t]),h=c.useCallback(()=>{r({name:"",email:"",age:"",phone:""}),a(null)},[]);return s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"基础字段验证"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"姓名 *"}),s.jsx("input",{type:"text",value:t.name,onChange:l=>n("name",l.target.value),className:`w-full p-2 border rounded-md ${e!=null&&e.errors.name?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"请输入姓名（2-20个字符）"}),(e==null?void 0:e.errors.name)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:e.errors.name.map((l,i)=>s.jsxs("div",{children:["• ",l]},i))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"邮箱 *"}),s.jsx("input",{type:"email",value:t.email,onChange:l=>n("email",l.target.value),className:`w-full p-2 border rounded-md ${e!=null&&e.errors.email?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"请输入邮箱地址"}),(e==null?void 0:e.errors.email)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:e.errors.email.map((l,i)=>s.jsxs("div",{children:["• ",l]},i))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"年龄"}),s.jsx("input",{type:"number",value:t.age,onChange:l=>n("age",l.target.value),className:`w-full p-2 border rounded-md ${e!=null&&e.errors.age?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"请输入年龄（0-120）"}),(e==null?void 0:e.errors.age)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:e.errors.age.map((l,i)=>s.jsxs("div",{children:["• ",l]},i))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"手机号"}),s.jsx("input",{type:"tel",value:t.phone,onChange:l=>n("phone",l.target.value),className:`w-full p-2 border rounded-md ${e!=null&&e.errors.phone?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"请输入手机号码"}),(e==null?void 0:e.errors.phone)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:e.errors.phone.map((l,i)=>s.jsxs("div",{children:["• ",l]},i))})]})]}),s.jsxs("div",{className:"flex space-x-4 mb-4",children:[s.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"验证数据"}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"重置"})]}),e&&s.jsxs("div",{className:`p-4 rounded-md ${e.valid?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[s.jsxs("div",{className:"font-medium mb-2",children:["验证结果: ",e.valid?"✅ 通过":"❌ 失败"]}),!e.valid&&s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium mb-1",children:"错误详情:"}),Object.entries(e.errors).map(([l,i])=>s.jsxs("div",{className:"mb-1",children:[s.jsxs("span",{className:"font-medium",children:[l,":"]}),s.jsx("ul",{className:"ml-4",children:i.map((d,o)=>s.jsxs("li",{children:["• ",d]},o))})]},l))]})]})]})})};class w{constructor(t){p(this,"schema");this.schema=t}validate(t){const r={};try{this.validateObject(t,this.schema,"",r)}catch(e){r.root=[e instanceof Error?e.message:"验证失败"]}return{valid:Object.keys(r).length===0,errors:r}}validateObject(t,r,e,a){if(r.type==="object"){if(typeof t!="object"||t===null||Array.isArray(t)){this.addError(a,e,"必须是对象");return}if(r.required)for(const n of r.required)n in t||this.addError(a,e?`${e}.${n}`:n,"是必填字段");if(r.properties){for(const[n,m]of Object.entries(r.properties))if(n in t){const h=e?`${e}.${n}`:n;this.validateObject(t[n],m,h,a)}}}else if(r.type==="array"){if(!Array.isArray(t)){this.addError(a,e,"必须是数组");return}r.minItems&&t.length<r.minItems&&this.addError(a,e,`至少需要 ${r.minItems} 个元素`),r.maxItems&&t.length>r.maxItems&&this.addError(a,e,`最多只能有 ${r.maxItems} 个元素`),r.items&&t.forEach((n,m)=>{this.validateObject(n,r.items,`${e}[${m}]`,a)})}else if(r.type==="string"){if(typeof t!="string"){this.addError(a,e,"必须是字符串");return}r.minLength&&t.length<r.minLength&&this.addError(a,e,`长度不能少于 ${r.minLength} 个字符`),r.maxLength&&t.length>r.maxLength&&this.addError(a,e,`长度不能超过 ${r.maxLength} 个字符`),r.pattern&&!new RegExp(r.pattern).test(t)&&this.addError(a,e,"格式不正确")}else if(r.type==="number"){if(typeof t!="number"||isNaN(t)){this.addError(a,e,"必须是数字");return}r.minimum!==void 0&&t<r.minimum&&this.addError(a,e,`不能小于 ${r.minimum}`),r.maximum!==void 0&&t>r.maximum&&this.addError(a,e,`不能大于 ${r.maximum}`)}}addError(t,r,e){t[r]||(t[r]=[]),t[r].push(e)}}const S=()=>{const[x]=c.useState({type:"object",required:["title","author","publishYear"],properties:{title:{type:"string",minLength:1,maxLength:100},author:{type:"object",required:["name"],properties:{name:{type:"string",minLength:2,maxLength:50},email:{type:"string",pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"}}},publishYear:{type:"number",minimum:1900,maximum:2024},tags:{type:"array",minItems:1,maxItems:5,items:{type:"string",minLength:1}}}}),[t]=c.useState(()=>new w(x)),[r,e]=c.useState(`{
  "title": "React 请求管理教程",
  "author": {
    "name": "张三",
    "email": "zhangsan@example.com"
  },
  "publishYear": 2024,
  "tags": ["React", "HTTP", "教程"]
}`),[a,n]=c.useState(null),[m,h]=c.useState(null),l=c.useCallback(()=>{try{const o=JSON.parse(r);h(null);const u=t.validate(o);n(u)}catch(o){h(o instanceof Error?o.message:"JSON 解析失败"),n(null)}},[t,r]),i=c.useCallback(()=>{e(`{
  "title": "",
  "author": {
    "name": "",
    "email": ""
  },
  "publishYear": null,
  "tags": []
}`),n(null),h(null)},[]),d=c.useCallback(o=>{const u={valid:`{
  "title": "React 请求管理教程",
  "author": {
    "name": "张三",
    "email": "zhangsan@example.com"
  },
  "publishYear": 2024,
  "tags": ["React", "HTTP", "教程"]
}`,invalid:`{
  "title": "",
  "author": {
    "name": "A",
    "email": "invalid-email"
  },
  "publishYear": 1800,
  "tags": []
}`,missing:`{
  "title": "缺少必填字段的示例",
  "publishYear": 2024
}`};e(u[o]||u.valid),n(null),h(null)},[]);return s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"JSON Schema 验证"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"JSON 数据"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>d("valid"),className:"px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"有效示例"}),s.jsx("button",{onClick:()=>d("invalid"),className:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"无效示例"}),s.jsx("button",{onClick:()=>d("missing"),className:"px-2 py-1 text-xs bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"缺失字段"})]})]}),s.jsx("textarea",{value:r,onChange:o=>e(o.target.value),className:`w-full h-64 p-3 border rounded-md font-mono text-sm ${m?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"请输入 JSON 数据"}),m&&s.jsxs("div",{className:"mt-2 text-sm text-red-600",children:["JSON 解析错误: ",m]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schema 定义"}),s.jsx("pre",{className:"w-full h-64 p-3 bg-gray-100 border rounded-md text-sm overflow-auto",children:JSON.stringify(x,null,2)})]})]}),s.jsxs("div",{className:"flex space-x-4 mt-4 mb-4",children:[s.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"验证 JSON"}),s.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"重置"})]}),a&&s.jsxs("div",{className:`p-4 rounded-md ${a.valid?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[s.jsxs("div",{className:"font-medium mb-2",children:["验证结果: ",a.valid?"✅ 通过":"❌ 失败"]}),!a.valid&&s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium mb-2",children:"错误详情:"}),Object.entries(a.errors).map(([o,u])=>s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"font-medium",children:[o,":"]}),s.jsx("ul",{className:"ml-4",children:u.map((b,f)=>s.jsxs("li",{children:["• ",b]},f))})]},o))]})]})]})})},k=()=>{const[x]=c.useState(()=>{const i=new g;return i.addRule({field:"username",type:"required"}),i.addRule({field:"username",type:"custom",validator:d=>/^[a-zA-Z0-9_]+$/.test(d)?d.length<3?"用户名长度不能少于3个字符":d.length>20?"用户名长度不能超过20个字符":["admin","root","system"].includes(d.toLowerCase())?"用户名不能使用保留关键字":!0:"用户名只能包含字母、数字和下划线"}),i.addRule({field:"password",type:"required"}),i.addRule({field:"password",type:"custom",validator:d=>d.length<8?"密码长度不能少于8个字符":/(?=.*[a-z])/.test(d)?/(?=.*[A-Z])/.test(d)?/(?=.*\d)/.test(d)?/(?=.*[!@#$%^&*])/.test(d)?!0:"密码必须包含至少一个特殊字符 (!@#$%^&*)":"密码必须包含至少一个数字":"密码必须包含至少一个大写字母":"密码必须包含至少一个小写字母"}),i.addRule({field:"confirmPassword",type:"required"}),i}),[t,r]=c.useState({username:"",password:"",confirmPassword:""}),[e,a]=c.useState(null),n=c.useCallback((i,d)=>{r(o=>({...o,[i]:d}))},[]),m=c.useCallback(()=>{const i=new g;x.rules.forEach(o=>{i.addRule(o)}),i.addRule({field:"confirmPassword",type:"custom",validator:o=>o!==t.password?"两次输入的密码不一致":!0});const d=i.validate(t);a(d)},[x,t]),h=c.useCallback(()=>{r({username:"",password:"",confirmPassword:""}),a(null)},[]),l=c.useMemo(()=>{const{password:i}=t;if(!i)return{level:0,text:"未输入",color:"gray"};let d=0;return i.length>=8&&d++,/(?=.*[a-z])/.test(i)&&d++,/(?=.*[A-Z])/.test(i)&&d++,/(?=.*\d)/.test(i)&&d++,/(?=.*[!@#$%^&*])/.test(i)&&d++,[{level:0,text:"很弱",color:"red"},{level:1,text:"弱",color:"red"},{level:2,text:"一般",color:"yellow"},{level:3,text:"较强",color:"blue"},{level:4,text:"强",color:"green"},{level:5,text:"很强",color:"green"}][d]},[t.password]);return s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"自定义验证规则"}),s.jsxs("div",{className:"space-y-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"用户名 *"}),s.jsx("input",{type:"text",value:t.username,onChange:i=>n("username",i.target.value),className:`w-full p-2 border rounded-md ${e!=null&&e.errors.username?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"3-20个字符，只能包含字母、数字和下划线"}),(e==null?void 0:e.errors.username)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:e.errors.username.map((i,d)=>s.jsxs("div",{children:["• ",i]},d))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"密码 *"}),s.jsx("input",{type:"password",value:t.password,onChange:i=>n("password",i.target.value),className:`w-full p-2 border rounded-md ${e!=null&&e.errors.password?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"至少8个字符，包含大小写字母、数字和特殊字符"}),t.password&&s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"密码强度:"}),s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${l.color==="red"?"bg-red-500":l.color==="yellow"?"bg-yellow-500":l.color==="blue"?"bg-blue-500":l.color==="green"?"bg-green-500":"bg-gray-300"}`,style:{width:`${l.level/5*100}%`}})}),s.jsx("span",{className:`text-sm font-medium ${l.color==="red"?"text-red-600":l.color==="yellow"?"text-yellow-600":l.color==="blue"?"text-blue-600":l.color==="green"?"text-green-600":"text-gray-600"}`,children:l.text})]})}),(e==null?void 0:e.errors.password)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:e.errors.password.map((i,d)=>s.jsxs("div",{children:["• ",i]},d))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"确认密码 *"}),s.jsx("input",{type:"password",value:t.confirmPassword,onChange:i=>n("confirmPassword",i.target.value),className:`w-full p-2 border rounded-md ${e!=null&&e.errors.confirmPassword?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"请再次输入密码"}),(e==null?void 0:e.errors.confirmPassword)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:e.errors.confirmPassword.map((i,d)=>s.jsxs("div",{children:["• ",i]},d))})]})]}),s.jsxs("div",{className:"flex space-x-4 mb-4",children:[s.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"验证数据"}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"重置"})]}),e&&s.jsxs("div",{className:`p-4 rounded-md ${e.valid?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[s.jsxs("div",{className:"font-medium mb-2",children:["验证结果: ",e.valid?"✅ 通过":"❌ 失败"]}),!e.valid&&s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium mb-1",children:"错误详情:"}),Object.entries(e.errors).map(([i,d])=>s.jsxs("div",{className:"mb-1",children:[s.jsxs("span",{className:"font-medium",children:[i,":"]}),s.jsx("ul",{className:"ml-4",children:d.map((o,u)=>s.jsxs("li",{children:["• ",o]},u))})]},i))]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"验证规则说明"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"用户名:"})," ","3-20个字符，只能包含字母、数字和下划线，不能使用保留关键字"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"密码:"})," ","至少8个字符，必须包含大小写字母、数字和特殊字符"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"确认密码:"})," 必须与密码一致"]})]})]})]})})},E=()=>s.jsx(N,{title:"请求验证",description:"学习如何在前端应用中实现完整的请求数据验证机制，包括基础字段验证、JSON Schema验证和自定义验证规则。",overview:[{title:"核心概念",items:["基础字段验证：对必填、类型、长度等基础属性进行校验。","JSON Schema 验证：使用标准化 Schema 描述和校验复杂数据结构。","自定义验证规则：支持业务逻辑和字段间依赖的灵活校验。","验证反馈机制：为用户提供实时、清晰的错误提示。"]},{title:"主要优势",items:["提升用户体验，减少无效请求","保证数据质量和一致性","支持复杂业务场景的灵活扩展","前后端规则同步，降低维护成本"]},{title:"适用场景",items:["表单数据校验和用户输入检查","API 请求参数校验","复杂对象和嵌套结构的数据验证","需要动态规则和多场景复用的业务系统"]},{title:"注意事项",items:["客户端验证不能替代服务端验证","验证规则应易于维护和扩展","错误提示要具体明确，便于用户修正","注意性能优化，避免大表单卡顿"]}],examples:[{title:"基础字段验证",component:s.jsx(v,{}),description:"演示基础字段验证功能，包括必填、类型、长度等常见验证规则的实现。",observationPoints:["输入不同数据观察验证结果变化","查看验证错误信息的显示效果","测试验证规则的执行顺序"],keyPoints:["验证规则的定义和配置","验证结果的数据结构","错误信息的友好显示"],commonTraps:["验证规则过于严格","错误信息不够清晰","前后端验证不一致"],solutions:["设计合理的验证规则","使用防抖优化性能","建立验证规则同步机制"],importantTips:["客户端验证主要用于提升用户体验","验证规则应易于理解和维护","提供清晰的验证状态反馈"]},{title:"JSON Schema 验证",component:s.jsx(S,{}),description:"展示JSON Schema标准化验证，支持复杂数据结构和嵌套验证。",observationPoints:["修改JSON数据观察Schema验证效果","测试不同数据类型的验证","查看嵌套对象的验证处理"],keyPoints:["JSON Schema语法和规则","复杂数据结构验证策略","验证错误的精确定位"],commonTraps:["Schema定义过于复杂","验证错误信息不友好","Schema版本管理不当"],solutions:["使用模块化Schema设计","自定义错误信息格式","建立版本控制机制"],importantTips:["JSON Schema是行业标准","合理使用引用和组合功能","保持Schema的简洁性"]},{title:"自定义验证规则",component:s.jsx(k,{}),description:"演示自定义验证规则的实现，满足特定业务需求的复杂验证逻辑。",observationPoints:["测试自定义验证规则效果","观察复杂业务逻辑验证","查看验证规则的组合使用"],keyPoints:["自定义验证函数设计","验证规则的组合调用","验证上下文的传递"],commonTraps:["自定义逻辑过于复杂","验证规则依赖关系混乱","忽略验证性能优化"],solutions:["使用策略模式组织规则","实现验证缓存机制","建立依赖管理系统"],importantTips:["自定义验证应具有可测试性","考虑验证规则的可扩展性","提供详细的验证文档"]}],tutorial:{concepts:["基础字段验证：对必填、类型、长度等基础属性进行校验。","JSON Schema 验证：标准化描述和校验复杂数据结构。","自定义验证规则：支持业务逻辑和字段间依赖的灵活校验。","验证反馈机制：为用户提供实时、清晰的错误提示。"],steps:["定义验证规则：根据业务需求设计验证条件","创建验证器：实现验证逻辑的执行引擎","添加验证规则：将具体的验证条件注册到验证器","执行验证：调用验证器对数据进行检查","处理验证结果：根据验证结果显示错误或继续流程","集成表单组件：将验证逻辑与UI组件结合"],tips:["使用TypeScript定义验证规则类型，提高代码安全性","为每个验证规则提供清晰的错误消息","使用防抖技术避免频繁的验证执行","建立验证规则的测试用例，确保验证逻辑正确性"]},interview:{questions:[{question:"什么是请求验证？为什么在前端应用中需要请求验证？",answer:"请求验证是确保发送给服务器的数据符合预期格式和业务规则的过程。在前端应用中需要请求验证主要是为了：1）提升用户体验，及时反馈输入错误；2）减少无效请求，降低服务器负载；3）防止恶意数据输入；4）确保数据质量和一致性。虽然前端验证不能替代后端验证，但它是用户体验优化的重要手段。"},{question:"基础字段验证、JSON Schema验证和自定义验证有什么区别？",answer:"基础字段验证适用于简单的单字段验证，如必填、类型、长度等，实现简单但功能有限。JSON Schema验证使用标准化的Schema定义，适用于复杂的数据结构验证，具有良好的互操作性。自定义验证提供最大的灵活性，适用于复杂的业务逻辑验证，如字段间关联验证等。选择验证方案时应考虑数据复杂度、业务需求和维护成本。"},{question:"如何设计一个高效的验证系统？",answer:"设计高效的验证系统需要考虑：1）性能优化：使用防抖技术、验证缓存、按需验证；2）用户体验：提供实时反馈、清晰的错误提示；3）可维护性：模块化验证规则、统一的错误处理；4）扩展性：支持自定义验证规则、插件化架构。同时要确保前后端验证规则的一致性。"},{question:"在实际项目中如何处理复杂的验证场景？",answer:"处理复杂验证场景的策略：1）字段间依赖：建立字段依赖关系，按依赖顺序执行验证；2）条件验证：根据其他字段值动态启用/禁用验证规则；3）验证组合：支持AND/OR逻辑组合多个验证条件；4）性能优化：使用验证缓存、增量验证策略。"},{question:"如何确保验证规则的可维护性和可扩展性？",answer:"确保验证规则的可维护性和可扩展性需要：1）模块化设计：将验证规则拆分为独立的模块；2）统一接口：定义标准的验证规则接口；3）配置化：支持通过配置文件定义验证规则；4）测试覆盖：为每个验证规则编写完整的测试用例；5）文档化：提供详细的验证规则文档和使用示例。"}],keyPoints:["请求验证是保证数据质量的重要手段","前端验证主要用于提升用户体验","选择合适的验证方案需要考虑复杂度和需求","验证系统设计要平衡性能和用户体验","验证规则应具有良好的可测试性和可扩展性"]},bestPractices:{dos:["在所有数据入口进行验证，确保数据质量和安全性。","为每条验证规则提供清晰、具体的错误提示。","合理拆分和复用验证规则，提升可维护性。","为复杂场景设计分层验证和依赖管理。","为验证逻辑编写完整的测试用例。"],donts:["不要仅依赖前端验证，服务端验证不可或缺。","不要让验证规则过于复杂影响性能。","不要提供模糊或无用的错误信息。","不要忽略验证规则的版本管理和同步。"],patterns:["分层验证模式：基础验证、业务验证、安全验证分层实现。","规则链模式：将多个验证规则串联执行，支持短路。","策略模式：根据场景动态选择验证策略。","装饰器模式：为基础验证器添加额外功能。"]}});export{E as default};
