var k=Object.defineProperty;var E=(r,s,t)=>s in r?k(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;var v=(r,s,t)=>E(r,typeof s!="symbol"?s+"":s,t);import{r as c,j as e}from"./index-C7SuDyTR.js";import{C as q}from"./ComponentTemplate-BzrYXZsv.js";class F{constructor(s={}){v(this,"cache");v(this,"config");v(this,"stats");v(this,"cleanupTimer");v(this,"accessOrder");v(this,"frequencyMap");v(this,"insertOrder");this.cache=new Map,this.config={maxSize:100,maxMemory:10*1024*1024,defaultTTL:5*60*1e3,cleanupInterval:60*1e3,strategy:"LRU",...s},this.stats={hits:0,misses:0,size:0,memoryUsage:0,hitRate:0},this.accessOrder=[],this.frequencyMap=new Map,this.insertOrder=[],this.startCleanup()}set(s,t,n,o){const x=Date.now(),f=this.calculateSize(t);this.evictIfNeeded(f);const u={key:s,value:t,timestamp:x,ttl:n||this.config.defaultTTL,accessCount:0,lastAccessed:x,tags:o,size:f};this.cache.has(s)&&this.delete(s),this.cache.set(s,u),this.updateAccessStructures(s,"set"),this.updateStats()}get(s){const t=this.cache.get(s);return t?this.isExpired(t)?(this.delete(s),this.stats.misses++,this.updateHitRate(),null):(t.accessCount++,t.lastAccessed=Date.now(),this.updateAccessStructures(s,"get"),this.stats.hits++,this.updateHitRate(),t.value):(this.stats.misses++,this.updateHitRate(),null)}delete(s){return this.cache.get(s)?(this.cache.delete(s),this.removeFromAccessStructures(s),this.updateStats(),!0):!1}clear(){this.cache.clear(),this.accessOrder=[],this.frequencyMap.clear(),this.insertOrder=[],this.updateStats()}deleteByTag(s){let t=0;for(const[n,o]of this.cache.entries())o.tags&&o.tags.includes(s)&&(this.delete(n),t++);return t}has(s){const t=this.cache.get(s);return t?this.isExpired(t)?(this.delete(s),!1):!0:!1}keys(){const s=[];for(const[t,n]of this.cache.entries())this.isExpired(n)||s.push(t);return s}getStats(){return{...this.stats}}getItemInfo(s){const t=this.cache.get(s);return!t||this.isExpired(t)?null:{...t}}updateConfig(s){if(this.config={...this.config,...s},s.strategy){this.accessOrder=[],this.frequencyMap.clear(),this.insertOrder=[];for(const t of this.cache.keys())this.updateAccessStructures(t,"set")}}cleanup(){let s=0;for(const[t,n]of this.cache.entries())this.isExpired(n)&&(this.delete(t),s++);return s}destroy(){this.cleanupTimer&&clearInterval(this.cleanupTimer),this.clear()}isExpired(s){return s.ttl?Date.now()-s.timestamp>s.ttl:!1}calculateSize(s){try{return JSON.stringify(s).length*2}catch{return 1e3}}updateAccessStructures(s,t){switch(this.config.strategy){case"LRU":const n=this.accessOrder.indexOf(s);n>-1&&this.accessOrder.splice(n,1),this.accessOrder.push(s);break;case"LFU":if(t==="get"){const o=this.frequencyMap.get(s)||0;this.frequencyMap.set(s,o+1)}else this.frequencyMap.set(s,0);break;case"FIFO":t==="set"&&!this.insertOrder.includes(s)&&this.insertOrder.push(s);break}}removeFromAccessStructures(s){const t=this.accessOrder.indexOf(s);t>-1&&this.accessOrder.splice(t,1),this.frequencyMap.delete(s);const n=this.insertOrder.indexOf(s);n>-1&&this.insertOrder.splice(n,1)}evictIfNeeded(s){for(;this.cache.size>=this.config.maxSize;)this.evictOne();for(;this.stats.memoryUsage+s>this.config.maxMemory&&this.evictOne(););}evictOne(){let s=null;switch(this.config.strategy){case"LRU":s=this.accessOrder[0]||null;break;case"LFU":let t=1/0;for(const[n,o]of this.frequencyMap.entries())o<t&&(t=o,s=n);break;case"FIFO":s=this.insertOrder[0]||null;break}return s&&this.cache.has(s)?(this.delete(s),!0):!1}updateStats(){this.stats.size=this.cache.size;let s=0;for(const t of this.cache.values())s+=t.size||0;this.stats.memoryUsage=s,this.updateHitRate()}updateHitRate(){const s=this.stats.hits+this.stats.misses;this.stats.hitRate=s>0?this.stats.hits/s*100:0}startCleanup(){this.cleanupTimer=setInterval(()=>{this.cleanup()},this.config.cleanupInterval)}}const D=()=>{const[r]=c.useState(()=>new F({maxSize:10,defaultTTL:1e4,strategy:"LRU"})),[s,t]=c.useState(""),[n,o]=c.useState(""),[x,f]=c.useState("10000"),[u,p]=c.useState(""),[w,b]=c.useState(null),[d,j]=c.useState(r.getStats()),[g,T]=c.useState([]),h=c.useCallback(()=>{j(r.getStats()),T(r.keys())},[r]),a=c.useCallback(()=>{if(!(!s||!n)){try{const i=JSON.parse(n);r.set(s,i,parseInt(x)||void 0)}catch{r.set(s,n,parseInt(x)||void 0)}h(),t(""),o("")}},[r,s,n,x,h]),m=c.useCallback(()=>{if(!u)return;const i=r.get(u);b(i),h()},[r,u,h]),y=c.useCallback(i=>{r.delete(i),h()},[r,h]),C=c.useCallback(()=>{r.clear(),h(),b(null)},[r,h]),l=c.useCallback(()=>{const i=r.cleanup();alert(`清理了 ${i} 个过期项`),h()},[r,h]);return c.useEffect(()=>{const i=setInterval(h,1e3);return()=>clearInterval(i)},[h]),c.useEffect(()=>()=>r.destroy(),[r]),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"基础缓存操作"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"设置缓存"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:s,onChange:i=>t(i.target.value),placeholder:"缓存键",className:"w-full p-2 border border-gray-300 rounded-md"}),e.jsx("textarea",{value:n,onChange:i=>o(i.target.value),placeholder:"缓存值（支持JSON格式）",className:"w-full p-2 border border-gray-300 rounded-md h-20"}),e.jsx("input",{type:"number",value:x,onChange:i=>f(i.target.value),placeholder:"TTL（毫秒）",className:"w-full p-2 border border-gray-300 rounded-md"}),e.jsx("button",{onClick:a,disabled:!s||!n,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"设置缓存"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"获取缓存"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:u,onChange:i=>p(i.target.value),placeholder:"要获取的缓存键",className:"w-full p-2 border border-gray-300 rounded-md"}),e.jsx("button",{onClick:m,disabled:!u,className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400",children:"获取缓存"}),w!==null&&e.jsxs("div",{className:"p-3 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"获取结果:"}),e.jsx("pre",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:JSON.stringify(w,null,2)})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"缓存统计"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:l,className:"px-3 py-1 text-sm bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"清理过期"}),e.jsx("button",{onClick:C,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"清空缓存"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"缓存项数量:"}),e.jsx("span",{className:"text-sm font-medium",children:d.size})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"内存使用:"}),e.jsxs("span",{className:"text-sm font-medium",children:[(d.memoryUsage/1024).toFixed(2)," KB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"命中次数:"}),e.jsx("span",{className:"text-sm font-medium",children:d.hits})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"未命中次数:"}),e.jsx("span",{className:"text-sm font-medium",children:d.misses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"命中率:"}),e.jsxs("span",{className:"text-sm font-medium",children:[d.hitRate.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"缓存项列表"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md max-h-64 overflow-y-auto",children:g.length===0?e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"暂无缓存项"}):e.jsx("div",{className:"space-y-2",children:g.map(i=>{const N=r.getItemInfo(i);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i}),N&&e.jsxs("div",{className:"text-xs text-gray-500",children:["访问次数: ",N.accessCount," | 剩余时间:"," ",N.ttl?Math.max(0,Math.ceil((N.ttl-(Date.now()-N.timestamp))/1e3)):"∞","s"]})]}),e.jsx("button",{onClick:()=>y(i),className:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"删除"})]},i)})})})]})]})]})]})})},A=()=>{const[r,s]=c.useState("LRU"),[t,n]=c.useState(()=>new F({maxSize:5,strategy:"LRU"})),[o,x]=c.useState([]),[f,u]=c.useState([]),p=c.useCallback(()=>{u(t.keys())},[t]),w=c.useCallback(a=>{t.destroy();const m=new F({maxSize:5,strategy:a});n(m),s(a),x([]),u([])},[t]),b=c.useCallback((a,m,y)=>{x(C=>[...C,{type:a,key:m,value:y,timestamp:Date.now()}])},[]),d=c.useCallback((a,m)=>{t.set(a,m),b("SET",a,m),p()},[t,b,p]),j=c.useCallback(a=>{const m=t.get(a);b("GET",a,m),p()},[t,b,p]),g=c.useCallback(()=>{t.clear(),x([]),p()},[t,p]),T=c.useCallback(()=>{g(),setTimeout(()=>{[()=>d("A","Value A"),()=>d("B","Value B"),()=>d("C","Value C"),()=>d("D","Value D"),()=>d("E","Value E"),()=>j("A"),()=>j("B"),()=>d("F","Value F"),()=>j("C"),()=>d("G","Value G")].forEach((m,y)=>{setTimeout(m,y*1e3)})},100)},[g,d,j]);c.useEffect(()=>()=>t.destroy(),[t]);const h=a=>{switch(a){case"LRU":return"Least Recently Used - 淘汰最近最少使用的项";case"LFU":return"Least Frequently Used - 淘汰使用频率最低的项";case"FIFO":return"First In First Out - 淘汰最先进入的项";default:return""}};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"缓存淘汰策略演示"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"选择淘汰策略"}),e.jsx("div",{className:"space-y-2",children:["LRU","LFU","FIFO"].map(a=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"strategy",value:a,checked:r===a,onChange:()=>w(a),className:"mr-2"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:a})," -"," ",h(a)]})]},a))})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["当前策略: ",r]}),e.jsx("p",{className:"text-sm text-blue-800",children:h(r)}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:"缓存容量限制: 5个项目"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:T,className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"运行演示"}),e.jsx("button",{onClick:g,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"重置"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"手动操作"}),e.jsx("div",{className:"flex space-x-2 mb-2",children:["A","B","C","D","E","F","G"].map(a=>e.jsxs("button",{onClick:()=>d(a,`Value ${a}`),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:["SET ",a]},a))}),e.jsx("div",{className:"flex space-x-2",children:["A","B","C","D","E","F","G"].map(a=>e.jsxs("button",{onClick:()=>j(a),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:["GET ",a]},a))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"当前缓存状态"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md",children:f.length===0?e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"缓存为空"}):e.jsx("div",{className:"space-y-2",children:f.map((a,m)=>{const y=t.getItemInfo(a);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["#",m+1]}),e.jsx("span",{className:"font-medium",children:a})]}),y&&e.jsxs("div",{className:"text-xs text-gray-500",children:["访问: ",y.accessCount,"次"]})]},a)})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"操作历史"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md max-h-64 overflow-y-auto",children:o.length===0?e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"暂无操作"}):e.jsx("div",{className:"space-y-1",children:o.slice(-10).map((a,m)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:`inline-block w-12 text-xs font-medium ${a.type==="SET"?"text-blue-600":"text-green-600"}`,children:a.type}),e.jsxs("span",{className:"text-gray-700",children:[a.key,a.type==="GET"&&a.value===null&&" (未命中)",a.type==="GET"&&a.value!==null&&" (命中)"]})]},m))})})]})]})]})]})})},M=()=>{const[r]=c.useState(()=>new F({maxSize:20,defaultTTL:3e4,strategy:"LRU"})),[s,t]=c.useState("https://jsonplaceholder.typicode.com/posts/1"),[n,o]=c.useState(!1),[x,f]=c.useState(null),[u,p]=c.useState(!1),[w,b]=c.useState([]),[d,j]=c.useState(r.getStats()),g=c.useCallback(()=>{j(r.getStats())},[r]),T=c.useCallback((l,i)=>`http_${l}_${JSON.stringify(i||{})}`,[]),h=c.useCallback(async(l,i)=>{const N=Date.now(),O=T(l,i),I=r.get(O);if(I){const S=Date.now()-N;return b(L=>[...L,{url:l,fromCache:!0,timestamp:Date.now(),duration:S}]),g(),{data:I,fromCache:!0}}try{const L=await(await fetch(l,i)).json();r.set(O,L,void 0,["http","api"]);const R=Date.now()-N;return b(U=>[...U,{url:l,fromCache:!1,timestamp:Date.now(),duration:R}]),g(),{data:L,fromCache:!1}}catch(S){throw S}},[r,T,g]),a=c.useCallback(async()=>{if(s){o(!0),f(null),p(!1);try{const l=await h(s);f(l.data),p(l.fromCache)}catch(l){f({error:l instanceof Error?l.message:"请求失败"}),p(!1)}finally{o(!1)}}},[s,h]),m=c.useCallback(()=>{r.deleteByTag("http"),g()},[r,g]),y=c.useCallback(()=>{b([])},[]),C=["https://jsonplaceholder.typicode.com/posts/1","https://jsonplaceholder.typicode.com/posts/2","https://jsonplaceholder.typicode.com/users/1","https://jsonplaceholder.typicode.com/users/2","https://jsonplaceholder.typicode.com/comments?postId=1"];return c.useEffect(()=>()=>r.destroy(),[r]),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"HTTP 请求缓存"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"请求URL"}),e.jsx("input",{type:"text",value:s,onChange:l=>t(l.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"输入API URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"预设URL"}),e.jsx("div",{className:"space-y-1",children:C.map((l,i)=>e.jsx("button",{onClick:()=>t(l),className:"block w-full text-left px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded border",children:l},i))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:a,disabled:n||!s,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:n?"请求中...":"发起请求"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"清空缓存"})]}),x&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"响应来源:"}),e.jsx("span",{className:`text-sm px-2 py-1 rounded ${u?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:u?"🚀 缓存":"🌐 网络"})]}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-md max-h-64 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:JSON.stringify(x,null,2)})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("h4",{className:"font-medium text-gray-900",children:"缓存统计"})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"缓存项数量:"}),e.jsx("span",{className:"text-sm font-medium",children:d.size})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"命中次数:"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:d.hits})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"未命中次数:"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:d.misses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"命中率:"}),e.jsxs("span",{className:"text-sm font-medium",children:[d.hitRate.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"请求历史"}),e.jsx("button",{onClick:y,className:"px-2 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700",children:"清空历史"})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md max-h-64 overflow-y-auto",children:w.length===0?e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"暂无请求历史"}):e.jsx("div",{className:"space-y-2",children:w.slice(-10).reverse().map((l,i)=>e.jsxs("div",{className:"p-2 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${l.fromCache?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:l.fromCache?"缓存":"网络"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[l.duration,"ms"]})]}),e.jsx("div",{className:"text-xs text-gray-700 truncate",children:l.url}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(l.timestamp).toLocaleTimeString()})]},i))})})]})]})]})]})})},B=()=>e.jsx(q,{title:"请求缓存",description:"学习如何实现和使用请求缓存来提升应用性能，减少不必要的网络请求。",overview:[{title:"核心概念",items:["缓存策略：LRU、LFU、FIFO等不同的缓存淘汰算法","TTL机制：设置缓存项的生存时间，自动清理过期数据","内存管理：监控缓存大小，防止内存泄漏","命中率统计：跟踪缓存效果，优化缓存策略"]},{title:"主要优势",items:["减少网络请求次数，提升响应速度","降低服务器负载，节省带宽资源","改善用户体验，减少等待时间","支持离线访问，增强应用可用性"]},{title:"适用场景",items:["频繁访问的API数据缓存","静态资源和配置信息缓存","用户个人信息和偏好设置","搜索结果和列表数据缓存"]},{title:"注意事项",items:["合理设置缓存大小，避免内存溢出","选择合适的淘汰策略，平衡性能和准确性","处理缓存失效和数据一致性问题","监控缓存命中率，及时调整策略"]}],examples:[{title:"基础缓存操作",component:e.jsx(D,{}),description:"演示缓存的基本操作：设置、获取、删除和清理。",observationPoints:["观察缓存项的添加和删除过程","注意TTL过期时间的自动清理机制","查看缓存统计信息的实时更新","体验不同操作对命中率的影响"],keyPoints:["缓存管理器支持设置最大容量和默认TTL","提供完整的CRUD操作接口","实时统计缓存使用情况和性能指标","支持手动清理过期项和全量清空"],commonTraps:["忘记设置合理的TTL导致数据过期","缓存容量设置过大导致内存问题","没有及时清理过期项造成内存泄漏","缓存键命名不规范导致冲突"],solutions:["根据数据特性设置合适的TTL时间","监控内存使用，动态调整缓存大小","定期执行清理操作，移除过期项","建立统一的缓存键命名规范"],importantTips:["缓存值支持JSON格式的复杂数据结构","TTL时间以毫秒为单位，可以精确控制","缓存统计包括命中率、内存使用等关键指标","支持获取单个缓存项的详细信息"]},{title:"缓存淘汰策略",component:e.jsx(A,{}),description:"比较不同缓存淘汰策略的行为和适用场景。",observationPoints:["观察LRU策略如何淘汰最久未访问的项","注意LFU策略基于访问频率的淘汰机制","查看FIFO策略的先进先出行为","对比不同策略在相同操作下的表现"],keyPoints:["LRU适合时间局部性强的访问模式","LFU适合有明显热点数据的场景","FIFO实现简单，适合均匀访问模式","可以根据业务特点选择最优策略"],commonTraps:["选择不合适的淘汰策略影响命中率","没有考虑数据访问模式的特点","策略切换时没有清理旧缓存","忽略策略对性能的影响"],solutions:["分析业务数据的访问模式特征","通过A/B测试比较不同策略效果","策略变更时重新初始化缓存","监控策略性能，及时调整优化"],importantTips:["缓存容量限制为3项，便于观察淘汰行为","每次操作都会记录在日志中供分析","可以手动添加和访问项目测试策略","运行演示可以看到完整的策略对比"]},{title:"HTTP请求缓存",component:e.jsx(M,{}),description:"实际的HTTP请求缓存应用，展示网络请求的缓存优化。",observationPoints:["观察首次请求的网络延迟","注意缓存命中时的快速响应","查看请求日志中的缓存标识","对比缓存和网络请求的响应时间"],keyPoints:["自动检测缓存，避免重复网络请求","支持多种API端点的并行缓存","提供详细的请求统计和日志","缓存失效时自动发起新请求"],commonTraps:["缓存过期数据导致信息不准确","网络错误时没有合适的降级策略","缓存键冲突导致数据混乱","忽略HTTP状态码的处理"],solutions:["设置合理的缓存过期时间","实现缓存降级和错误处理机制","使用完整URL作为缓存键避免冲突","正确处理各种HTTP响应状态"],importantTips:["使用JSONPlaceholder API进行安全测试","请求日志显示缓存命中状态和响应时间","支持自定义URL测试不同的API端点","缓存统计实时更新命中率等关键指标"]}],tutorial:{concepts:["缓存是将数据临时存储在快速访问介质中的技术","TTL（Time To Live）定义缓存项的生存时间","缓存命中率是衡量缓存效果的重要指标","淘汰策略决定在容量不足时移除哪些缓存项","内存管理确保缓存不会导致内存泄漏"],steps:["创建缓存管理器实例，配置容量和TTL","实现缓存的基本操作：set、get、delete","添加过期检查和自动清理机制","选择合适的淘汰策略（LRU/LFU/FIFO）","集成统计功能，监控缓存性能","在实际请求中应用缓存逻辑","处理缓存失效和错误情况","优化缓存策略，提升命中率"],tips:["根据数据更新频率设置合适的TTL时间","监控内存使用，避免缓存过大","定期分析缓存命中率，优化策略","为不同类型的数据使用不同的缓存配置","实现缓存预热，提前加载热点数据","考虑缓存一致性，处理数据更新场景"]},interview:{questions:[{question:"什么是缓存？为什么需要使用缓存？",answer:"缓存是将数据临时存储在快速访问介质中的技术。使用缓存可以减少网络请求、提升响应速度、降低服务器负载、改善用户体验。特别是对于频繁访问的数据，缓存能显著提升应用性能。"},{question:"常见的缓存淘汰策略有哪些？各自的特点是什么？",answer:"主要有LRU（最近最少使用）、LFU（最少使用频率）、FIFO（先进先出）。LRU适合时间局部性强的场景；LFU适合有明显热点数据的场景；FIFO实现简单，适合均匀访问模式。选择策略需要根据具体的数据访问模式。"},{question:"如何设计一个高效的缓存系统？",answer:"需要考虑：1）合理的容量设计，平衡内存使用和性能；2）选择合适的淘汰策略；3）设置合理的TTL时间；4）实现统计监控功能；5）处理缓存失效和一致性问题；6）提供完整的API接口；7）考虑并发安全和错误处理。"},{question:"缓存的TTL机制是如何工作的？",answer:"TTL（Time To Live）定义缓存项的生存时间。系统会记录每个缓存项的创建时间和TTL值，在访问时检查是否过期。过期的项会被自动删除或标记为无效。可以通过定期清理任务批量移除过期项，也可以在访问时进行懒惰删除。"},{question:"如何处理缓存穿透、缓存击穿和缓存雪崩问题？",answer:"缓存穿透：对不存在的数据也进行缓存（缓存空值）或使用布隆过滤器；缓存击穿：对热点数据设置永不过期或使用互斥锁；缓存雪崩：设置随机的过期时间、实现缓存预热、使用多级缓存架构。"}],keyPoints:["缓存是性能优化的重要手段，但要合理使用","选择淘汰策略需要分析数据访问模式","TTL设置要平衡数据新鲜度和性能","监控缓存命中率等关键指标","处理缓存一致性和并发安全问题","考虑内存管理和资源限制"]},bestPractices:{dos:["根据业务特点选择合适的缓存策略","设置合理的缓存容量和TTL时间","实现完整的统计和监控功能","定期清理过期和无效的缓存项","为不同类型数据使用不同缓存配置","处理缓存失效和错误情况","监控内存使用，防止内存泄漏"],donts:["不要缓存敏感或频繁变化的数据","不要设置过大的缓存容量","不要忽略缓存的内存开销","不要在缓存中存储大量无用数据","不要忽略缓存一致性问题","不要忘记处理缓存失效场景","不要过度依赖缓存而忽略源数据"],patterns:["Cache-Aside模式：应用直接管理缓存","Write-Through模式：写入时同步更新缓存","Write-Behind模式：异步写入，提升性能","Refresh-Ahead模式：主动刷新即将过期的缓存","多级缓存：结合内存缓存和持久化缓存","缓存预热：应用启动时预加载热点数据"]}});export{B as default};
