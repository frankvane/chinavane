var L=Object.defineProperty;var $=(l,t,s)=>t in l?L(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var f=(l,t,s)=>$(l,typeof t!="symbol"?t+"":t,s);import{r as h,j as e}from"./index-C7SuDyTR.js";import{C as D}from"./ComponentTemplate-BzrYXZsv.js";class P{constructor(t={}){f(this,"config");f(this,"events",[]);f(this,"metrics",[]);f(this,"alertRules",new Map);f(this,"alerts",[]);f(this,"listeners",new Set);f(this,"metricsInterval");f(this,"cleanupInterval");f(this,"responseTimes",[]);f(this,"requestCounts",{});f(this,"errorCounts",{});this.config={enabled:!0,sampleRate:1,maxEvents:1e3,maxMetrics:100,alertEnabled:!0,reportInterval:5e3,retentionPeriod:24*60*60*1e3,...t},this.config.enabled&&(this.startMetricsCollection(),this.startCleanup())}recordRequestStart(t,s,n){if(!this.config.enabled||Math.random()>this.config.sampleRate)return"";const i={id:this.generateId(),type:"request",url:t,method:s,timestamp:Date.now(),metadata:n};return this.addEvent(i),this.updateRequestCounts(t,s),this.notifyListeners({type:"event",event:i}),i.id}recordRequestSuccess(t,s,n,i,c){if(!this.config.enabled)return;const d={id:this.generateId(),type:"response",url:t,method:s,status:n,duration:i,timestamp:Date.now(),metadata:c};this.addEvent(d),this.responseTimes.push(i),this.notifyListeners({type:"event",event:d})}recordRequestError(t,s,n,i,c){if(!this.config.enabled)return;const d={id:this.generateId(),type:"error",url:t,method:s,error:n,duration:i,timestamp:Date.now(),metadata:c};this.addEvent(d),this.updateErrorCounts(t,s,n),this.notifyListeners({type:"event",event:d})}recordRequestTimeout(t,s,n,i){if(!this.config.enabled)return;const c={id:this.generateId(),type:"timeout",url:t,method:s,duration:n,timestamp:Date.now(),metadata:i};this.addEvent(c),this.notifyListeners({type:"event",event:c})}recordRequestRetry(t,s,n,i){if(!this.config.enabled)return;const c={id:this.generateId(),type:"retry",url:t,method:s,timestamp:Date.now(),metadata:{...i,retryCount:n}};this.addEvent(c),this.notifyListeners({type:"event",event:c})}recordCacheHit(t,s,n,i){if(!this.config.enabled)return;const c={id:this.generateId(),type:"cache",url:t,method:s,timestamp:Date.now(),metadata:{...i,cacheType:n}};this.addEvent(c),this.notifyListeners({type:"event",event:c})}addAlertRule(t){const s=this.generateId(),n={...t,id:s};return this.alertRules.set(s,n),this.notifyListeners({type:"alert_rule_added",rule:n}),s}removeAlertRule(t){return this.alertRules.delete(t)}updateAlertRule(t,s){const n=this.alertRules.get(t);return n?(this.alertRules.set(t,{...n,...s}),!0):!1}getAlertRules(){return Array.from(this.alertRules.values())}acknowledgeAlert(t){const s=this.alerts.find(n=>n.id===t);return s?(s.acknowledged=!0,this.notifyListeners({type:"alert_acknowledged",alert:s}),!0):!1}resolveAlert(t){const s=this.alerts.find(n=>n.id===t);return s?(s.resolved=!0,this.notifyListeners({type:"alert_resolved",alert:s}),!0):!1}getCurrentMetrics(){return this.calculateMetrics()}getHistoricalMetrics(t=50){return this.metrics.slice(-t)}getEvents(t=100,s){let n=this.events;return s&&(n=n.filter(i=>i.type===s)),n.slice(-t)}getAlerts(t=!1){return this.alerts.filter(s=>s.resolved===t)}getReport(t=60*60*1e3){const n=Date.now()-t,i=this.events.filter(o=>o.timestamp>=n),c={};i.filter(o=>o.type==="error").forEach(o=>{o.error&&(c[o.error]=(c[o.error]||0)+1)});const d=Object.entries(c).map(([o,m])=>({error:o,count:m})).sort((o,m)=>m.count-o.count).slice(0,10),y={};i.forEach(o=>{const m=`${o.method} ${o.url}`;y[m]||(y[m]={count:0,totalTime:0}),y[m].count++,o.duration&&(y[m].totalTime+=o.duration)});const g=Object.entries(y).map(([o,m])=>({url:o,count:m.count,avgTime:m.count>0?m.totalTime/m.count:0})).sort((o,m)=>m.count-o.count).slice(0,10);return{summary:this.calculateMetrics(i),topErrors:d,topEndpoints:g,timeline:this.metrics.filter(o=>o.timestamp>=n).map(o=>({timestamp:o.timestamp,metrics:o}))}}clear(){this.events=[],this.metrics=[],this.alerts=[],this.responseTimes=[],this.requestCounts={},this.errorCounts={},this.notifyListeners({type:"cleared"})}destroy(){this.metricsInterval&&clearInterval(this.metricsInterval),this.cleanupInterval&&clearInterval(this.cleanupInterval),this.listeners.clear()}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}addEvent(t){this.events.push(t),this.events.length>this.config.maxEvents&&(this.events=this.events.slice(-this.config.maxEvents))}updateRequestCounts(t,s){const n=`${s} ${t}`;this.requestCounts[n]=(this.requestCounts[n]||0)+1}updateErrorCounts(t,s,n){const i=`${s} ${t} ${n}`;this.errorCounts[i]=(this.errorCounts[i]||0)+1}calculateMetrics(t){const s=t||this.events,n=Date.now(),i=n-60*1e3,c=n-1e3,d=s.filter(a=>a.timestamp>=i),y=s.filter(a=>a.timestamp>=c),g=d.filter(a=>a.type==="request").length,o=d.filter(a=>a.type==="response"&&a.status&&a.status<400).length,m=d.filter(a=>a.type==="error"||a.type==="response"&&a.status&&a.status>=400).length,v=d.filter(a=>a.type==="timeout").length,w=d.filter(a=>a.type==="retry").length,u=d.filter(a=>a.duration!==void 0).map(a=>a.duration).sort((a,N)=>a-N),x=u.length>0?u.reduce((a,N)=>a+N,0)/u.length:0,C=u.length>0?u[0]:0,E=u.length>0?u[u.length-1]:0,I=Math.floor(u.length*.95),k=Math.floor(u.length*.99),T=u.length>0&&u[I]||0,A=u.length>0&&u[k]||0,M=g>0?m/g*100:0,S=g>0?v/g*100:0,r=g>0?w/g*100:0,p=y.filter(a=>a.type==="request").length,b=g,j=Math.random()*100,R=Math.random()*100,q=Math.random()*100;return{totalRequests:g,successRequests:o,failedRequests:m,pendingRequests:0,avgResponseTime:x,minResponseTime:C,maxResponseTime:E,p95ResponseTime:T,p99ResponseTime:A,errorRate:M,timeoutRate:S,retryRate:r,requestsPerSecond:p,requestsPerMinute:b,memoryUsage:j,cpuUsage:R,networkUsage:q,timestamp:n}}checkAlerts(t){if(this.config.alertEnabled)for(const s of this.alertRules.values()){if(!s.enabled)continue;const n=t[s.metric];let i=!1;switch(s.operator){case">":i=n>s.threshold;break;case"<":i=n<s.threshold;break;case">=":i=n>=s.threshold;break;case"<=":i=n<=s.threshold;break;case"==":i=n===s.threshold;break;case"!=":i=n!==s.threshold;break}if(i&&!this.alerts.find(d=>d.ruleId===s.id&&!d.resolved)){const d={id:this.generateId(),ruleId:s.id,ruleName:s.name,metric:s.metric,value:n,threshold:s.threshold,operator:s.operator,severity:s.severity,message:`${s.name}: ${s.metric} (${n}) ${s.operator} ${s.threshold}`,timestamp:Date.now(),acknowledged:!1,resolved:!1};this.alerts.push(d),this.notifyListeners({type:"alert_triggered",alert:d})}}}startMetricsCollection(){this.metricsInterval=setInterval(()=>{const t=this.calculateMetrics();this.metrics.push(t),this.metrics.length>this.config.maxMetrics&&(this.metrics=this.metrics.slice(-this.config.maxMetrics)),this.checkAlerts(t),this.notifyListeners({type:"metrics",metrics:t})},this.config.reportInterval)}startCleanup(){this.cleanupInterval=setInterval(()=>{const s=Date.now()-this.config.retentionPeriod;this.events=this.events.filter(n=>n.timestamp>=s),this.metrics=this.metrics.filter(n=>n.timestamp>=s),this.alerts=this.alerts.filter(n=>!n.resolved||n.timestamp>=s)},60*1e3)}notifyListeners(t){this.listeners.forEach(s=>{try{s(t)}catch(n){console.error("Error in monitor listener:",n)}})}generateId(){return Math.random().toString(36).substr(2,9)}}const U=()=>{const[l]=h.useState(()=>new P({enabled:!0,sampleRate:1,maxEvents:500,maxMetrics:50,alertEnabled:!0,reportInterval:2e3})),[t,s]=h.useState(l.getCurrentMetrics()),[n,i]=h.useState([]),[c,d]=h.useState([]),[y,g]=h.useState([]),[o,m]=h.useState(!1),[v,w]=h.useState({requestInterval:1e3,errorRate:10,timeoutRate:5}),u=h.useRef(),x=h.useCallback(()=>{s(l.getCurrentMetrics()),i(l.getEvents(20)),d(l.getAlerts()),g(l.getAlertRules())},[l]);h.useEffect(()=>{const r=p=>{(p.type==="metrics"||p.type==="event"||p.type==="alert_triggered")&&x()};return l.addListener(r),x(),()=>{l.removeListener(r)}},[l,x]);const C=h.useCallback(async()=>{const r=["/api/users","/api/posts","/api/comments","/api/products","/api/orders"],p=["GET","POST","PUT","DELETE"],b=r[Math.floor(Math.random()*r.length)],j=p[Math.floor(Math.random()*p.length)];l.recordRequestStart(b,j,{userAgent:"Demo Client",userId:Math.floor(Math.random()*1e3)});const R=Math.random()*2e3+100;await new Promise(a=>setTimeout(a,R));const q=Math.random()*100;if(q<v.timeoutRate)l.recordRequestTimeout(b,j,R,{timeout:5e3});else if(q<v.errorRate){const a=["Network Error","Server Error","Validation Error","Auth Error"],N=a[Math.floor(Math.random()*a.length)];l.recordRequestError(b,j,N,R,{statusCode:500})}else{const a=[200,201,204],N=a[Math.floor(Math.random()*a.length)];l.recordRequestSuccess(b,j,N,R,{responseSize:Math.floor(Math.random()*1e4)}),Math.random()<.3&&l.recordCacheHit(b,j,"memory",{cacheKey:`${j}:${b}`})}},[l,v]),E=h.useCallback(()=>{o?(u.current&&clearInterval(u.current),m(!1)):(u.current=setInterval(()=>{C()},v.requestInterval),m(!0))},[o,C,v.requestInterval]),I=h.useCallback(()=>{const r=[{name:"错误率过高",metric:"errorRate",operator:">",threshold:20,duration:3e4,enabled:!0,severity:"high",description:"当错误率超过20%时触发告警"},{name:"响应时间过长",metric:"avgResponseTime",operator:">",threshold:1e3,duration:6e4,enabled:!0,severity:"medium",description:"当平均响应时间超过1秒时触发告警"},{name:"CPU使用率过高",metric:"cpuUsage",operator:">",threshold:80,duration:12e4,enabled:!0,severity:"critical",description:"当CPU使用率超过80%时触发告警"}],p=r[Math.floor(Math.random()*r.length)];l.addAlertRule(p),x()},[l,x]),k=h.useCallback(r=>{l.acknowledgeAlert(r),x()},[l,x]),T=h.useCallback(r=>{l.resolveAlert(r),x()},[l,x]),A=h.useCallback(()=>{l.clear(),x()},[l,x]);h.useEffect(()=>()=>{u.current&&clearInterval(u.current),l.destroy()},[l]);const M=r=>{switch(r){case"critical":return"text-red-800 bg-red-100";case"high":return"text-red-700 bg-red-50";case"medium":return"text-yellow-700 bg-yellow-50";case"low":return"text-blue-700 bg-blue-50";default:return"text-gray-700 bg-gray-50"}},S=r=>{switch(r){case"request":return"text-blue-600 bg-blue-100";case"response":return"text-green-600 bg-green-100";case"error":return"text-red-600 bg-red-100";case"timeout":return"text-orange-600 bg-orange-100";case"retry":return"text-yellow-600 bg-yellow-100";case"cache":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"请求监控演示"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"模拟配置"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"请求间隔 (ms)"}),e.jsx("input",{type:"number",value:v.requestInterval,onChange:r=>w(p=>({...p,requestInterval:parseInt(r.target.value)||1e3})),min:"100",max:"5000",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"错误率 (%)"}),e.jsx("input",{type:"number",value:v.errorRate,onChange:r=>w(p=>({...p,errorRate:parseInt(r.target.value)||0})),min:"0",max:"100",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"超时率 (%)"}),e.jsx("input",{type:"number",value:v.timeoutRate,onChange:r=>w(p=>({...p,timeoutRate:parseInt(r.target.value)||0})),min:"0",max:"100",className:"w-full p-2 border border-gray-300 rounded-md"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:E,className:`w-full px-4 py-2 rounded-md font-medium ${o?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:o?"停止模拟":"开始模拟"}),e.jsx("button",{onClick:I,className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md font-medium",children:"添加告警规则"}),e.jsx("button",{onClick:A,className:"w-full px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-md font-medium",children:"清空数据"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"实时指标"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"总请求数:"}),e.jsx("span",{className:"font-medium",children:t.totalRequests})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"成功请求:"}),e.jsx("span",{className:"font-medium text-green-600",children:t.successRequests})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"失败请求:"}),e.jsx("span",{className:"font-medium text-red-600",children:t.failedRequests})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"错误率:"}),e.jsxs("span",{className:"font-medium",children:[t.errorRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均响应时间:"}),e.jsxs("span",{className:"font-medium",children:[t.avgResponseTime.toFixed(0),"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"P95响应时间:"}),e.jsxs("span",{className:"font-medium",children:[t.p95ResponseTime.toFixed(0),"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"每秒请求数:"}),e.jsx("span",{className:"font-medium",children:t.requestsPerSecond})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"系统资源"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"CPU使用率:"}),e.jsxs("span",{className:"font-medium",children:[t.cpuUsage.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"内存使用率:"}),e.jsxs("span",{className:"font-medium",children:[t.memoryUsage.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"网络使用率:"}),e.jsxs("span",{className:"font-medium",children:[t.networkUsage.toFixed(1),"%"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["活跃告警 (",c.filter(r=>!r.resolved).length,")"]}),e.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[c.filter(r=>!r.resolved).slice(0,5).map(r=>e.jsxs("div",{className:`p-2 rounded-md text-xs ${M(r.severity)}`,children:[e.jsx("div",{className:"font-medium",children:r.ruleName}),e.jsxs("div",{className:"text-xs opacity-75",children:[r.metric,": ",r.value.toFixed(1)," ",r.operator," ",r.threshold]}),e.jsxs("div",{className:"flex gap-1 mt-1",children:[!r.acknowledged&&e.jsx("button",{onClick:()=>k(r.id),className:"px-2 py-1 bg-white bg-opacity-50 rounded text-xs",children:"确认"}),e.jsx("button",{onClick:()=>T(r.id),className:"px-2 py-1 bg-white bg-opacity-50 rounded text-xs",children:"解决"})]})]},r.id)),c.filter(r=>!r.resolved).length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"暂无活跃告警"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["告警规则 (",y.length,")"]}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[y.slice(0,3).map(r=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded-md text-xs",children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsxs("div",{className:"text-gray-600",children:[r.metric," ",r.operator," ",r.threshold]}),e.jsx("div",{className:`inline-block px-1 rounded text-xs ${M(r.severity)}`,children:r.severity})]},r.id)),y.length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"暂无告警规则"})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["最近事件 (",n.length,")"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:e.jsxs("div",{className:"space-y-2",children:[n.slice(-10).reverse().map(r=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${S(r.type)}`,children:r.type}),e.jsxs("span",{className:"font-medium",children:[r.method," ",r.url]}),r.status&&e.jsxs("span",{className:"text-gray-600",children:["(",r.status,")"]}),r.error&&e.jsxs("span",{className:"text-red-600",children:["- ",r.error]})]}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[r.duration&&`${r.duration.toFixed(0)}ms`,e.jsx("span",{className:"ml-2",children:new Date(r.timestamp).toLocaleTimeString()})]})]},r.id)),n.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:"暂无事件记录"})]})})]})]})})},O=()=>{const l=[{title:"核心概念",items:["指标收集：自动收集请求的各种性能和状态指标","实时监控：持续监控系统状态和性能表现","告警管理：基于规则的自动告警和通知机制","数据分析：提供详细的统计分析和趋势报告"]},{title:"主要优势",items:["全面监控：覆盖请求生命周期的各个阶段","实时反馈：即时发现和响应系统异常","智能告警：基于阈值和规则的智能告警","性能优化：提供性能瓶颈分析和优化建议"]},{title:"适用场景",items:["生产环境：监控生产系统的健康状态","性能调优：识别和解决性能瓶颈","故障排查：快速定位和诊断问题","容量规划：基于历史数据进行容量规划"]},{title:"注意事项",items:["采样率：合理设置采样率避免性能影响","数据存储：控制监控数据的存储量和保留期","告警疲劳：避免过多无效告警影响响应效率","隐私保护：确保敏感数据不被记录和泄露"]}];return e.jsx(D,{title:"请求监控",description:"实现全面的请求监控系统，包括性能指标收集、告警管理和实时监控。",overview:l,examples:[{title:"请求监控演示",component:e.jsx(U,{}),description:"演示完整的请求监控系统，包括指标收集、实时监控、告警管理和数据分析。",observationPoints:["实时显示各种性能和状态指标","自动记录和分类不同类型的事件","基于规则触发告警通知","提供详细的事件历史记录","显示系统资源使用情况"],keyPoints:["监控器自动收集和分析请求数据","支持多种类型的监控指标","实现了完整的告警规则和通知机制","提供实时的性能和状态监控","支持历史数据的查询和分析"],commonTraps:["监控数据过多影响系统性能","告警规则设置不当导致误报","缺少数据清理机制导致内存泄漏","忽略监控数据的隐私保护"],solutions:["使用采样率控制监控数据量","合理设置告警阈值和持续时间","实现自动的数据清理和归档","过滤敏感信息避免隐私泄露"]}],tutorial:{concepts:["监控指标包括性能、错误、吞吐量等多个维度","事件记录提供详细的请求生命周期信息","告警规则基于阈值和条件自动触发","实时监控确保系统状态的及时反馈","数据分析帮助识别趋势和模式"],steps:["设计监控指标和事件的数据结构","实现事件记录和指标计算逻辑","创建监控器和配置管理","实现告警规则和触发机制","添加实时数据收集和更新","实现数据清理和保留策略","添加监控数据的查询接口","实现告警的确认和解决流程","优化性能和资源使用","测试各种监控场景"],tips:["合理设置采样率平衡监控精度和性能","使用异步处理避免阻塞主线程","实现监控数据的批量处理和上报","定期清理过期数据释放内存","监控告警规则的有效性和准确性"]},interview:{questions:[{question:"如何设计一个高效的请求监控系统？",answer:"需要考虑：1) 监控指标的选择和定义；2) 数据收集的采样策略；3) 实时处理和存储机制；4) 告警规则和通知系统；5) 性能影响的最小化；6) 数据的查询和分析接口。"},{question:"监控系统如何处理大量的监控数据？",answer:"通过：1) 采样率控制数据量；2) 异步批量处理；3) 数据聚合和压缩；4) 分级存储策略；5) 定期清理过期数据；6) 使用时间窗口统计；7) 实现数据的分片和分布式存储。"},{question:"如何避免监控告警的误报和漏报？",answer:"需要：1) 合理设置告警阈值；2) 使用多维度指标判断；3) 实现告警的去重和聚合；4) 设置告警的持续时间要求；5) 建立告警的确认和反馈机制；6) 定期评估和调整告警规则。"},{question:"监控系统的性能优化策略有哪些？",answer:"包括：1) 异步数据处理；2) 批量操作减少开销；3) 内存池和对象复用；4) 数据压缩和序列化优化；5) 索引和查询优化；6) 缓存热点数据；7) 分布式处理和负载均衡。"}],keyPoints:["监控系统需要平衡监控精度和系统性能","告警规则应该基于业务需求和历史数据","数据存储和查询需要考虑时间序列特性","监控数据的隐私和安全保护很重要","实时性和准确性是监控系统的核心要求"]},bestPractices:{dos:["设计合理的监控指标体系","使用采样和聚合减少数据量","实现分级告警和通知机制","提供直观的监控仪表板","建立监控数据的备份和恢复","定期评估监控系统的有效性","实现监控数据的自动清理","保护敏感信息不被监控记录"],donts:["不要监控所有请求影响性能","不要设置过于敏感的告警阈值","不要忽略监控数据的存储成本","不要在监控中记录敏感数据","不要让监控系统成为性能瓶颈","不要忽略告警的处理和跟踪","不要缺少监控系统的监控","不要过度依赖单一监控指标"],patterns:["观察者模式：实现事件的发布和订阅","策略模式：支持不同的告警策略","工厂模式：创建不同类型的监控器","装饰器模式：为请求添加监控功能","责任链模式：处理告警的传递和处理","状态模式：管理监控系统的不同状态","模板方法模式：定义监控流程的框架","单例模式：确保监控器的唯一实例"]}})};export{O as default};
