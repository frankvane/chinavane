import{r as t,j as e}from"./index-C7SuDyTR.js";import{C as R}from"./ComponentTemplate-BzrYXZsv.js";const M=()=>{const[m,h]=t.useState([]),[n,s]=t.useState("disconnected"),[o,r]=t.useState([]),[j,y]=t.useState(0),[x,b]=t.useState(0),d=t.useRef(null),l=t.useRef(null),i=t.useRef(null),c=t.useCallback(a=>{r(g=>[...g.slice(-4),`${new Date().toLocaleTimeString()}: ${a}`])},[]),N=t.useCallback(()=>{const a=["info","warning","error","success"],g=["用户登录成功","数据同步完成","系统维护通知","新消息到达","订单状态更新","支付完成确认"];return{id:String(Date.now()+Math.random()),type:a[Math.floor(Math.random()*a.length)],content:g[Math.floor(Math.random()*g.length)],timestamp:Date.now(),sender:`用户${Math.floor(Math.random()*100)}`}},[]),v=t.useCallback(()=>{var a;((a=d.current)==null?void 0:a.readyState)!==WebSocket.OPEN&&(s("connecting"),c("🔄 正在连接消息服务器..."),setTimeout(()=>{s("connected"),c("✅ 消息服务器连接成功"),b(0);const g=setInterval(()=>{if(d.current){const S=N();h(T=>[S,...T.slice(0,9)]),y(T=>T+1),c(`📨 收到${S.type}消息: ${S.content}`)}else clearInterval(g)},2e3+Math.random()*3e3);i.current=setInterval(()=>{d.current&&c("💓 发送心跳包")},1e4),d.current={readyState:WebSocket.OPEN,close:()=>{clearInterval(g),i.current&&clearInterval(i.current),d.current=null,s("disconnected"),c("🔌 连接已断开")}},setTimeout(()=>{d.current&&Math.random()<.3&&(d.current.close(),w())},15e3+Math.random()*1e4)},1e3+Math.random()*2e3))},[c,N]),w=t.useCallback(()=>{if(x>=3){s("error"),c("❌ 重连失败，已达到最大重试次数");return}s("reconnecting"),b(a=>a+1),c(`🔄 尝试重连 (${x+1}/3)`),l.current=setTimeout(()=>{v()},2e3*Math.pow(2,x))},[x,v,c]),u=t.useCallback(()=>{n==="connected"||n==="connecting"||(b(0),v())},[n,v]),p=t.useCallback(()=>{d.current&&d.current.close(),l.current&&clearTimeout(l.current),i.current&&clearInterval(i.current),s("disconnected"),c("🔌 手动断开连接")},[c]),f=t.useCallback(()=>{h([]),y(0),c("🗑️ 消息列表已清空")},[c]);t.useEffect(()=>()=>{d.current&&d.current.close(),l.current&&clearTimeout(l.current),i.current&&clearInterval(i.current)},[]);const k=a=>{switch(a){case"connected":return"text-green-600";case"connecting":case"reconnecting":return"text-yellow-600";case"disconnected":return"text-gray-600";case"error":return"text-red-600";default:return"text-gray-600"}},C=a=>{switch(a){case"connected":return"已连接";case"connecting":return"连接中";case"reconnecting":return"重连中";case"disconnected":return"已断开";case"error":return"连接错误";default:return"未知状态"}};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"消息订阅方案"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:u,disabled:n==="connected"||n==="connecting",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"连接"}),e.jsx("button",{onClick:p,disabled:n==="disconnected",className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"断开"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"清空消息"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["连接状态:"," ",e.jsx("span",{className:k(n),children:C(n)})]}),e.jsxs("div",{children:["消息总数: ",e.jsx("span",{className:"font-medium",children:j})]}),e.jsxs("div",{children:["显示消息: ",e.jsx("span",{className:"font-medium",children:m.length})]}),x>0&&e.jsxs("div",{children:["重连次数:"," ",e.jsxs("span",{className:"font-medium",children:[x,"/3"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"连接日志"}),e.jsx("div",{className:"bg-white p-2 rounded border text-xs space-y-1 max-h-24 overflow-y-auto",children:o.length>0?o.map((a,g)=>e.jsx("div",{className:"text-gray-600",children:a},g)):e.jsx("div",{className:"text-gray-400",children:"暂无日志"})})]})]}),m.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium mb-2",children:"实时消息流"}),e.jsx("div",{className:"bg-white p-3 rounded border max-h-48 overflow-y-auto",children:m.map(a=>e.jsx("div",{className:"flex justify-between items-start py-2 border-b last:border-b-0",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${a.type==="success"?"bg-green-100 text-green-800":a.type==="warning"?"bg-yellow-100 text-yellow-800":a.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:a.type}),e.jsx("span",{className:"text-sm font-medium",children:a.content})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["来自: ",a.sender," |"," ",new Date(a.timestamp).toLocaleTimeString()]})]})},a.id))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded border border-blue-200",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"消息订阅特点"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• 实时双向通信，支持服务器主动推送"}),e.jsx("li",{children:"• 自动重连机制，保证连接稳定性"}),e.jsx("li",{children:"• 心跳检测，及时发现连接异常"}),e.jsx("li",{children:"• 消息队列管理，避免消息丢失"}),e.jsx("li",{children:"• 适合实时性要求高的应用场景"})]})]})]})})},L=()=>{const m=[{solution:"传统封装方案",metrics:{bundleSize:"45KB",initialLoadTime:"1.2s",memoryUsage:"8MB",cacheHitRate:"60%",errorRecoveryTime:"3.5s",developmentTime:"高",maintainability:"中等",testability:"中等"},pros:["完全控制实现细节","无额外依赖","学习成本低","灵活性高"],cons:["需要大量样板代码","错误处理复杂","缓存策略需要手动实现","测试覆盖困难"]},{solution:"React Query",metrics:{bundleSize:"39KB",initialLoadTime:"0.8s",memoryUsage:"6MB",cacheHitRate:"85%",errorRecoveryTime:"1.2s",developmentTime:"低",maintainability:"高",testability:"高"},pros:["智能缓存管理","自动后台刷新","优秀的开发体验","强大的调试工具","减少样板代码"],cons:["学习曲线陡峭","增加包大小","配置复杂度较高"]},{solution:"消息订阅方案",metrics:{bundleSize:"32KB",initialLoadTime:"0.6s",memoryUsage:"4MB",cacheHitRate:"95%",errorRecoveryTime:"0.5s",developmentTime:"中等",maintainability:"高",testability:"中等"},pros:["实时数据更新","服务器主动推送","减少轮询开销","优秀的用户体验"],cons:["连接管理复杂","网络依赖性强","调试困难","不适合所有场景"]}],h=(s,o)=>{switch(o){case"bundleSize":{const r=parseInt(s);return r<35?"text-green-600":r<42?"text-yellow-600":"text-red-600"}case"initialLoadTime":{const r=parseFloat(s);return r<.8?"text-green-600":r<1?"text-yellow-600":"text-red-600"}case"memoryUsage":{const r=parseInt(s);return r<5?"text-green-600":r<7?"text-yellow-600":"text-red-600"}case"cacheHitRate":{const r=parseInt(s);return r>80?"text-green-600":r>70?"text-yellow-600":"text-red-600"}case"errorRecoveryTime":{const r=parseFloat(s);return r<1?"text-green-600":r<2?"text-yellow-600":"text-red-600"}case"developmentTime":return s==="低"?"text-green-600":s==="中等"?"text-yellow-600":"text-red-600";case"maintainability":case"testability":return s==="高"?"text-green-600":s==="中等"?"text-yellow-600":"text-red-600";default:return"text-gray-600"}},n={bundleSize:"包大小",initialLoadTime:"初始加载时间",memoryUsage:"内存使用",cacheHitRate:"缓存命中率",errorRecoveryTime:"错误恢复时间",developmentTime:"开发时间",maintainability:"可维护性",testability:"可测试性"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsx("h4",{className:"font-semibold text-gray-800",children:"性能指标对比"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"指标"}),m.map(s=>e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",children:s.solution},s.solution))]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Object.entries(n).map(([s,o])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-700",children:o}),m.map(r=>e.jsx("td",{className:"px-4 py-3 text-center text-sm",children:e.jsx("span",{className:h(r.metrics[s],s),children:r.metrics[s]})},r.solution))]},s))})]})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:m.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsx("h4",{className:"font-semibold text-gray-800",children:s.solution})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-green-700 mb-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"优势"]}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:s.pros.map((o,r)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"•"}),o]},r))})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-red-700 mb-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),"劣势"]}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:s.cons.map((o,r)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"•"}),o]},r))})]})]})]},s.solution))}),e.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"选择建议"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[e.jsx("h5",{className:"font-medium text-blue-700 mb-2",children:"传统封装方案"}),e.jsx("p",{className:"text-blue-600",children:"适合小型项目、对第三方依赖有严格限制、或需要完全控制实现细节的场景。"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[e.jsx("h5",{className:"font-medium text-blue-700 mb-2",children:"React Query"}),e.jsx("p",{className:"text-blue-600",children:"适合中大型项目、需要复杂缓存策略、或希望提升开发效率的场景。"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[e.jsx("h5",{className:"font-medium text-blue-700 mb-2",children:"消息订阅方案"}),e.jsx("p",{className:"text-blue-600",children:"适合实时性要求高、需要服务器主动推送、或用户交互频繁的场景。"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"图例说明"}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-green-600",children:"优秀"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),e.jsx("span",{className:"text-yellow-600",children:"良好"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),e.jsx("span",{className:"text-red-600",children:"需要改进"})]})]})]})]})},P=()=>{const[m,h]=t.useState([]),[n,s]=t.useState(!1),[o,r]=t.useState(!1),[j,y]=t.useState(null),[x,b]=t.useState([]),[d,l]=t.useState("invalid"),i=t.useRef(null),c=t.useCallback(u=>{b(p=>[...p.slice(-4),`${new Date().toLocaleTimeString()}: ${u}`])},[]),N=t.useCallback(async(u=!1)=>{u||s(!0),r(!0),y(null),c(u?"🔄 后台刷新数据...":"📡 获取用户数据...");try{await new Promise(f=>setTimeout(f,800)),h([{id:1,name:"张三",email:"zhangsan@example.com",status:"active"},{id:2,name:"李四",email:"lisi@example.com",status:"active"},{id:3,name:"王五",email:"wangwu@example.com",status:"inactive"},{id:4,name:"赵六",email:"zhaoliu@example.com",status:"active"}]),l("fresh"),c("✅ 数据获取成功，缓存已更新"),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{l("stale"),c("⚠️ 缓存已过期，数据可能不是最新")},5e3)}catch(p){const f=p instanceof Error?p.message:"未知错误";y(f),c(`❌ 获取失败: ${f}`)}finally{s(!1),r(!1)}},[c]),v=t.useCallback(()=>{c("🔄 手动重新获取数据"),N(!0)},[N,c]),w=t.useCallback(()=>{l("invalid"),c("🗑️ 缓存已失效")},[c]);return t.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"React Query 方案"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N(),disabled:n,className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:n?"加载中...":"获取用户"}),e.jsx("button",{onClick:v,disabled:o,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:o?"刷新中...":"重新获取"}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"失效缓存"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["加载状态:"," ",e.jsx("span",{className:n?"text-yellow-600":"text-green-600",children:n?"初始加载":"就绪"})]}),e.jsxs("div",{children:["获取状态:"," ",e.jsx("span",{className:o?"text-blue-600":"text-gray-600",children:o?"后台获取中":"空闲"})]}),e.jsxs("div",{children:["缓存状态:"," ",e.jsx("span",{className:d==="fresh"?"text-green-600":d==="stale"?"text-yellow-600":"text-red-600",children:d==="fresh"?"新鲜":d==="stale"?"过期":"无效"})]}),e.jsxs("div",{children:["用户数量: ",e.jsx("span",{className:"font-medium",children:m.length})]}),j&&e.jsxs("div",{className:"text-red-600",children:["错误: ",j]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"操作日志"}),e.jsx("div",{className:"bg-white p-2 rounded border text-xs space-y-1 max-h-24 overflow-y-auto",children:x.length>0?x.map((u,p)=>e.jsx("div",{className:"text-gray-600",children:u},p)):e.jsx("div",{className:"text-gray-400",children:"暂无日志"})})]})]}),m.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium mb-2",children:"用户列表 (带缓存)"}),e.jsx("div",{className:"bg-white p-3 rounded border",children:m.map(u=>e.jsxs("div",{className:"flex justify-between items-center py-1 border-b last:border-b-0",children:[e.jsxs("span",{className:"text-sm",children:[u.name," (",u.email,")"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${u.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:u.status==="active"?"活跃":"非活跃"})]},u.id))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded border border-purple-200",children:[e.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"React Query 特点"}),e.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[e.jsx("li",{children:"• 自动缓存管理，智能的缓存策略和失效机制"}),e.jsx("li",{children:"• 后台自动刷新，保持数据最新状态"}),e.jsx("li",{children:"• 区分初始加载和后台获取状态"}),e.jsx("li",{children:"• 提供强大的开发工具和调试功能"}),e.jsx("li",{children:"• 大幅减少样板代码，提升开发体验"})]})]})]})})},I=()=>{const[m,h]=t.useState([]),[n,s]=t.useState(!1),[o,r]=t.useState(null),[j,y]=t.useState([]),x=t.useCallback(l=>{y(i=>[...i.slice(-4),`${new Date().toLocaleTimeString()}: ${l}`])},[]),b=t.useCallback(async()=>{s(!0),r(null),x("📡 开始获取用户数据...");try{await new Promise(i=>setTimeout(i,1e3)),h([{id:1,name:"张三",email:"zhangsan@example.com",status:"active"},{id:2,name:"李四",email:"lisi@example.com",status:"active"},{id:3,name:"王五",email:"wangwu@example.com",status:"inactive"}]),x("✅ 用户数据获取成功")}catch(l){const i=l instanceof Error?l.message:"未知错误";r(i),x(`❌ 获取失败: ${i}`)}finally{s(!1)}},[x]),d=t.useCallback(()=>{x("🔄 手动刷新数据"),b()},[b,x]);return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"传统封装方案"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:b,disabled:n,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:n?"加载中...":"获取用户"}),e.jsx("button",{onClick:d,disabled:n,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"刷新数据"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["状态:"," ",e.jsx("span",{className:n?"text-yellow-600":"text-green-600",children:n?"加载中":"就绪"})]}),e.jsxs("div",{children:["用户数量: ",e.jsx("span",{className:"font-medium",children:m.length})]}),o&&e.jsxs("div",{className:"text-red-600",children:["错误: ",o]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"操作日志"}),e.jsx("div",{className:"bg-white p-2 rounded border text-xs space-y-1 max-h-24 overflow-y-auto",children:j.length>0?j.map((l,i)=>e.jsx("div",{className:"text-gray-600",children:l},i)):e.jsx("div",{className:"text-gray-400",children:"暂无日志"})})]})]}),m.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium mb-2",children:"用户列表 (无缓存)"}),e.jsx("div",{className:"bg-white p-3 rounded border",children:m.map(l=>e.jsxs("div",{className:"flex justify-between items-center py-1 border-b last:border-b-0",children:[e.jsxs("span",{className:"text-sm",children:[l.name," (",l.email,")"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${l.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:l.status==="active"?"活跃":"非活跃"})]},l.id))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 rounded border border-yellow-200",children:[e.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:"传统方案特点"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• 需要手动管理 loading、error、data 状态"}),e.jsx("li",{children:"• 每次请求都会重新获取数据，无缓存机制"}),e.jsx("li",{children:"• 需要手动处理错误和重试逻辑"}),e.jsx("li",{children:"• 代码量较多，样板代码重复"}),e.jsx("li",{children:"• 适合简单场景，学习成本低"})]})]})]})})},D=()=>{const m=[{title:"核心概念",items:["传统封装：基于原生 fetch/axios 的手动封装","React Query：专业的服务器状态管理库","消息订阅：基于 WebSocket 的实时通信方案","性能对比：从多个维度评估方案优劣"]},{title:"主要优势",items:["全面了解不同方案的适用场景","掌握性能优化的关键指标","学会根据项目需求选择技术方案","理解各方案的实现原理和最佳实践"]},{title:"适用场景",items:["传统封装：小型项目、严格依赖控制","React Query：中大型项目、复杂缓存需求","消息订阅：实时应用、高频交互"]},{title:"注意事项",items:["选择方案时要考虑团队技术栈和学习成本","性能指标需要结合具体业务场景分析","不同方案的维护成本和扩展性差异较大","实时方案需要考虑网络稳定性和错误处理"]}],h=[{title:"传统封装方案演示",component:e.jsx(I,{}),description:"展示基于原生 fetch API 的传统封装实现，包含基础的错误处理和状态管理。",observationPoints:["观察手动状态管理的复杂性","注意错误处理的实现方式","查看数据刷新的手动触发机制","体验传统方案的开发流程"],keyPoints:["完全控制请求实现细节","需要手动管理加载状态和错误","无内置缓存机制","样板代码较多但灵活性高"],commonTraps:["忘记处理竞态条件","缺少统一的错误处理机制","重复的状态管理逻辑","内存泄漏风险"],solutions:["使用 AbortController 取消请求","建立统一的错误处理中心","抽象通用的状态管理 Hook","在组件卸载时清理副作用"]},{title:"React Query 方案演示",component:e.jsx(P,{}),description:"展示 React Query 的智能缓存、后台刷新和状态管理能力。",observationPoints:["观察智能缓存的工作机制","注意后台刷新的自动触发","查看不同状态的区分显示","体验开发者友好的 API 设计"],keyPoints:["自动缓存管理和失效策略","区分初始加载和后台刷新状态","内置错误重试和恢复机制","大幅减少样板代码"],commonTraps:["过度依赖默认配置","缓存键设计不合理","忽略网络状态处理","调试工具使用不当"],solutions:["根据业务需求调整缓存策略","设计层次化的缓存键结构","配置网络状态监听","充分利用 DevTools 调试"]},{title:"消息订阅方案演示",component:e.jsx(M,{}),description:"展示基于 WebSocket 的实时消息订阅，包含连接管理和自动重连。",observationPoints:["观察实时消息的推送效果","注意连接状态的变化过程","查看自动重连的工作机制","体验心跳检测的作用"],keyPoints:["实时双向通信能力","自动重连和错误恢复","心跳检测保持连接活跃","适合高实时性要求场景"],commonTraps:["连接管理逻辑复杂","网络异常处理不当","消息队列管理困难","调试和测试复杂"],solutions:["使用状态机管理连接状态","实现指数退避重连策略","建立消息确认和重发机制","提供完善的日志和监控"]},{title:"性能对比分析",component:e.jsx(L,{}),description:"从多个维度对比三种方案的性能表现和适用场景。",observationPoints:["对比不同方案的性能指标","分析各方案的优势和劣势","了解选择建议和适用场景","掌握性能评估的关键指标"],keyPoints:["包大小和加载时间的权衡","缓存命中率的重要性","开发效率与性能的平衡","可维护性和可测试性考量"],importantTips:["绿色指标表示优秀表现","黄色指标表示良好水平","红色指标表示需要改进","选择方案需综合考虑多个因素"]}],n={concepts:["理解不同请求方案的核心原理和设计思想","掌握性能评估的关键指标和测量方法","学会根据项目特点选择合适的技术方案","了解各方案的最佳实践和常见陷阱"],steps:["分析项目需求：确定实时性、缓存、错误处理等要求","评估团队能力：考虑学习成本、维护能力和技术栈匹配度","对比方案特点：从性能、开发效率、可维护性等维度分析","制定实施计划：包括技术选型、架构设计和迁移策略","建立监控体系：设置性能指标监控和错误追踪机制"],tips:["不要盲目追求新技术，选择最适合项目的方案","考虑长期维护成本，不仅仅是初期开发效率","建立完善的测试策略，确保方案的可靠性","保持技术方案的可演进性，为未来扩展留有余地","重视团队培训，确保所有成员都能熟练使用选定方案"]},s={questions:[{question:"如何选择合适的请求处理方案？",answer:"选择请求处理方案需要综合考虑多个因素：1) 项目规模和复杂度 - 小项目可选传统封装，大项目推荐 React Query；2) 实时性要求 - 高实时性场景选择 WebSocket 方案；3) 团队技术栈 - 考虑学习成本和维护能力；4) 性能要求 - 评估包大小、加载时间、内存使用等指标；5) 长期维护 - 考虑可扩展性和可测试性。"},{question:"React Query 相比传统方案有哪些优势？",answer:"React Query 的主要优势包括：1) 智能缓存管理 - 自动缓存、失效和更新策略；2) 后台刷新 - 保持数据新鲜度的同时不影响用户体验；3) 状态管理 - 区分加载、获取、错误等不同状态；4) 开发体验 - 减少样板代码，提供强大的 DevTools；5) 错误处理 - 内置重试机制和错误恢复策略；6) 性能优化 - 请求去重、并行查询等优化。"},{question:"WebSocket 方案适合哪些应用场景？",answer:"WebSocket 方案特别适合以下场景：1) 实时通信 - 聊天应用、在线协作工具；2) 实时数据 - 股票行情、游戏状态、监控面板；3) 推送通知 - 系统通知、消息提醒；4) 协同编辑 - 多人同时编辑文档；5) 实时反馈 - 投票系统、直播互动。但需要注意连接管理的复杂性和网络稳定性要求。"},{question:"如何评估不同方案的性能表现？",answer:"性能评估应从多个维度进行：1) 包大小 - 影响初始加载时间；2) 运行时性能 - 内存使用、CPU 占用；3) 网络效率 - 请求次数、缓存命中率；4) 用户体验 - 响应时间、错误恢复速度；5) 开发效率 - 代码量、开发时间；6) 维护成本 - 可读性、可测试性、可扩展性。需要结合具体业务场景和用户需求进行综合评估。"},{question:"在项目中如何平滑迁移到新的请求方案？",answer:"平滑迁移的策略包括：1) 渐进式迁移 - 从新功能开始使用新方案，逐步迁移现有功能；2) 并行运行 - 新旧方案同时存在，确保稳定性；3) 充分测试 - 建立完善的测试用例，确保功能一致性；4) 性能监控 - 对比迁移前后的性能指标；5) 回滚计划 - 准备应急回滚方案；6) 团队培训 - 确保团队掌握新方案的使用方法。"}],keyPoints:["技术选型需要综合考虑项目需求、团队能力和长期维护","性能评估要从多个维度进行，不能只看单一指标","实时方案虽然用户体验好，但实现复杂度较高","React Query 等专业库能显著提升开发效率和代码质量","迁移策略要考虑风险控制和团队适应性"]},o={dos:["根据项目实际需求选择技术方案，避免过度工程化","建立统一的错误处理和状态管理机制","实施完善的性能监控和错误追踪","为不同方案建立相应的测试策略","保持代码的可读性和可维护性","定期评估和优化现有方案的性能表现"],donts:["不要盲目追求最新技术，忽略项目实际需求","不要在没有充分测试的情况下大规模重构","不要忽视方案的学习成本和维护复杂度","不要在实时性要求不高的场景使用 WebSocket","不要忽略错误处理和边界情况的考虑","不要在性能敏感的场景使用过重的解决方案"],patterns:["适配器模式：为不同的请求方案提供统一的接口","策略模式：根据不同场景选择合适的请求策略","观察者模式：实现数据变化的响应式更新","工厂模式：创建不同类型的请求处理器","装饰器模式：为基础请求功能添加缓存、重试等增强","状态机模式：管理复杂的连接状态和错误恢复"]};return e.jsx(R,{title:"请求方案对比",description:"深入对比分析传统封装、React Query 和消息订阅三种主流请求处理方案",overview:m,examples:h,tutorial:n,interview:s,bestPractices:o})};export{D as default};
