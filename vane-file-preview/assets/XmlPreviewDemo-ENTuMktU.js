import{j as d,r as x}from"./index-CzWX9ff-.js";import{T as Ct,J as Tt,D as kt}from"./index.es-B3-mbkdz.js";import"./tomorrow-Bsv0L0er.js";const C={container:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",fontSize:14,minHeight:40},fileInfo:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"#586069",padding:"4px 8px",background:"#fff",borderRadius:4,border:"1px solid #e1e4e8"},button:{padding:"6px 12px",border:"1px solid #d0d7de",borderRadius:6,background:"#fff",cursor:"pointer",fontSize:12,fontWeight:500,color:"#24292f",display:"flex",alignItems:"center",gap:4,transition:"all 0.2s ease"},buttonHover:{background:"#f6f8fa",borderColor:"#d0d7de"},buttonActive:{background:"#0969da",color:"#fff",borderColor:"#0969da"},buttonDisabled:{background:"#f6f8fa",color:"#8c959f",cursor:"not-allowed",borderColor:"#d0d7de"},iconButton:{padding:"6px",minWidth:32,height:32,boxSizing:"border-box"},separator:{width:1,height:20,background:"#d0d7de",margin:"0 4px"}},At=({onClick:t,children:e,disabled:n=!1,active:r=!1,icon:s,title:i,variant:a="default"})=>{const o=a==="icon"?C.iconButton:C.button,l={...o,...n?C.buttonDisabled:{},...r?C.buttonActive:{}};return d.jsxs("button",{onClick:t,disabled:n,title:i,style:l,onMouseEnter:u=>{!n&&!r&&Object.assign(u.currentTarget.style,o,C.buttonHover)},onMouseLeave:u=>{!n&&!r&&Object.assign(u.currentTarget.style,o)},children:[s&&d.jsx("span",{style:{fontSize:14},children:s}),e]})},St=({name:t,size:e,type:n,icon:r})=>{const s=i=>i<1024?`${i} B`:i<1048576?`${(i/1024).toFixed(1)} KB`:i<1073741824?`${(i/1048576).toFixed(1)} MB`:`${(i/1073741824).toFixed(1)} GB`;return d.jsxs("div",{style:C.fileInfo,children:[r&&d.jsx("span",{style:{fontSize:16},children:r}),d.jsx("span",{style:{fontWeight:500},children:t}),e&&d.jsxs("span",{style:{color:"#656d76"},children:["(",s(e),")"]}),n&&d.jsx("span",{style:{color:"#656d76",fontSize:11},children:n})]})},Ot=()=>d.jsx("div",{style:C.separator}),Pt=({children:t,className:e})=>d.jsx("div",{style:C.container,className:e,children:t}),J=":@",V="#text",X="#comment",_="#cdata",it="DECLARATION_TAG",It="TAG",F={tagColor:"#d43900",textColor:"#333",attributeKeyColor:"#2a7ab0",attributeValueColor:"#008000",separatorColor:"#333",commentColor:"#aaa",cdataColor:"#1d781d",fontFamily:"monospace",lineNumberBackground:"#eee",lineNumberColor:"#222"},$t={lines:{},push:()=>{}},ot=x.createContext($t),Vt=({children:t})=>{const[e,n]=x.useState({}),r=x.useCallback((i,a)=>{n(o=>{var l;return((l=o[i])==null?void 0:l.element)===a.element?o:{...o,[i]:a}})},[]),s=x.useMemo(()=>({lines:e,push:r}),[e,r]);return d.jsx(ot.Provider,{value:s,children:t})},at=()=>x.useContext(ot),Ft={theme:F,collapsible:!1,indentSize:2},lt=x.createContext(Ft),j=()=>x.useContext(lt);function Lt(t,e){return new Array(e*t+1).join(" ")}function ut(t){return typeof t=="string"&&t.includes(`
`)}function Mt(t){return typeof t=="string"?!1:t.length===1&&V in t[0]&&!ut(t[0][V])}function Dt(t){switch(t){case V:case _:case X:return t;default:return t.startsWith("?")?it:It}}function zt(t,e){const n={};for(const r in t)r!==e&&(n[r]=t[r]);return n}function Bt(t){const e=t[J],n=zt(t,J),[[r,s]]=Object.entries(n),i=Dt(r);return{attributes:e,tagKey:r,subElements:s,type:i}}function Rt(t,e){return Object.keys(F).every(n=>t[n]===e[n])}var G={},L={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+n+"]*",s=new RegExp("^"+r+"$"),i=function(o,l){const u=[];let c=l.exec(o);for(;c;){const f=[];f.startIndex=l.lastIndex-c[0].length;const h=c.length;for(let g=0;g<h;g++)f.push(c[g]);u.push(f),c=l.exec(o)}return u},a=function(o){const l=s.exec(o);return!(l===null||typeof l>"u")};t.isExist=function(o){return typeof o<"u"},t.isEmptyObject=function(o){return Object.keys(o).length===0},t.merge=function(o,l,u){if(l){const c=Object.keys(l),f=c.length;for(let h=0;h<f;h++)u==="strict"?o[c[h]]=[l[c[h]]]:o[c[h]]=l[c[h]]}},t.getValue=function(o){return t.isExist(o)?o:""},t.isName=a,t.getAllMatches=i,t.nameRegexp=r})(L);const K=L,Xt={allowBooleanAttributes:!1,unpairedTags:[]};G.validate=function(t,e){e=Object.assign({},Xt,e);const n=[];let r=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=tt(t,i),i.err)return i}else if(t[i]==="<"){let a=i;if(i++,t[i]==="!"){i=et(t,i);continue}else{let o=!1;t[i]==="/"&&(o=!0,i++);let l="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)l+=t[i];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),i--),!Ht(l)){let f;return l.trim().length===0?f="Invalid space after '<'.":f="Tag '"+l+"' is an invalid name.",m("InvalidTag",f,y(t,i))}const u=Kt(t,i);if(u===!1)return m("InvalidAttr","Attributes for '"+l+"' have open quote.",y(t,i));let c=u.value;if(i=u.index,c[c.length-1]==="/"){const f=i-c.length;c=c.substring(0,c.length-1);const h=nt(c,e);if(h===!0)r=!0;else return m(h.err.code,h.err.msg,y(t,f+h.err.line))}else if(o)if(u.tagClosed){if(c.trim().length>0)return m("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",y(t,a));if(n.length===0)return m("InvalidTag","Closing tag '"+l+"' has not been opened.",y(t,a));{const f=n.pop();if(l!==f.tagName){let h=y(t,f.tagStartPos);return m("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+l+"'.",y(t,a))}n.length==0&&(s=!0)}}else return m("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",y(t,i));else{const f=nt(c,e);if(f!==!0)return m(f.err.code,f.err.msg,y(t,i-c.length+f.err.line));if(s===!0)return m("InvalidXml","Multiple possible root nodes found.",y(t,i));e.unpairedTags.indexOf(l)!==-1||n.push({tagName:l,tagStartPos:a}),r=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=et(t,i);continue}else if(t[i+1]==="?"){if(i=tt(t,++i),i.err)return i}else break;else if(t[i]==="&"){const f=Yt(t,i);if(f==-1)return m("InvalidChar","char '&' is not expected.",y(t,i));i=f}else if(s===!0&&!Q(t[i]))return m("InvalidXml","Extra text at the end",y(t,i));t[i]==="<"&&i--}}else{if(Q(t[i]))continue;return m("InvalidChar","char '"+t[i]+"' is not expected.",y(t,i))}if(r){if(n.length==1)return m("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",y(t,n[0].tagStartPos));if(n.length>0)return m("InvalidXml","Invalid '"+JSON.stringify(n.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return m("InvalidXml","Start tag expected.",1);return!0};function Q(t){return t===" "||t==="	"||t===`
`||t==="\r"}function tt(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(n,e-n);if(e>5&&r==="xml")return m("InvalidXml","XML declaration allowed only at the start of the document.",y(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function et(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const _t='"',Gt="'";function Kt(t,e){let n="",r="",s=!1;for(;e<t.length;e++){if(t[e]===_t||t[e]===Gt)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){s=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:s}}const Wt=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function nt(t,e){const n=K.getAllMatches(t,Wt),r={};for(let s=0;s<n.length;s++){if(n[s][1].length===0)return m("InvalidAttr","Attribute '"+n[s][2]+"' has no space in starting.",P(n[s]));if(n[s][3]!==void 0&&n[s][4]===void 0)return m("InvalidAttr","Attribute '"+n[s][2]+"' is without value.",P(n[s]));if(n[s][3]===void 0&&!e.allowBooleanAttributes)return m("InvalidAttr","boolean attribute '"+n[s][2]+"' is not allowed.",P(n[s]));const i=n[s][2];if(!Zt(i))return m("InvalidAttr","Attribute '"+i+"' is an invalid name.",P(n[s]));if(!r.hasOwnProperty(i))r[i]=1;else return m("InvalidAttr","Attribute '"+i+"' is repeated.",P(n[s]))}return!0}function Ut(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function Yt(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Ut(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function m(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Zt(t){return K.isName(t)}function Ht(t){return K.isName(t)}function y(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function P(t){return t.startIndex+t[1].length}var W={};const dt={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t}},qt=function(t){return Object.assign({},dt,t)};W.buildOptions=qt;W.defaultOptions=dt;class Jt{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var Qt=Jt;const te=L;function ee(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,s=!1,i=!1,a="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(s&&se(t,e))e+=7,[entityName,val,e]=ne(t,e+1),val.indexOf("&")===-1&&(n[le(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&ie(t,e))e+=8;else if(s&&oe(t,e))e+=8;else if(s&&ae(t,e))e+=9;else if(re)i=!0;else throw new Error("Invalid DOCTYPE");r++,a=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,r--):r--,r===0)break}else t[e]==="["?s=!0:a+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}function ne(t,e){let n="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)n+=t[e];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=t[e++];let s="";for(;e<t.length&&t[e]!==r;e++)s+=t[e];return[n,s,e]}function re(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function se(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function ie(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function oe(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function ae(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function le(t){if(te.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}var ue=ee;const de=/^[-+]?0x[a-fA-F0-9]+$/,ce=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const fe={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function he(t,e={}){if(e=Object.assign({},fe,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(e.hex&&de.test(n))return Number.parseInt(n,16);{const r=ce.exec(n);if(r){const s=r[1],i=r[2];let a=pe(r[3]);const o=r[4]||r[6];if(!e.leadingZeros&&i.length>0&&s&&n[2]!=="."||!e.leadingZeros&&i.length>0&&!s&&n[1]!==".")return t;{const l=Number(n),u=""+l;return u.search(/[eE]/)!==-1||o?e.eNotation?l:t:n.indexOf(".")!==-1?u==="0"&&a===""||u===a||s&&u==="-"+a?l:t:i?a===u||s+a===u?l:t:n===u||n===s+u?l:t}}else return t}}function pe(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}var ge=he;function xe(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}var ct=xe;const ft=L,I=Qt,me=ue,be=ge,ye=ct;let ve=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=Ne,this.parseXml=Te,this.parseTextData=je,this.resolveNameSpace=Ee,this.buildAttributesMap=Ce,this.isItStopNode=Oe,this.replaceEntitiesValue=Ae,this.readStopNodeData=Ie,this.saveTextToParentTag=Se,this.addChild=ke,this.ignoreAttributesFn=ye(this.options.ignoreAttributes)}};function Ne(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function je(t,e,n,r,s,i,a){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));const o=this.options.tagValueProcessor(e,t,n,s,i);return o==null?t:typeof o!=typeof t||o!==t?o:this.options.trimValues?R(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?R(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Ee(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const we=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Ce(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const r=ft.getAllMatches(t,we),s=r.length,i={};for(let a=0;a<s;a++){const o=this.resolveNameSpace(r[a][1]);if(this.ignoreAttributesFn(o,e))continue;let l=r[a][4],u=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const c=this.options.attributeValueProcessor(o,l,e);c==null?i[u]=l:typeof c!=typeof l||c!==l?i[u]=c:i[u]=R(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const a={};return a[this.options.attributesGroupName]=i,a}return i}}const Te=function(t){t=t.replace(/\r\n?/g,`
`);const e=new I("!xml");let n=e,r="",s="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const a=A(t,">",i,"Closing Tag is not closed.");let o=t.substring(i+2,a).trim();if(this.options.removeNSPrefix){const c=o.indexOf(":");c!==-1&&(o=o.substr(c+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(r=this.saveTextToParentTag(r,n,s));const l=s.substring(s.lastIndexOf(".")+1);if(o&&this.options.unpairedTags.indexOf(o)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let u=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(u=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=s.lastIndexOf("."),s=s.substring(0,u),n=this.tagsNodeStack.pop(),r="",i=a}else if(t[i+1]==="?"){let a=B(t,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const o=new I(a.tagName);o.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(o[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(n,o,s)}i=a.closeIndex+1}else if(t.substr(i+1,3)==="!--"){const a=A(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const o=t.substring(i+4,a-2);r=this.saveTextToParentTag(r,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}i=a}else if(t.substr(i+1,2)==="!D"){const a=me(t,i);this.docTypeEntities=a.entities,i=a.i}else if(t.substr(i+1,2)==="!["){const a=A(t,"]]>",i,"CDATA is not closed.")-2,o=t.substring(i+9,a);r=this.saveTextToParentTag(r,n,s);let l=this.parseTextData(o,n.tagname,s,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,l),i=a+2}else{let a=B(t,i,this.options.removeNSPrefix),o=a.tagName;const l=a.rawTagName;let u=a.tagExp,c=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,s,!1));const h=n;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),o!==e.tagname&&(s+=s?"."+o:o),this.isItStopNode(this.options.stopNodes,s,o)){let g="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)o[o.length-1]==="/"?(o=o.substr(0,o.length-1),s=s.substr(0,s.length-1),u=o):u=u.substr(0,u.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(o)!==-1)i=a.closeIndex;else{const v=this.readStopNodeData(t,l,f+1);if(!v)throw new Error(`Unexpected end of ${l}`);i=v.i,g=v.tagContent}const p=new I(o);o!==u&&c&&(p[":@"]=this.buildAttributesMap(u,s,o)),g&&(g=this.parseTextData(g,o,s,!0,c,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),p.add(this.options.textNodeName,g),this.addChild(n,p,s)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){o[o.length-1]==="/"?(o=o.substr(0,o.length-1),s=s.substr(0,s.length-1),u=o):u=u.substr(0,u.length-1),this.options.transformTagName&&(o=this.options.transformTagName(o));const g=new I(o);o!==u&&c&&(g[":@"]=this.buildAttributesMap(u,s,o)),this.addChild(n,g,s),s=s.substr(0,s.lastIndexOf("."))}else{const g=new I(o);this.tagsNodeStack.push(n),o!==u&&c&&(g[":@"]=this.buildAttributesMap(u,s,o)),this.addChild(n,g,s),n=g}r="",i=f}}else r+=t[i];return e.child};function ke(t,e,n){const r=this.options.updateTag(e.tagname,n,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),t.addChild(e))}const Ae=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function Se(t,e,n,r){return t&&(r===void 0&&(r=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Oe(t,e,n){const r="*."+n;for(const s in t){const i=t[s];if(r===i||e===i)return!0}return!1}function Pe(t,e,n=">"){let r,s="";for(let i=e;i<t.length;i++){let a=t[i];if(r)a===r&&(r="");else if(a==='"'||a==="'")r=a;else if(a===n[0])if(n[1]){if(t[i+1]===n[1])return{data:s,index:i}}else return{data:s,index:i};else a==="	"&&(a=" ");s+=a}}function A(t,e,n,r){const s=t.indexOf(e,n);if(s===-1)throw new Error(r);return s+e.length-1}function B(t,e,n,r=">"){const s=Pe(t,e+1,r);if(!s)return;let i=s.data;const a=s.index,o=i.search(/\s/);let l=i,u=!0;o!==-1&&(l=i.substring(0,o),i=i.substring(o+1).trimStart());const c=l;if(n){const f=l.indexOf(":");f!==-1&&(l=l.substr(f+1),u=l!==s.data.substr(f+1))}return{tagName:l,tagExp:i,closeIndex:a,attrExpPresent:u,rawTagName:c}}function Ie(t,e,n){const r=n;let s=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const i=A(t,">",n,`${e} is not closed`);if(t.substring(n+2,i).trim()===e&&(s--,s===0))return{tagContent:t.substring(r,n),i};n=i}else if(t[n+1]==="?")n=A(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=A(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=A(t,"]]>",n,"StopNode is not closed.")-2;else{const i=B(t,n,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,n=i.closeIndex)}}function R(t,e,n){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:be(t,n)}else return ft.isExist(t)?t:""}var $e=ve,ht={};function Ve(t,e){return pt(t,e)}function pt(t,e,n){let r;const s={};for(let i=0;i<t.length;i++){const a=t[i],o=Fe(a);let l="";if(n===void 0?l=o:l=n+"."+o,o===e.textNodeName)r===void 0?r=a[o]:r+=""+a[o];else{if(o===void 0)continue;if(a[o]){let u=pt(a[o],e,l);const c=Me(u,e);a[":@"]?Le(u,a[":@"],l,e):Object.keys(u).length===1&&u[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?u=u[e.textNodeName]:Object.keys(u).length===0&&(e.alwaysCreateTextNode?u[e.textNodeName]="":u=""),s[o]!==void 0&&s.hasOwnProperty(o)?(Array.isArray(s[o])||(s[o]=[s[o]]),s[o].push(u)):e.isArray(o,l,c)?s[o]=[u]:s[o]=u}}}return typeof r=="string"?r.length>0&&(s[e.textNodeName]=r):r!==void 0&&(s[e.textNodeName]=r),s}function Fe(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(r!==":@")return r}}function Le(t,e,n,r){if(e){const s=Object.keys(e),i=s.length;for(let a=0;a<i;a++){const o=s[a];r.isArray(o,n+"."+o,!0,!0)?t[o]=[e[o]]:t[o]=e[o]}}}function Me(t,e){const{textNodeName:n}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}ht.prettify=Ve;const{buildOptions:De}=W,ze=$e,{prettify:Be}=ht,Re=G;let Xe=class{constructor(t){this.externalEntities={},this.options=De(t)}parse(t,e){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});const s=Re.validate(t,e);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const n=new ze(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(t);return this.options.preserveOrder||r===void 0?r:Be(r,this.options)}addEntity(t,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}};var _e=Xe;const Ge=`
`;function Ke(t,e){let n="";return e.format&&e.indentBy.length>0&&(n=Ge),gt(t,e,"",n)}function gt(t,e,n,r){let s="",i=!1;for(let a=0;a<t.length;a++){const o=t[a],l=We(o);if(l===void 0)continue;let u="";if(n.length===0?u=l:u=`${n}.${l}`,l===e.textNodeName){let p=o[l];Ue(u,e)||(p=e.tagValueProcessor(l,p),p=xt(p,e)),i&&(s+=r),s+=p,i=!1;continue}else if(l===e.cdataPropName){i&&(s+=r),s+=`<![CDATA[${o[l][0][e.textNodeName]}]]>`,i=!1;continue}else if(l===e.commentPropName){s+=r+`<!--${o[l][0][e.textNodeName]}-->`,i=!0;continue}else if(l[0]==="?"){const p=rt(o[":@"],e),v=l==="?xml"?"":r;let E=o[l][0][e.textNodeName];E=E.length!==0?" "+E:"",s+=v+`<${l}${E}${p}?>`,i=!0;continue}let c=r;c!==""&&(c+=e.indentBy);const f=rt(o[":@"],e),h=r+`<${l}${f}`,g=gt(o[l],e,u,c);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=h+">":s+=h+"/>":(!g||g.length===0)&&e.suppressEmptyNode?s+=h+"/>":g&&g.endsWith(">")?s+=h+`>${g}${r}</${l}>`:(s+=h+">",g&&r!==""&&(g.includes("/>")||g.includes("</"))?s+=r+e.indentBy+g+r:s+=g,s+=`</${l}>`),i=!0}return s}function We(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(t.hasOwnProperty(r)&&r!==":@")return r}}function rt(t,e){let n="";if(t&&!e.ignoreAttributes)for(let r in t){if(!t.hasOwnProperty(r))continue;let s=e.attributeValueProcessor(r,t[r]);s=xt(s,e),s===!0&&e.suppressBooleanAttributes?n+=` ${r.substr(e.attributeNamePrefix.length)}`:n+=` ${r.substr(e.attributeNamePrefix.length)}="${s}"`}return n}function Ue(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let n=t.substr(t.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===t||e.stopNodes[r]==="*."+n)return!0;return!1}function xt(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const r=e.entities[n];t=t.replace(r.regex,r.val)}return t}var Ye=Ke;const Ze=Ye,He=ct,qe={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function k(t){this.options=Object.assign({},qe,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=He(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=tn),this.processTextOrObjNode=Je,this.options.format?(this.indentate=Qe,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}k.prototype.build=function(t){return this.options.preserveOrder?Ze(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)};k.prototype.j2x=function(t,e,n){let r="",s="";const i=n.join(".");for(let a in t)if(Object.prototype.hasOwnProperty.call(t,a))if(typeof t[a]>"u")this.isAttribute(a)&&(s+="");else if(t[a]===null)this.isAttribute(a)?s+="":a[0]==="?"?s+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(t[a]instanceof Date)s+=this.buildTextValNode(t[a],a,"",e);else if(typeof t[a]!="object"){const o=this.isAttribute(a);if(o&&!this.ignoreAttributesFn(o,i))r+=this.buildAttrPairStr(o,""+t[a]);else if(!o)if(a===this.options.textNodeName){let l=this.options.tagValueProcessor(a,""+t[a]);s+=this.replaceEntitiesValue(l)}else s+=this.buildTextValNode(t[a],a,"",e)}else if(Array.isArray(t[a])){const o=t[a].length;let l="",u="";for(let c=0;c<o;c++){const f=t[a][c];if(!(typeof f>"u"))if(f===null)a[0]==="?"?s+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(typeof f=="object")if(this.options.oneListGroup){const h=this.j2x(f,e+1,n.concat(a));l+=h.val,this.options.attributesGroupName&&f.hasOwnProperty(this.options.attributesGroupName)&&(u+=h.attrStr)}else l+=this.processTextOrObjNode(f,a,e,n);else if(this.options.oneListGroup){let h=this.options.tagValueProcessor(a,f);h=this.replaceEntitiesValue(h),l+=h}else l+=this.buildTextValNode(f,a,"",e)}this.options.oneListGroup&&(l=this.buildObjectNode(l,a,u,e)),s+=l}else if(this.options.attributesGroupName&&a===this.options.attributesGroupName){const o=Object.keys(t[a]),l=o.length;for(let u=0;u<l;u++)r+=this.buildAttrPairStr(o[u],""+t[a][o[u]])}else s+=this.processTextOrObjNode(t[a],a,e,n);return{attrStr:r,val:s}};k.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Je(t,e,n,r){const s=this.j2x(t,n+1,r.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,s.attrStr,n):this.buildObjectNode(s.val,e,s.attrStr,n)}k.prototype.buildObjectNode=function(t,e,n,r){if(t==="")return e[0]==="?"?this.indentate(r)+"<"+e+n+"?"+this.tagEndChar:this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",s=""),(n||n==="")&&t.indexOf("<")===-1?this.indentate(r)+"<"+e+n+i+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(r)+`<!--${t}-->`+this.newLine:this.indentate(r)+"<"+e+n+i+this.tagEndChar+t+this.indentate(r)+s}};k.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};k.prototype.buildTextValNode=function(t,e,n,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+n+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+n+">"+s+"</"+e+this.tagEndChar}};k.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};function Qe(t){return this.options.indentBy.repeat(t)}function tn(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var en=k;const nn=G,rn=_e,sn=en;var mt={XMLParser:rn,XMLValidator:nn,XMLBuilder:sn};const on=new mt.XMLParser({preserveOrder:!0,ignoreAttributes:!1,attributeNamePrefix:"",allowBooleanAttributes:!0,commentPropName:X,cdataPropName:_,parseTagValue:!1});function an(t){return x.useMemo(()=>{try{if(!mt.XMLValidator.validate(t))throw new Error("Invalid XML!");const e=on.parse(t);if(typeof t=="string"&&t.trim().length>0&&e.length===0)throw new Error("Invalid XML!");return{json:e,valid:!0}}catch(e){return{json:null,valid:!1,errorMessage:`Fail to parse: ${e.message}`}}},[t])}function T(t,e=!0){const{push:n}=at(),r=x.useRef(null);return x.useEffect(()=>{e&&r.current&&t&&n(t,{element:r.current})},[r.current,n,t,e]),r}function ln(t){const{indentation:e,children:n,isInline:r,keyValue:s}=t,{theme:i}=j(),a=T(s),o=T(`${s}-close`,!r);return d.jsxs("div",{style:{color:i.cdataColor},children:[d.jsx("span",{ref:a,children:`${e}<![CDATA[`}),n,d.jsx("span",{ref:o,children:`${r?"":e}]]>`})]})}const un=t=>x.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...t},x.createElement("path",{d:"M9 17.898C9 18.972 10.2649 19.546 11.0731 18.8388L17.3838 13.3169C18.1806 12.6197 18.1806 11.3801 17.3838 10.6829L11.0731 5.16108C10.2649 4.45388 9 5.02785 9 6.1018V17.898Z"}));function bt(t){const{collapsible:e,theme:n}=j(),{collapsed:r}=t;return e?d.jsx("span",{style:{position:"relative"},children:d.jsx("span",{style:{position:"absolute",right:"0",border:0,padding:0,background:"none"},children:d.jsx(un,{fill:n.separatorColor,style:{transform:`rotate(${r?0:90}deg)`,transition:"transform 0.2s"}})})}):null}function yt(t){const{collapsible:e,initialCollapsedDepth:n}=j(),r=n!=null,[s,i]=x.useState(()=>!r||!e?!1:t>=n),a=()=>i(o=>!o);return x.useEffect(()=>{i(!r||!e?!1:t>=n)},[n,t,e]),{collapsed:s,buttonProps:e?{onClick:a,role:"button",style:{cursor:"pointer"}}:{}}}function dn(t){const{indentation:e,children:n,isInline:r,level:s,keyValue:i}=t,{theme:a}=j(),{collapsed:o,buttonProps:l}=yt(s),u=T(i),c=T(`${i}-close`,!r),f=o?"none":void 0;return d.jsxs("div",{style:{color:a.commentColor},children:[d.jsxs("span",{...l,children:[d.jsx("span",{children:e}),d.jsx(bt,{collapsed:o}),d.jsx("span",{ref:u,children:"<!-- "})]}),d.jsx("span",{style:{display:f},children:n}),o&&"...",d.jsx("span",{style:{display:f},ref:c,children:`${r||o?" ":e}-->`})]})}function vt(t){const{attributes:e}=t,{theme:n}=j();return e?d.jsx("span",{children:Object.entries(e).map(([r,s])=>d.jsxs("span",{children:[d.jsx("span",{style:{color:n.attributeKeyColor},children:` ${r}`}),d.jsx("span",{style:{color:n.separatorColor},children:"="}),d.jsx("span",{style:{color:n.attributeValueColor},children:`"${s}"`})]},`attribute-${r}`))}):null}function cn(t){const{indentation:e,tagKey:n,attributes:r,keyValue:s}=t,{theme:i}=j(),a=T(s);return d.jsxs("div",{ref:a,children:[d.jsx("span",{style:{color:i.separatorColor},children:`${e}<?`}),d.jsx("span",{style:{color:i.tagColor},children:`${n.slice(1)}`}),d.jsx(vt,{attributes:r}),d.jsx("span",{style:{color:i.separatorColor},children:"?>"})]})}function fn(t){const{indentation:e,tagKey:n,attributes:r,children:s,isInline:i,hasChildren:a,level:o,keyValue:l}=t,{collapsed:u,buttonProps:c}=yt(o),{theme:f}=j(),h=T(l),g=T(`${l}-close`,!i),p=u?"none":void 0;return d.jsxs("div",{ref:h,children:[d.jsxs("span",{...c,children:[d.jsx("span",{children:e}),d.jsx(bt,{collapsed:u}),d.jsx("span",{style:{color:f.separatorColor},children:"<"}),d.jsx("span",{style:{color:f.tagColor},children:`${n}`}),!u&&d.jsx(vt,{attributes:r}),!u&&d.jsx("span",{style:{color:f.separatorColor},children:a?">":" />"})]}),a&&d.jsxs(d.Fragment,{children:[d.jsx("span",{style:{display:p},children:s}),u&&d.jsx("span",{style:{color:"#777"},children:"..."}),d.jsx("span",{style:{color:f.separatorColor,display:p},children:`${i||u?"":e}</`}),d.jsx("span",{style:{color:f.tagColor,display:p},children:`${n}`}),d.jsx("span",{style:{color:f.separatorColor,display:p},ref:g,children:">"})]})]})}function hn(t){const{children:e,keyValue:n}=t,r=T(n);return d.jsx("div",{ref:r,children:e})}function pn(t){const{hasSiblings:e,text:n,indentation:r,isText:s,keyValue:i}=t,{theme:a}=j(),o=s?{color:a.textColor}:void 0;return ut(n)||e?d.jsx("div",{style:o,children:n.split(`
`).filter(l=>!!l.trim()).map((l,u)=>d.jsx(hn,{keyValue:`${i}${u}`,children:`${r}${l.trim()}`},`${i}${u}`))}):d.jsx("span",{style:o,children:n})}function $(t){const{elements:e,level:n=0,isText:r=!0,parentKey:s=""}=t,{indentSize:i}=j();return!Array.isArray(e)||e.length===0?null:d.jsx(d.Fragment,{children:e.map((a,o)=>{const{tagKey:l,attributes:u,subElements:c,type:f}=Bt(a),h=e.length>1,g=Lt(i,n),p=`${s}-${n+1}-${o+1}`,v=Mt(c);switch(f){case V:return d.jsx(pn,{text:c,indentation:g,hasSiblings:h,isText:r,keyValue:p},p);case X:return d.jsx(dn,{keyValue:p,isInline:v,indentation:g,level:n,children:d.jsx($,{elements:c,level:n+1,parentKey:p,isText:!1})},p);case _:return d.jsx(ln,{keyValue:p,indentation:g,isInline:v,children:d.jsx($,{elements:c,level:n+1,parentKey:p,isText:!1})},p);case it:return d.jsx(cn,{indentation:g,tagKey:l,attributes:u,keyValue:p},p);default:return d.jsx(fn,{indentation:g,tagKey:l,attributes:u,isInline:v,hasChildren:c.length>0,level:n,keyValue:p,children:d.jsx($,{elements:c,level:n+1,parentKey:p})},p)}})})}function gn(){return d.jsx("div",{children:"Invalid XML!"})}function Nt(t){return t?t.checkVisibility?t.checkVisibility():!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length):!1}function jt(t){return!t||!t.parentElement?0:Nt(t.parentElement)?t.parentElement.offsetTop:jt(t.parentElement)}function xn({viewerContainer:t}){const{lines:e}=at(),{theme:n}=j(),[r,s]=x.useState({width:0,height:0}),i=x.useRef(null),{sortedLines:a,numberOfLines:o}=x.useMemo(()=>{const u=Object.values(e).map(c=>{var f;const h=Nt(c.element);return{...c,offset:h?(f=c.element)==null?void 0:f.offsetTop:jt(c.element),visible:h}}).sort((c,f)=>c.offset===f.offset?c.visible===f.visible?0:c.visible?-1:1:c.offset-f.offset).map((c,f)=>({...c,lineNumber:f+1}));return{sortedLines:u.filter(c=>c.visible),numberOfLines:u.length+1}},[e,r.width,r.height]),l=x.useMemo(()=>new ResizeObserver(function(u){const{width:c,height:f}=u[0].contentRect;s({width:c,height:f})}),[]);return x.useEffect(()=>{t&&l.observe(t)},[t,l]),x.useEffect(()=>()=>{l.disconnect()},[]),d.jsx("div",{ref:i,style:{width:16+8*String(o).length,height:"auto",backgroundColor:n.lineNumberBackground,color:n.lineNumberColor,marginRight:16,paddingTop:8,position:"relative"},children:a.map(u=>{var c;return d.jsx("div",{style:{position:"absolute",top:u.offset-(((c=i.current)==null?void 0:c.offsetTop)??0),right:8},children:u.lineNumber},u.lineNumber)})})}function mn(t){const{theme:e,xml:n,collapsible:r=!1,indentSize:s=2,invalidXml:i,initialCollapsedDepth:a,showLineNumbers:o=!1}=t,[l,u]=x.useState(()=>({...F,...e})),{json:c,valid:f}=an(n),[h,g]=x.useState(null),p=x.useMemo(()=>({theme:l,collapsible:r,indentSize:s,initialCollapsedDepth:a}),[l,r,s,a]);return x.useEffect(()=>{u(v=>{const E={...F,...e};return Rt(E,v)?v:E})},[e]),f?d.jsx(lt.Provider,{value:p,children:d.jsx(Vt,{children:d.jsxs("div",{className:"rxv-container",style:{fontFamily:l.fontFamily,display:"flex",flexDirection:"row"},children:[o&&d.jsx(xn,{viewerContainer:h}),d.jsx("div",{ref:g,style:{flex:1,whiteSpace:"pre-wrap",overflowWrap:"break-word",overflow:"auto",paddingTop:4,paddingBottom:4,paddingLeft:r?10:0},children:d.jsx($,{elements:c})})]})},n)}):i||d.jsx(gn,{})}const bn={maxFileSize:10*1024*1024,enableSearch:!0,enableCopy:!0,enableFormat:!0,enableValidation:!0,theme:"auto",collapsedLevels:2,showAttributes:!0,showComments:!0,showProcessingInstructions:!0},yn=({context:t,config:e})=>{const[n,r]=x.useState(""),[s,i]=x.useState(!1),[a,o]=x.useState(null),[l,u]=x.useState(""),[c,f]=x.useState([]),[h,g]=x.useState("light"),p=x.useMemo(()=>({...bn,...e}),[e]);x.useEffect(()=>{const b=()=>{if(p.theme==="auto"){const w=window.matchMedia("(prefers-color-scheme: dark)").matches;g(w?"dark":"light")}else g(p.theme)};b();const N=window.matchMedia("(prefers-color-scheme: dark)");return N.addEventListener("change",b),()=>N.removeEventListener("change",b)},[p.theme]),x.useEffect(()=>{(async()=>{if(t.file){i(!0),o(null);try{if(t.file.size>p.maxFileSize)throw new Error(`文件过大，超过 ${Math.round(p.maxFileSize/1024/1024)}MB 限制`);const N=await fetch(t.file.url);if(!N.ok)throw new Error(`加载文件失败: ${N.statusText}`);const w=await N.text();r(w)}catch(N){o(N instanceof Error?N.message:"加载文件失败")}finally{i(!1)}}})()},[t.file,p.maxFileSize]);const v=b=>{if(u(b),!b.trim()){f([]);return}const N=n.split(`
`),w=[],M=b.toLowerCase();N.forEach((S,D)=>{S.toLowerCase().includes(M)&&w.push(D)}),f(w)},E=async()=>{try{await navigator.clipboard.writeText(n)}catch(b){console.error("复制失败:",b)}},Et=()=>{try{const b=n.replace(/></g,`>
<`).replace(/^\s+|\s+$/g,"").split(`
`).map((N,w,M)=>{var U,Y,Z,H;const S=N.trim();if(!S)return"";const D=(((Y=(U=N.match(/^\s*/))==null?void 0:U[0])==null?void 0:Y.length)||0)/2,wt="  ".repeat(Math.max(0,D));if(S.startsWith("</")){const q=M.slice(0,w).reverse().find(z=>{const O=z.trim();return O.startsWith("<")&&!O.startsWith("</")&&!O.endsWith("/>")&&!O.includes("?>")&&!O.includes("<!--")});if(q){const z=(((H=(Z=q.match(/^\s*/))==null?void 0:Z[0])==null?void 0:H.length)||0)/2;return"  ".repeat(Math.max(0,z))+S}}return wt+S}).join(`
`);r(b)}catch(b){console.error("格式化失败:",b)}};return s?d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:h==="dark"?"#7d8590":"#586069"},children:"加载中..."}):a?d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:h==="dark"?"#f85149":"#d1242f",textAlign:"center",padding:"20px"},children:a}):n?d.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",background:h==="dark"?"#0d1117":"#ffffff"},children:[d.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${h==="dark"?"#30363d":"#d0d7de"}`,display:"flex",alignItems:"center",gap:12,background:h==="dark"?"#161b22":"#f6f8fa"},children:[p.enableSearch&&d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("input",{type:"text",placeholder:"搜索 XML 内容...",value:l,onChange:b=>v(b.target.value),style:{padding:"6px 12px",border:`1px solid ${h==="dark"?"#30363d":"#d0d7de"}`,borderRadius:"6px",background:h==="dark"?"#0d1117":"#ffffff",color:h==="dark"?"#e6edf3":"#24292f",fontSize:"13px",width:"200px"}}),c.length>0&&d.jsxs("span",{style:{fontSize:"12px",color:h==="dark"?"#7d8590":"#586069"},children:["找到 ",c.length," 个结果"]})]}),d.jsxs("div",{style:{display:"flex",gap:8},children:[p.enableFormat&&d.jsx("button",{onClick:Et,title:"格式化 XML",style:{padding:"6px 12px",border:`1px solid ${h==="dark"?"#30363d":"#d0d7de"}`,borderRadius:"6px",background:h==="dark"?"#21262d":"#ffffff",color:h==="dark"?"#e6edf3":"#24292f",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:"🎨 格式化"}),p.enableCopy&&d.jsx("button",{onClick:E,title:"复制 XML 内容",style:{padding:"6px 12px",border:`1px solid ${h==="dark"?"#30363d":"#d0d7de"}`,borderRadius:"6px",background:h==="dark"?"#21262d":"#ffffff",color:h==="dark"?"#e6edf3":"#24292f",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:"📋 复制"})]})]}),d.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px"},children:d.jsx("div",{style:{fontSize:"14px",lineHeight:"1.5",background:h==="dark"?"#0d1117":"#ffffff",borderRadius:"6px",border:`1px solid ${h==="dark"?"#30363d":"#d0d7de"}`,padding:"12px"},children:d.jsx(mn,{xml:n,collapsible:!0,indentSize:2,showLineNumbers:!0,initialCollapsedDepth:void 0,theme:{tagColor:h==="dark"?"#79c0ff":"#0969da",attributeKeyColor:h==="dark"?"#ffa657":"#d73a49",attributeValueColor:h==="dark"?"#a5d6ff":"#032f62",textColor:h==="dark"?"#e6edf3":"#24292f",commentColor:h==="dark"?"#7d8590":"#6a737d",cdataColor:h==="dark"?"#7ee787":"#28a745",separatorColor:h==="dark"?"#8b949e":"#586069",fontFamily:"ui-monospace, SFMono-Regular, 'SF Mono', Consolas, 'Liberation Mono', Menlo, monospace",lineNumberBackground:h==="dark"?"#161b22":"#f6f8fa",lineNumberColor:h==="dark"?"#7d8590":"#6a737d"}})})})]}):d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:h==="dark"?"#7d8590":"#586069"},children:"无 XML 内容"})};function vn(t={}){return{name:"xml-preview",supportedTypes:["text/xml","application/xml"],supportedExtensions:[".xml",".rss",".atom",".svg",".kml",".gpx"],hooks:{render:e=>d.jsx(yn,{context:e,config:t}),renderToolbar:e=>{const{file:n}=e,r=()=>{const s=document.createElement("a");s.href=n.url,s.download=n.name,document.body.appendChild(s),s.click(),document.body.removeChild(s)};return d.jsxs(Pt,{children:[d.jsx(St,{name:n.name,size:n.size,type:"XML",icon:"📄"}),d.jsx(Ot,{}),d.jsx(At,{onClick:r,icon:"📥",title:"Download",children:"Download"})]})}}}}const st=[{name:"sample.xml",url:"./sample.xml",type:"text/xml",size:1024,extension:".xml"},{name:"sample.rss",url:"./sample.rss",type:"application/rss+xml",size:2048,extension:".rss"},{name:"sample.svg",url:"./sample.svg",type:"image/svg+xml",size:512,extension:".svg"}],wn=()=>{const[t,e]=x.useState(st[0]),n=Ct(Tt,[vn({maxFileSize:10*1024*1024,enableSearch:!0,enableCopy:!0,enableFormat:!0,enableValidation:!0,theme:"auto",collapsedLevels:2,showAttributes:!0,showComments:!0,showProcessingInstructions:!0})]);return d.jsx(kt,{title:"XML 预览演示",description:"使用 react-xml-viewer 展示 XML 文件的树形结构和语法高亮",children:d.jsxs("div",{style:{display:"flex",height:"100%",gap:"16px"},children:[d.jsxs("div",{style:{width:"300px",borderRight:"1px solid #e1e4e8",padding:"16px",background:"#f8f9fa",overflow:"auto"},children:[d.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"示例文件"}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:st.map(r=>d.jsxs("button",{onClick:()=>e(r),style:{padding:"12px",border:"1px solid #d0d7de",borderRadius:"6px",background:(t==null?void 0:t.name)===r.name?"#0969da":"#ffffff",color:(t==null?void 0:t.name)===r.name?"#ffffff":"#24292f",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"all 0.2s"},onMouseEnter:s=>{(t==null?void 0:t.name)!==r.name&&(s.currentTarget.style.background="#f6f8fa",s.currentTarget.style.borderColor="#0969da")},onMouseLeave:s=>{(t==null?void 0:t.name)!==r.name&&(s.currentTarget.style.background="#ffffff",s.currentTarget.style.borderColor="#d0d7de")},children:[d.jsx("div",{style:{fontWeight:"500",marginBottom:"4px"},children:r.name}),d.jsxs("div",{style:{fontSize:"12px",opacity:.7},children:[r.type," • ",(r.size/1024).toFixed(1)," KB"]})]},r.name))}),d.jsxs("div",{style:{marginTop:"24px",padding:"12px",background:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"6px",fontSize:"12px",color:"#856404"},children:[d.jsx("strong",{children:"功能特性："}),d.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"16px"},children:[d.jsx("li",{children:"树形结构展示"}),d.jsx("li",{children:"语法高亮"}),d.jsx("li",{children:"搜索功能"}),d.jsx("li",{children:"格式化支持"}),d.jsx("li",{children:"复制功能"}),d.jsx("li",{children:"主题切换"})]})]})]}),d.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:t?d.jsx(n,{file:t}):d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",color:"#586069",fontSize:"16px"},children:"请选择一个 XML 文件进行预览"})})]})})};export{wn as default};
